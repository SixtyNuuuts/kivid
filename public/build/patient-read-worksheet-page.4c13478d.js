"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[903],{1873:function(e,t,s){var i=s(538),n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container",attrs:{id:"worksheet"}},[i("header",[e.loading?i("div",{staticClass:"loading-block"},[e._m(0),e._v(" "),i("div",{staticClass:"loading-gray part-of-body"})]):i("div",{staticClass:"read-worksheet-title"},[i("div",{staticClass:"title"},[i("h1",[e._v(e._s(e.getWorksheet.title))])]),e._v(" "),e.getWorksheet.partOfBody?i("TagPartOfBody",{staticClass:"btn-light btn-light-plus",class:{completed:e.allExercisesIsCompleted},attrs:{partOfBody:e.getWorksheet.partOfBody}}):e._e()],1)]),e._v(" "),i("div",{staticClass:"info"},[i("transition",{attrs:{name:"fade"}},[!e.loading&&e.allExercisesIsCompleted?i("div",[i("i",{staticClass:"kiv-confettis"},[i("img",{attrs:{src:s(4459),alt:"Icone de confettis"}})]),e._v(" "),e.doctorView?i("p",[e._v("\n                    Super ! Le patient a terminé tous les exercices de la fiche.\n                ")]):i("p",[e._v("\n                    Félicitations, vous avez fait tous les exercices de la\n                    fiche.\n                    "),e.currentWorksheetSession?i("span",[e._v("Vous pouvez laisser un commentaire à votre\n                        praticien !")]):e._e()])]):e._e(),e._v(" "),e.loading||e.allExercisesIsCompleted?e._e():i("div",[i("i",{staticClass:"kiv-info icon-17"}),e._v(" "),e.doctorView?i("p",[e._v("\n                   N'hésitez pas à laisser un commentaire pour guider le patient dans ses exercices ou répondre à ses questions.\n                ")]):i("p",[e._v("\n                    À la fin de vos exercices, vous aurez la possiblité\n                    d’écrire un bref commentaire.\n                ")])]),e._v(" "),e.loading?i("div",{staticClass:"loading-block"},[i("i",{staticClass:"kiv-info icon-17"}),e._v(" "),i("div",{staticClass:"loading-gray w-55 p"})]):e._e()])],1),e._v(" "),i("div",{staticClass:"btn-timing-frieze-mobile"},[i("vs-button",{staticClass:"secondary w-100",on:{click:function(t){e.modalTimingFriezeMobile=!e.modalTimingFriezeMobile}}},[e._v("\n            Frise chronologique\n        ")])],1),e._v(" "),i("main",[i("vs-dialog",{staticClass:"modal-mobile",model:{value:e.modalTimingFriezeMobile,callback:function(t){e.modalTimingFriezeMobile=t},expression:"modalTimingFriezeMobile"}},[i("TimingFrieze",{attrs:{loading:e.loading,worksheet:e.getWorksheet,exercises:e.getExercises,currentWorksheetSession:e.getCurrentWorksheetSession,totalWorksheetSessions:e.getTotalWorksheetSessions}})],1),e._v(" "),i("section",{attrs:{id:"timing-frieze"}},[i("TimingFrieze",{attrs:{loading:e.loading,worksheet:e.getWorksheet,exercises:e.getExercises,currentWorksheetSession:e.getCurrentWorksheetSession,totalWorksheetSessions:e.getTotalWorksheetSessions}})],1),e._v(" "),i("section",{attrs:{id:"exercises-playlist"}},[i("ExercisesPlaylist",{attrs:{patient:e.patient,doctor:e.doctor,loading:e.loading,doctorView:e.doctorView,worksheet:e.getWorksheet,exercises:e.getExercises,currentWorksheetSession:e.getCurrentWorksheetSession,csrfTokenStartWorksheetSession:e.csrfTokenStartWorksheetSession,csrfTokenCompleteWorksheetSession:e.csrfTokenCompleteWorksheetSession,csrfTokenCompleteExercise:e.csrfTokenCompleteExercise,csrfTokenCreateSessionStat:e.csrfTokenCreateSessionStat,csrfTokenCreateCommentary:e.csrfTokenCreateCommentary},on:{stripeCheckout:e.stripeCheckout}})],1)],1)])};n._withStripped=!0;s(7327),s(4916),s(4765),s(6992),s(1539),s(8783),s(3948),s(285),s(2222),s(1249),s(4747),s(7941),s(2526),s(5003),s(9337),s(1817),s(2165);var o=s(4098),a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"session-timing-frieze"},[i("transition",{attrs:{name:"fade"}},[e.loading?i("div",{staticClass:"loading-block"},[i("div",{staticClass:"loading-gray session-block-loading"}),e._v(" "),i("div",{staticClass:"session-timing-line"},[i("div",{staticClass:"progressbar-steps"}),e._v(" "),i("div",{staticClass:"loading-gray progressbar-base"})])]):i("div",[i("div",{staticClass:"session-block"},[i("i",{staticClass:"session-img"},[i("img",{attrs:{src:s(5205),alt:"Icone d'une basket"}})]),e._v(" "),e.getCurrentWorksheetSession?i("h2",[e._v("\n                    Session n°"+e._s(e.getCurrentWorksheetSession.execOrder)+"\n                ")]):e._e(),e._v(" "),e.getCurrentWorksheetSession?i("div",{staticClass:"total-sessions"},[e._v("\n                    sur "+e._s(e.getTotalWorksheetSessions)+"\n                ")]):e._e(),e._v(" "),e.getCurrentWorksheetSession?e._e():i("h3",[e._v("Aucune Session")])]),e._v(" "),i("div",{staticClass:"session-timing-line"},[i("div",{staticClass:"progressbar-steps"},[e.getCurrentWorksheetSession?i("div",{staticClass:"session-start-date"},[i("i",{staticClass:"kiv-calendar icon-10"}),e._v(" "),i("div",{staticClass:"date-hours"},[i("div",{staticClass:"date"},[e._v("\n                                "+e._s(e.getWorksheetSessionStartDate)+"\n                            ")]),e._v(" "),i("div",{staticClass:"hours"},[e._v("\n                                "+e._s(e.getWorksheetSessionStartHours)+"\n                            ")])])]):e._e(),e._v(" "),e.getCurrentWorksheetSession?i("div",{staticClass:"session-end-date"},[i("i",{staticClass:"kiv-calendar icon-10"}),e._v(" "),i("div",{staticClass:"date-hours"},[i("div",{staticClass:"date"},[e._v("\n                                "+e._s(e.getWorksheetSessionEndDate)+"\n                            ")]),e._v(" "),i("div",{staticClass:"hours"},[e._v("\n                                "+e._s(e.getWorksheetSessionEndHours)+"\n                            ")])])]):e._e()]),e._v(" "),i("div",{staticClass:"progressbar-base"},[i("div",{staticClass:"progressbar-thumb",style:{height:e.getTimingPercentage+"%"}}),e._v(" "),i("div",{staticClass:"progressbar-current-progression",class:{start:e.getTimingPercentage<25,end:e.getTimingPercentage>75,max:e.getTimingPercentage>=100},style:{top:e.getTimingPercentage<=100?e.getTimingPercentage+"%":"100%"}},[i("div",{staticClass:"legend"},[i("div",{staticClass:"session-timing"},[i("span",[e._v(e._s(e.getTimingPercentage+"%"))]),e._v("de la fiche a été fait\n                            ")]),e._v(" "),!e.getWorksheetSessionDoneDate&&e.getCurrentWorksheetSession?i("div",{staticClass:"final-goal"},[e._v("\n                                "+e._s(e.getTimeLeftBeforeNextSession)+"\n                            ")]):e._e(),e._v(" "),e.getWorksheetSessionDoneDate?i("div",{staticClass:"final-goal"},[e._v("\n                                Terminé le\n                                "+e._s(e.getWorksheetSessionDoneDate)+"\n                            ")]):e._e()]),e._v(" "),i("div",{staticClass:"point"})])])])])])],1)};a._withStripped=!0;s(9653);var r=s(381),c=s.n(r),l={props:{loading:Boolean,worksheet:Object,exercises:Array,currentWorksheetSession:[Object,Boolean],totalWorksheetSessions:Number},data:function(){return{}},computed:{getWorksheet:function(){return this.worksheet},getExercises:function(){return this.exercises},getCurrentWorksheetSession:function(){return this.currentWorksheetSession},getTotalWorksheetSessions:function(){return this.totalWorksheetSessions},getTimingPercentage:function(){var e=0;if(this.getExercises&&this.getExercises.length){var t=100/this.getExercises.length,s=this.getExercises.filter((function(e){return e.isCompleted})).length;e=Math.round(t*s)}return e},getWorksheetSessionStartDate:function(){return c()(this.getCurrentWorksheetSession.startAt).format("DD/MM/YYYY")},getWorksheetSessionStartHours:function(){return c()(this.getCurrentWorksheetSession.startAt).format("HH:mm:ss")},getWorksheetSessionEndDate:function(){return c()(this.getCurrentWorksheetSession.endAt).format("DD/MM/YYYY")},getWorksheetSessionEndHours:function(){return c()(this.getCurrentWorksheetSession.endAt).format("HH:mm:ss")},getWorksheetSessionDoneDate:function(){return this.getCurrentWorksheetSession&&this.getCurrentWorksheetSession.doneAt?c()(this.getCurrentWorksheetSession.donetAt).format("DD/MM/YYYY"):null},getWorksheetSessionDoneHours:function(){return this.getCurrentWorksheetSession&&this.getCurrentWorksheetSession.doneAt?c()(this.getCurrentWorksheetSession.donetAt).format("HH:mm:ss"):null},getTimeLeftBeforeNextSession:function(){var e=o.Z.getTimeLeftBeforeNextSession(this.getCurrentWorksheetSession.endAt);return e.days>=1?1===Math.round(e.days)?"".concat(Math.round(e.days)," jour restant"):"".concat(Math.round(e.days)," jours restants"):e.hours>=1?1===e.hours?"".concat(Math.round(e.hours)," heure restante"):"".concat(Math.round(e.hours)," heures restantes"):e.minutes>=1?1===e.minutes?"".concat(Math.round(e.minutes)," minute restante"):"".concat(Math.round(e.minutes)," minutes restantes"):e.seconds>=1?1===e.seconds?"".concat(Math.round(e.seconds)," seconde restante"):"".concat(Math.round(e.seconds)," secondes restantes"):null}}},d=s(1900),u=(0,d.Z)(l,a,[],!1,null,"a1fc55b4",null);u.options.__file="assets/vue/patient/ReadWorkSheetPage/TimingFrieze.vue";var v=u.exports,m=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"exercises-list"},[e.loading?s("div",[e._m(0),e._v(" "),e._m(1),e._v(" "),e._m(2)]):s("div",e._l(e.getExercises,(function(t,i){return s("div",{key:i,staticClass:"exercise",class:{disabled:!e.doctorView&&e.getCurrentWorksheetSession&&t!==e.getCurrentExercise&&!t.isCompleted}},[s("div",{staticClass:"thumbnail-wrapper"},[!e.getCurrentWorksheetSession||t!==e.getCurrentExercise||t.isCompleted||e.doctorView?e._e():s("div",{staticClass:"btn-playlist"},[s("vs-button",{staticClass:"current-exe",on:{click:function(t){return e.openVideoPlayer(null)}}},[s("span",0===i?[e._v("Démarrer")]:[e._v("Reprendre")])])],1),e._v(" "),e.getCurrentWorksheetSession&&t.isCompleted&&!e.doctorView||!e.getCurrentWorksheetSession&&!e.doctorView?s("div",{staticClass:"btn-playlist"},[s("vs-button",{on:{click:function(s){return e.openVideoPlayer(t)}}},[s("span",[e._v("Revoir")])])],1):e._e(),e._v(" "),e.doctorView?s("div",{staticClass:"btn-playlist"},[s("vs-button",{on:{click:function(s){return e.viewVideo(t.video)}}},[s("span",[e._v("Voir")])])],1):e._e(),e._v(" "),s("div",{staticClass:"thumbnail",style:{backgroundImage:"url('"+t.video.thumbnailUrl+"')"}})]),e._v(" "),s("div",{staticClass:"content"},[s("h2",[s("span",[e._v(e._s(t.video.name))])]),e._v(" "),s("div",{staticClass:"details"},[s("div",{staticClass:"series-reps"},[s("div",{staticClass:"series"},[s("i",{staticClass:"kiv-series icon-18"}),s("span",[e._v(e._s(t.numberOfSeries))]),e._v("\n                                séries\n                            ")]),e._v(" "),t.numberOfRepetitions?s("div",{staticClass:"reps"},[s("i",{staticClass:"kiv-reps icon-19"}),s("span",[e._v(e._s(t.numberOfRepetitions))]),e._v("\n                                répétitions\n                            ")]):e._e()]),e._v(" "),t.option?s("div",{staticClass:"option"},[e._v("\n                            Options : "),s("span",[e._v(e._s(t.option))])]):e._e(),e._v(" "),t.hold?s("div",{staticClass:"hold"},[e._v("\n                            Tenir : "),s("span",[e._v(e._s(t.hold)+"s")])]):e._e(),e._v(" "),t.tempo?s("div",{staticClass:"tempo"},[e._v("\n                            Tempo : "),s("span",[e._v(e._s(t.tempo))]),e._v(" "),s("vs-tooltip",{staticClass:"kiv-help",scopedSlots:e._u([{key:"tooltip",fn:function(){return[e._v("\n                                    Le tempo, c'est tout simplement le\n                                    rythme de la répétition, indiquant que\n                                    le mouvement doit être lent, explosif ou\n                                    contrôlé.\n                                ")]},proxy:!0}],null,!0)},[s("div",{staticClass:"icon-help"},[s("i",{staticClass:"fas fa-question"})])])],1):e._e()]),e._v(" "),s("div",{staticClass:"commentary"},[s("div",{staticClass:"commentary-doc-read"},[s("p",{staticClass:"commentary-label"},[s("i",{staticClass:"far fa-comment-alt"}),e._v("\n                                Commentaire"),t.commentaries.length&&t.commentaries.filter((function(e){return""!=e.content})).length>1?s("span",[e._v("s")]):e._e()]),e._v(" "),t.commentaries.length&&t.commentaries.filter((function(e){return""!=e.content})).length?s("div",{staticClass:"commentary-history-list"},e._l(t.commentaries,(function(i,n){return s("div",{key:n,staticClass:"commentary-history"},[""!=i.content?s("div",[s("h5",[s("span",{staticClass:"commentary-user"},[s("vs-avatar",{staticClass:"commentary-user-avatar",attrs:{size:"14",circle:""}},[i.doctor?s("img",{attrs:{src:i.doctor.avatarUrl?i.doctor.avatarUrl:"/img/avatar-default.svg",alt:"Avatar de "+i.doctor.firstname+" "+i.doctor.lastname}}):e._e(),e._v(" "),i.patient?s("img",{attrs:{src:i.patient.avatarUrl?i.patient.avatarUrl:"/img/avatar-default.svg",alt:"Avatar de "+i.patient.firstname+" "+i.patient.lastname}}):e._e()]),e._v(" "),s("span",{staticClass:"commentary-user-name"},[i.doctor&&(i.doctor.firstname||i.doctor.lastname)?s("span",[e._v("\n                                                        "+e._s(i.doctor.firstname)+"\n                                                        "+e._s(i.doctor.lastname)+"\n                                                    ")]):e._e(),e._v(" "),i.patient&&(i.patient.firstname||i.patient.lastname)?s("span",[e._v("\n                                                        "+e._s(i.patient.firstname)+"\n                                                        "+e._s(i.patient.lastname)+"\n                                                    ")]):e._e()])],1),s("span",{staticClass:"sepa-comm-label-title"},[e._v("|")]),s("span",[e._v(e._s(e.formatDate(i.createdAt)))]),e._v(" "),i.worksheetSession?s("span",{staticClass:"commentary-worksheet-session"},[s("span",{staticClass:"sepa-comm-label-title"},[e._v("|")]),s("span",[e._v("Session "+e._s(i.worksheetSession.execOrder))])]):e._e()]),e._v(" "),s("div",{staticClass:"commentary-zone"},[s("div",{staticClass:"commentary-zone-read",class:{nobtns:!(e.doctorView&&i.doctor&&e.doctor.id==i.doctor.id||!e.doctorView&&i.patient&&e.patient.id==i.patient.id),"btns-edit":e.isCommentaryBeingEdited(i.id)}},[s("p",[e._v(e._s(i.content))])]),e._v(" "),(e.doctorView&&i.doctor&&e.doctor.id==i.doctor.id||!e.doctorView&&i.patient&&e.patient.id==i.patient.id)&&!e.isCommentaryBeingEdited(i.id)?s("div",{staticClass:"commentary-zone-btns"},[s("vs-button",{staticClass:"btn-edit-commentary",attrs:{floating:""},on:{click:function(s){return e.editCommentary(i,t)}}},[s("i",{staticClass:"fas fa-pen"})]),e._v(" "),s("vs-button",{attrs:{floating:""},on:{click:function(s){return e.removeCommentary(i,t)}}},[s("i",{staticClass:"fas fa-trash"})])],1):e._e(),e._v(" "),(e.doctorView&&i.doctor&&e.doctor.id==i.doctor.id||!e.doctorView&&i.patient&&e.patient.id==i.patient.id)&&e.isCommentaryBeingEdited(i.id)?s("div",{staticClass:"commentary-zone-btns-inprogress"},[s("vs-button",{staticClass:"btn-edit-commentary",attrs:{floating:""},on:{click:function(s){return e.closeEditCommentary(i,t)}}},[s("i",{staticClass:"vs-icon-close vs-icon-hover-x"})]),e._v(" "),e._m(3,!0)],1):e._e()])]):e._e()])})),0):e._e(),e._v(" "),s("div",[s("div",{staticClass:"commentary-create"},[t.commentary.content?e._e():s("label",[e._v("Tapez votre commentaire")]),e._v(" "),s("vs-input",{staticClass:"commentary",class:{active:t.commentary.content.length},model:{value:t.commentary.content,callback:function(s){e.$set(t.commentary,"content",s)},expression:"exercise.commentary.content"}}),e._v(" "),s("vs-button",{staticClass:"btn-send-commentary",class:{disactived:""==t.commentary.content},attrs:{floating:"",disabled:e.loadingSetCommentary==t.id,loading:e.loadingSetCommentary==t.id},on:{click:function(s){return e.setCommentary(t)}}},[s("i",{staticClass:"fas fa-paper-plane"})])],1)])])])])])})),0),e._v(" "),!e.patient.subscriptionRequired||e.$parent.stripeSubscription||e.doctorView?e._e():s("div",{staticClass:"request-subscription"},[e._m(4),e._v(" "),e._m(5),e._v(" "),s("div",{staticClass:"btn-request-subscription"},[s("vs-button",{on:{click:function(t){return e.stripeCheckout("patient")}}},[e._v("\n                    Je m’abonne\n                ")])],1)])]),e._v(" "),s("vs-dialog",{staticClass:"view-video",model:{value:e.modalViewVideo,callback:function(t){e.modalViewVideo=t},expression:"modalViewVideo"}},[s("youtube",{attrs:{"player-vars":e.playerVars,"video-id":e.selectedViewVideo.youtubeId}})],1),e._v(" "),s("transition",{attrs:{name:"fade"}},[e.videoPlayerToggle&&!e.doctorView?s("VideoPlayer",{attrs:{patient:e.patient,worksheet:e.getWorksheet,exercise:e.getCurrentExercise,exercises:e.getExercises,lastExercise:e.getTheLastExercise,currentWorksheetSession:e.getCurrentWorksheetSession,csrfTokenCompleteWorksheetSession:e.csrfTokenCompleteWorksheetSession,csrfTokenCompleteExercise:e.csrfTokenCompleteExercise,csrfTokenCreateSessionStat:e.csrfTokenCreateSessionStat},on:{resetExerciseForRePlaying:e.resetExerciseForRePlaying,closeVideoPlayer:e.closeVideoPlayer,stripeCheckout:e.stripeCheckout}}):e._e()],1),e._v(" "),s("vs-dialog",{model:{value:e.modalConfirmRemoveCommentary,callback:function(t){e.modalConfirmRemoveCommentary=t},expression:"modalConfirmRemoveCommentary"}},[s("p",{staticClass:"modal-confirm-text"},[e._v("Confirmer la suppression de")]),e._v(" "),s("div",{staticClass:"modal-confirm-detail remove-item"},[s("div",{staticClass:"modal-confirm-icon remove-item"},[s("i",{staticClass:"fas fa-trash"})]),e._v(" "),s("p",[s("span",[e._v("\n                    "+e._s(e.removeCommentaryDetails.commentary.content)+"\n                ")])])]),e._v(" "),s("div",{staticClass:"modal-confirm-buttons"},[s("vs-button",{staticClass:"secondary",on:{click:function(t){e.modalConfirmRemoveCommentary=!1}}},[e._v("\n                Annuler\n            ")]),e._v(" "),s("vs-button",{class:{disabled:e.loadingRemoveCommentary},attrs:{loading:e.loadingRemoveCommentary},on:{click:e.validRemoveCommentary}},[e._v("\n                Confirmer\n            ")])],1)])],1)};m._withStripped=!0;s(9826),s(3210),s(561);var h=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"video-player"},[i("button",{staticClass:"btn-close-player",class:{hidden:e.technicalEvalFrame||e.difficultyEvalFrame||e.sensitivityEvalFrame,dark:e.scoreFrame},on:{click:e.closeVideoPlayer}},[i("i",{staticClass:"kiv-x icon-21"})]),e._v(" "),e.scoreFrame?e._e():i("div",{staticClass:"content",class:{"switch-exercise-transition-leave":e.switchExerciseTransitionLeave,"switch-exercise-transition-enter":e.switchExerciseTransitionEnter}},[i("transition-group",{attrs:{name:"slidevideoplayer",tag:"div"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.videoFrame,expression:"videoFrame"}],key:"video",staticClass:"video-frame"},[e.getExercise.video.youtubeId?i("youtube",{ref:"youtube",attrs:{"player-vars":e.playerVars,"video-id":e.getExercise.video.youtubeId},on:{ended:e.videoEnded}}):i("div",{staticClass:"video-frame not-sub-frame",style:{backgroundImage:"url('"+e.getExercise.video.thumbnailUrl+"')"}})],1),e._v(" "),e.patient.subscriptionRequired&&!e.getExercise.video.youtubeId?i("div",{key:"not-sub-message",staticClass:"not-sub-message"},[i("div",{staticClass:"request-subscription dark"},[i("div",{staticClass:"icon-request-subscription"},[i("i",{staticClass:"kiv-subscription icon-20"})]),e._v(" "),i("div",{staticClass:"text-request-subscription"},[i("p",[e._v("\n                            Pour accéder à l'intégralité du contenu de votre prescription, vous devez être abonné.\n                        ")])]),e._v(" "),i("div",{staticClass:"btn-request-subscription"},[i("vs-button",{on:{click:function(t){return e.stripeCheckout("patient")}}},[e._v("\n                            Je m’abonne\n                        ")])],1)])]):e._e(),e._v(" "),i("EvalFrame",{directives:[{name:"show",rawName:"v-show",value:e.technicalEvalFrame,expression:"technicalEvalFrame"}],key:"technical",attrs:{type:"technical",loading:e.loadingBtnEvalNext},on:{validTechnicalValue:e.validTechnicalValue}}),e._v(" "),i("EvalFrame",{directives:[{name:"show",rawName:"v-show",value:e.difficultyEvalFrame,expression:"difficultyEvalFrame"}],key:"difficulty",attrs:{type:"difficulty",loading:e.loadingBtnEvalNext},on:{validDifficultyValue:e.validDifficultyValue}}),e._v(" "),i("EvalFrame",{directives:[{name:"show",rawName:"v-show",value:e.sensitivityEvalFrame,expression:"sensitivityEvalFrame"}],key:"sensitivity",attrs:{type:"sensitivity",loading:e.loadingBtnEvalNext},on:{validSensitivityValue:e.validSensitivityValue}})],1)],1),e._v(" "),i("transition",{attrs:{name:"fade"}},[e.scoreFrame?i("div",{staticClass:"score-frame"},[i("div",{staticClass:"score-top-elip"},[i("img",{attrs:{src:s(1489),alt:"ovale"}})]),e._v(" "),i("div",{staticClass:"score-stars-confettis"},[i("img",{attrs:{src:s(4256),alt:"Confettis"}})]),e._v(" "),i("div",{staticClass:"score-fanion"},[i("img",{attrs:{src:s(8875),alt:"fanion"}})]),e._v(" "),i("div",{staticClass:"score-text"},[i("div",{staticClass:"label"},[e._v("Félicitations !")]),e._v(" "),e.sessionScorePoints?i("div",{staticClass:"score"},[e._v("\n                    "+e._s(e.sessionScorePoints)+" points\n                ")]):e._e(),e._v(" "),i("div",{staticClass:"btn-next"},[i("vs-button",{on:{click:e.confirmScore}},[i("span",[e._v("Terminer")])])],1)])]):e._e()]),e._v(" "),i("transition",{attrs:{name:"fade"}},[e.videoFrame&&e.getDoctorCommentary&&e.doctorCommentaryActive?i("div",{staticClass:"doctor-commentary"},[i("button",{staticClass:"vs-dialog__close btn-close-modal",on:{click:function(t){e.doctorCommentaryActive=!1}}},[i("i",{staticClass:"vs-icon-close vs-icon-hover-x"})]),e._v(" "),i("vs-avatar",{staticClass:"commentary-user-avatar",attrs:{size:"25",circle:""}},[e.getDoctorCommentary&&e.getDoctorCommentary.doctor?i("img",{attrs:{src:e.getDoctorCommentary.doctor.avatarUrl?e.getDoctorCommentary.doctor.avatarUrl:"/img/avatar-default.svg",alt:"Avatar de "+e.getDoctorCommentary.doctor.firstname+" "+e.getDoctorCommentary.doctor.lastname}}):e._e()]),e._v(" "),i("div",[e._v("\n                "+e._s(e.getDoctorCommentary?e.getDoctorCommentary.content:"")+"\n            ")])],1):e._e()]),e._v(" "),i("transition",{attrs:{name:"fade"}},[e.videoFrame?i("div",{staticClass:"bottom-bar"},[i("div",{staticClass:"bottom-bar-content",class:{"switch-exercise-transition-leave":e.switchExerciseTransitionLeave,"switch-exercise-transition-enter":e.switchExerciseTransitionEnter}},[i("div",{staticClass:"exercise-details"},[i("div",{staticClass:"exercise-count"},[e._v("\n                        Exercice "+e._s(e.getExercise.position+1)+"/"+e._s(e.getExercises?e.getExercises.length:0)+"\n                    ")]),e._v(" "),i("span",{staticClass:"tiret"},[e._v("-")]),e._v(" "),i("div",{staticClass:"exercise-name"},[e._v("\n                        "+e._s(e.getExercise.video.name)+"\n                    ")])]),e._v(" "),i("div",{staticClass:"exercise-series-reps-options"},[i("div",{staticClass:"series-reps"},[i("div",{staticClass:"series"},[i("i",{staticClass:"kiv-series icon-18"}),i("span",[e._v(e._s(e.getExercise.numberOfSeries))]),e._v("\n                            séries\n                        ")]),e._v(" "),i("div",{staticClass:"reps"},[i("i",{staticClass:"kiv-reps icon-19"}),i("span",[e._v(e._s(e.getExercise.numberOfRepetitions))]),e._v("\n                            répétitions\n                        ")])]),e._v(" "),i("div",{staticClass:"second-details"},[e.getExercise.option?i("div",{staticClass:"option"},[e._v("\n                            Options : "),i("span",[e._v(e._s(e.getExercise.option))])]):e._e(),e._v(" "),e.getExercise.hold?i("div",{staticClass:"hold"},[e._v("\n                            Tenir : "),i("span",[e._v(e._s(e.getExercise.hold)+"s")])]):e._e(),e._v(" "),e.getExercise.tempo?i("div",{staticClass:"tempo"},[e._v("\n                            Tempo : "),i("span",[e._v(e._s(e.getExercise.tempo))]),e._v(" "),i("vs-tooltip",{staticClass:"kiv-help",scopedSlots:e._u([{key:"tooltip",fn:function(){return[e._v("\n                                    Le tempo, c'est tout simplement le\n                                    rythme de la répétition, indiquant que\n                                    le mouvement doit être lent, explosif ou\n                                    contrôlé.\n                                ")]},proxy:!0}],null,!1,2695518001)},[i("div",{staticClass:"icon-help"},[i("i",{staticClass:"fas fa-question"})])])],1):e._e()])]),e._v(" "),i("div",{staticClass:"btn-next"},[!e.getCurrentWorksheetSession||e.getCurrentWorksheetSession.isCompleted||e.getExercise.isCompleted?e._e():i("vs-button",{class:{disabled:e.loadingBtnNextExercise},attrs:{loading:e.loadingBtnNextExercise,disabled:e.switchExeAnimationIsInProgress},on:{click:e.setExerciseCompletedAndGoNext}},[e._v("\n                        Suivant\n                    ")]),e._v(" "),e.getCurrentWorksheetSession&&!e.getCurrentWorksheetSession.isCompleted&&e.getExercise.isCompleted?i("vs-button",{attrs:{disabled:e.switchExeAnimationIsInProgress},on:{click:e.resetExerciseForRePlaying}},[e._v("\n                        Reprendre\n                    ")]):e._e(),e._v(" "),e.getCurrentWorksheetSession&&e.getCurrentWorksheetSession.isCompleted||!e.getCurrentWorksheetSession?i("vs-button",{on:{click:e.closeVideoPlayer}},[e._v("\n                        Fermer\n                    ")]):e._e()],1)])]):e._e()])],1)};h._withStripped=!0;var p=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"eval-frame"},["technical"===e.type?s("h1",[e._v("\n        Comment était votre technique de réalisation ?\n    ")]):e._e(),e._v(" "),"difficulty"===e.type?s("h1",[e._v("\n        Comment avez-vous trouvé la session ?\n    ")]):e._e(),e._v(" "),"sensitivity"===e.type?s("h1",[e._v("Comment vous sentez-vous ?")]):e._e(),e._v(" "),"technical"===e.type?s("div",{staticClass:"eval-question-count"},[e._v("\n        Question 1 sur 3\n    ")]):e._e(),e._v(" "),"difficulty"===e.type?s("div",{staticClass:"eval-question-count"},[e._v("\n        Question 2 sur 3\n    ")]):e._e(),e._v(" "),"sensitivity"===e.type?s("div",{staticClass:"eval-question-count"},[e._v("\n        Question 3 sur 3\n    ")]):e._e(),e._v(" "),"technical"===e.type?s("div",{staticClass:"technical-eval-rating eval-rating"},[s("vue-slider",{attrs:{tooltip:"none"},model:{value:e.technicalValue,callback:function(t){e.technicalValue=t},expression:"technicalValue"}}),e._v(" "),s("div",{staticClass:"legend"},[s("div",{on:{click:function(t){e.technicalValue=0}}},[e._v("Médiocre")]),e._v(" "),s("div",{on:{click:function(t){e.technicalValue=100}}},[e._v("Excellent")])])],1):e._e(),e._v(" "),"difficulty"===e.type?s("div",{staticClass:"difficulty-eval-rating eval-rating"},[s("vue-slider",{attrs:{tooltip:"none"},model:{value:e.difficultyValue,callback:function(t){e.difficultyValue=t},expression:"difficultyValue"}}),e._v(" "),s("div",{staticClass:"legend"},[s("div",{on:{click:function(t){e.difficultyValue=0}}},[e._v("Facile")]),e._v(" "),s("div",{on:{click:function(t){e.difficultyValue=100}}},[e._v("Difficile")])])],1):e._e(),e._v(" "),"sensitivity"===e.type?s("div",{staticClass:"sensitivity-eval-rating eval-rating"},[s("div",{staticClass:"smileys"},[s("div",{class:{selected:0===e.sensitivityValue},on:{click:function(t){e.sensitivityValue=0}}},[e._m(0),e._v(" "),s("i",{staticClass:"kiv-selected icon-22"})]),e._v(" "),s("div",{class:{selected:12.5===e.sensitivityValue},on:{click:function(t){e.sensitivityValue=12.5}}},[e._m(1),e._v(" "),s("i",{staticClass:"kiv-selected icon-22"})]),e._v(" "),s("div",{class:{selected:25===e.sensitivityValue},attrs:{div:""},on:{click:function(t){e.sensitivityValue=25}}},[e._m(2),e._v(" "),s("i",{staticClass:"kiv-selected icon-22"})]),e._v(" "),s("div",{class:{selected:37.5===e.sensitivityValue},on:{click:function(t){e.sensitivityValue=37.5}}},[e._m(3),e._v(" "),s("i",{staticClass:"kiv-selected icon-22"})]),e._v(" "),s("div",{class:{selected:50===e.sensitivityValue},on:{click:function(t){e.sensitivityValue=50}}},[e._m(4),e._v(" "),s("i",{staticClass:"kiv-selected icon-22"})]),e._v(" "),s("div",{class:{selected:62.5===e.sensitivityValue},on:{click:function(t){e.sensitivityValue=62.5}}},[e._m(5),e._v(" "),s("i",{staticClass:"kiv-selected icon-22"})]),e._v(" "),s("div",{class:{selected:75===e.sensitivityValue},on:{click:function(t){e.sensitivityValue=75}}},[e._m(6),e._v(" "),s("i",{staticClass:"kiv-selected icon-22"})]),e._v(" "),s("div",{class:{selected:87.5===e.sensitivityValue},on:{click:function(t){e.sensitivityValue=87.5}}},[e._m(7),e._v(" "),s("i",{staticClass:"kiv-selected icon-22"})]),e._v(" "),s("div",{class:{selected:100===e.sensitivityValue},on:{click:function(t){e.sensitivityValue=100}}},[e._m(8),e._v(" "),s("i",{staticClass:"kiv-selected icon-22"})])])]):e._e(),e._v(" "),"technical"===e.type?s("div",{staticClass:"btn-eval-valid-and-next",class:{disabled:e.loading},on:{click:e.validTechnical}},[s("vs-button",{attrs:{loading:e.loading,disabled:e.loading}},[e._v("\n            Suivant\n        ")])],1):e._e(),e._v(" "),"difficulty"===e.type?s("div",{staticClass:"btn-eval-valid-and-next",class:{disabled:e.loading},on:{click:e.validDifficulty}},[s("vs-button",{attrs:{loading:e.loading,disabled:e.loading}},[e._v("\n            Suivant\n        ")])],1):e._e(),e._v(" "),"sensitivity"===e.type?s("div",{staticClass:"btn-eval-valid-and-next",class:{disabled:e.loading},on:{click:e.validSensitivity}},[s("vs-button",{attrs:{loading:e.loading,disabled:e.loading}},[e._v("\n            Suivant\n        ")])],1):e._e()])},f=[function(){var e=this.$createElement,t=this._self._c||e;return t("i",[t("img",{attrs:{src:s(1407),alt:"Smiley qui va très mal"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("i",[t("img",{attrs:{src:s(70),alt:"Smiley qui va mal"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("i",[t("img",{attrs:{src:s(889),alt:"Smiley qui va pas bien"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("i",[t("img",{attrs:{src:s(5988),alt:"Smiley qui va bof"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("i",[t("img",{attrs:{src:s(1867),alt:"Smiley perplexe"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("i",[t("img",{attrs:{src:s(4857),alt:"Smiley qui va bien"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("i",[t("img",{attrs:{src:s(1703),alt:"Smiley qui va très bien"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("i",[t("img",{attrs:{src:s(6240),alt:"Smiley très content"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("i",[t("img",{attrs:{src:s(2213),alt:"Smiley aux anges"}})])}];p._withStripped=!0;var g=s(9454),C={props:{type:String,loading:Boolean},components:{VueSlider:s.n(g)()},data:function(){return{technicalValue:50,difficultyValue:50,sensitivityValue:50}},methods:{validTechnical:function(){var e=this;this.$emit("validTechnicalValue",this.technicalValue),setTimeout((function(){e.technicalValue=50}),6e3)},validDifficulty:function(){var e=this;this.$emit("validDifficultyValue",this.difficultyValue),setTimeout((function(){e.difficultyValue=50}),6e3)},validSensitivity:function(){var e=this;this.$emit("validSensitivityValue",this.sensitivityValue),setTimeout((function(){e.sensitivityValue=50}),6e3)}}},y=(0,d.Z)(C,p,f,!1,null,"09acf8c3",null);y.options.__file="assets/vue/patient/ReadWorkSheetPage/ExercisesPlaylist/VideoPlayer/EvalFrame.vue";var _=y.exports;function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var b={props:{patient:Object,exercise:Object,exercises:Array,worksheet:Object,lastExercise:Object,currentWorksheetSession:[Object,Boolean],csrfTokenCompleteWorksheetSession:String,csrfTokenCompleteExercise:String,csrfTokenCreateSessionStat:String},components:{EvalFrame:_},data:function(){return{playerVars:{rel:0,showinfo:0,ecver:2,modestbranding:1},videoFrame:!0,switchExerciseTransitionLeave:!1,switchExerciseTransitionEnter:!1,switchExeAnimationIsInProgress:!1,technicalEvalFrame:!1,difficultyEvalFrame:!1,sensitivityEvalFrame:!1,scoreFrame:!1,ponderation:[],loadingBtnEvalNext:!1,loadingBtnNextExercise:!1,sessionScorePoints:null,doctorCommentaryActive:!0}},computed:{getExercise:function(){return this.exercise},getExercises:function(){return this.exercises},getWorksheet:function(){return this.worksheet},getTheLastExercise:function(){return this.lastExercise},getCurrentWorksheetSession:function(){return this.currentWorksheetSession},getPonderation:function(){return this.ponderation.reduce((function(e,t){return e+t}),0)/this.ponderation.length},getDoctorCommentary:function(){return this.getExercise.commentaries.find((function(e){return e.doctor&&e.content}))}},methods:{videoEnded:function(){this.$refs.youtube.player.playVideo(),this.$refs.youtube.player.stopVideo()},resetExerciseForRePlaying:function(){this.switchExerciseWithAnimation(!0)},setExerciseCompletedAndGoNext:function(){var e=this;this.getExercise===this.getTheLastExercise?this.isTheLastExercise():(this.loadingBtnNextExercise=!0,this.axios.post("/patient/".concat(this.patient.id,"/complete/exercise"),{_token:this.csrfTokenCompleteExercise,exerciseId:this.getExercise.id}).then((function(t){console.log(t.data),e.switchExerciseWithAnimation(!1),e.loadingBtnNextExercise=!1})).catch((function(e){var t="object"===k(e.response.data)?e.response.data.detail:e.response.data;console.error(t)})))},closeVideoPlayer:function(){this.$emit("closeVideoPlayer",!0)},stripeCheckout:function(e){this.$emit("stripeCheckout",e)},switchExerciseWithAnimation:function(e){var t=this;this.switchExeAnimationIsInProgress||(this.switchExeAnimationIsInProgress=!0,this.switchExerciseTransitionLeave=!0,setTimeout((function(){e?t.$emit("resetExerciseForRePlaying",!0):t.getExercise.isCompleted=!0}),150),setTimeout((function(){t.switchExerciseTransitionEnter=!0}),250),setTimeout((function(){t.switchExerciseTransitionLeave=!1,t.switchExerciseTransitionEnter=!1,t.switchExeAnimationIsInProgress=!1}),500))},isTheLastExercise:function(){this.$refs.youtube.player.stopVideo(),this.videoFrame=!1,this.technicalEvalFrame=!0},setSessionCompleted:function(){var e=this;this.axios.post("/patient/".concat(this.patient.id,"/complete/worksheet-session"),{_token:this.csrfTokenCompleteWorksheetSession,worksheetSessionId:this.getCurrentWorksheetSession.id,worksheetId:this.getWorksheet.id,exerciseId:this.getExercise.id,ponderationForScore:this.getPonderation}).then((function(t){e.getExercise.isCompleted=!0,e.sessionScorePoints=t.data.score.points,e.getCurrentWorksheetSession.isInProgress=!1,e.getCurrentWorksheetSession.isCompleted=!0,e.getCurrentWorksheetSession.doneAt=new Date,e.loadingBtnEvalNext=!1,e.scoreFrame=!0})).catch((function(e){var t="object"===k(e.response.data)?e.response.data.detail:e.response.data;console.error(t)}))},validTechnicalValue:function(e){this.createExerciseStat("technical",e/10)},validDifficultyValue:function(e){this.createExerciseStat("difficulty",e/10)},validSensitivityValue:function(e){this.createExerciseStat("sensitivity",e/10)},createExerciseStat:function(e,t){var s=this;this.loadingBtnEvalNext=!0,this.axios.post("/patient/".concat(this.patient.id,"/create/session-stat/").concat(e),{_token:this.csrfTokenCreateSessionStat,worksheetId:this.getWorksheet.id,worksheetSessionId:this.getCurrentWorksheetSession.id,sessionStatValue:t}).then((function(t){console.log(t.data),s.ponderation.push(t.data.ponderation),"technical"===e&&(s.technicalEvalFrame=!1,s.difficultyEvalFrame=!0,s.loadingBtnEvalNext=!1),"difficulty"===e&&(s.difficultyEvalFrame=!1,s.sensitivityEvalFrame=!0,s.loadingBtnEvalNext=!1),"sensitivity"===e&&(s.sensitivityEvalFrame=!1,s.setSessionCompleted())})).catch((function(e){var t="object"===k(e.response.data)?e.response.data.detail:e.response.data;console.error(t)}))},confirmScore:function(){this.scoreFrame=!1,this.closeVideoPlayer()}}},S=(0,d.Z)(b,h,[],!1,null,"4948fa41",null);function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function w(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?E(Object(s),!0).forEach((function(t){W(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):E(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function W(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}S.options.__file="assets/vue/patient/ReadWorkSheetPage/ExercisesPlaylist/VideoPlayer.vue";var V={components:{VideoPlayer:S.exports},props:{patient:Object,doctor:Object,loading:Boolean,worksheet:Object,exercises:Array,doctorView:Boolean,currentWorksheetSession:[Object,Boolean],csrfTokenStartWorksheetSession:String,csrfTokenCompleteWorksheetSession:String,csrfTokenCompleteExercise:String,csrfTokenCreateSessionStat:String,csrfTokenCreateCommentary:String},data:function(){return{videoPlayerToggle:!1,emptyExercise:{numberOfRepetitions:null,numberOfSeries:null,position:null,video:{name:null,youtubeId:null}},loadingBtnStartSession:!1,timeoutSetCommentary:null,commentariesBeingEdited:null,loadingSetCommentary:null,loadingRemoveCommentary:!1,exerciseForRePlaying:null,modalViewVideo:!1,selectedViewVideo:!1,playerVars:{rel:0,showinfo:0,ecver:2,modestbranding:1},modalConfirmRemoveCommentary:!1,removeCommentaryDetails:{commentary:{},exercise:{}}}},computed:{getWorksheet:function(){return this.worksheet},getExercises:function(){return this.exercises},getCurrentExercise:function(){var e=this.emptyExercise;return this.getExercises&&this.getExercises.find((function(e){return!1===e.isCompleted}))&&(e=this.getExercises.find((function(e){return!1===e.isCompleted}))),this.exerciseForRePlaying&&(e=this.exerciseForRePlaying),e},getCurrentWorksheetSession:function(){return this.currentWorksheetSession},getTheLastExercise:function(){return this.getExercises[this.getExercises.length-1]}},methods:{viewVideo:function(e){return this.selectedViewVideo=e,this.modalViewVideo=!this.modalViewVideo},openVideoPlayer:function(e){this.exerciseForRePlaying=e,this.videoPlayerToggle=!0,document.body.classList.add("no-scrollbar")},closeVideoPlayer:function(){this.exerciseForRePlaying=null,this.videoPlayerToggle=!1,document.body.classList.remove("no-scrollbar")},resetExerciseForRePlaying:function(){this.exerciseForRePlaying=null},setCommentary:function(e){var t=this;e.commentary.content&&(this.loadingSetCommentary=e.id,this.axios.post("/".concat(this.doctorView?"doctor/".concat(this.doctor.id):"patient/".concat(this.patient.id),"/create/commentary"),{_token:this.csrfTokenCreateCommentary,exerciseId:e.id,worksheetId:this.getWorksheet.id,worksheetSessionId:this.getCurrentWorksheetSession?this.getCurrentWorksheetSession.id:null,commentaryId:e.commentary.id,commentaryContent:e.commentary.content.trim()}).then((function(s){t.commentariesBeingEdited=null,e.commentary.id||(e.commentary.id=s.data.commentaryId);var i=e.commentaries.find((function(t){return t.id==e.commentary.id}));i?i.content=e.commentary.content:e.commentaries.push(e.commentary),t.$nextTick((function(){var s;t.scrollToListElements(),e.commentary=w(w({},t.$parent.commentaryModel),{},{doctor:t.doctorView?t.doctor:null,patient:t.doctorView?null:t.patient,worksheetSession:null!==(s=t.$parent.getCurrentWorksheetSession)&&void 0!==s?s:null})})),t.loadingSetCommentary=null})).catch((function(e){var s="object"===x(e.response.data)?e.response.data.detail:e.response.data;t.loadingSetCommentary=null,console.error(s)})))},validRemoveCommentary:function(){var e=this,t=this.removeCommentaryDetails.commentary,s=this.removeCommentaryDetails.exercise;t.id&&(this.loadingRemoveCommentary=!0,this.axios.post("/".concat(this.doctorView?"doctor/".concat(this.doctor.id):"patient/".concat(this.patient.id),"/remove/commentary"),{commentaryId:t.id}).then((function(i){s.commentaries.splice(s.commentaries.indexOf(s.commentaries.find((function(e){return e.id==t.id}))),1),e.$nextTick((function(){e.scrollToListElements()})),e.loadingRemoveCommentary=!1,e.modalConfirmRemoveCommentary=!1})).catch((function(t){var s="object"===x(t.response.data)?t.response.data.detail:t.response.data;e.loadingRemoveCommentary=!1,e.modalConfirmRemoveCommentary=!1,console.error(s)})))},removeCommentary:function(e,t){return this.removeCommentaryDetails={commentary:e,exercise:t},this.modalConfirmRemoveCommentary=!this.modalConfirmRemoveCommentary},editCommentary:function(e,t){this.commentariesBeingEdited=e.id,t.commentary.id=e.id,t.commentary.content=e.content},closeEditCommentary:function(e,t){var s;this.commentariesBeingEdited=null,t.commentary=w(w({},this.$parent.commentaryModel),{},{doctor:this.doctorView?this.doctor:null,patient:this.doctorView?null:this.patient,worksheetSession:null!==(s=this.$parent.getCurrentWorksheetSession)&&void 0!==s?s:null})},isCommentaryBeingEdited:function(e){return this.commentariesBeingEdited==e},stripeCheckout:function(e){this.$emit("stripeCheckout",e)},formatDate:function(e){return c()(e).format("DD/MM/YYYY")},scrollToListElements:function(){document.querySelectorAll(".commentary-history-list").forEach((function(e){e.scrollTop=e.scrollHeight}))}},watch:{getExercises:{handler:function(){var e=this;this.$nextTick((function(){e.scrollToListElements()}))},immediate:!0}}},T=(0,d.Z)(V,m,[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"exercise loading-block"},[s("div",{staticClass:"loading-gray thumbnail-wrapper"}),e._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"loading-gray h2 w-45"}),e._v(" "),s("div",{staticClass:"details"},[s("div",{staticClass:"series-reps"},[s("div",{staticClass:"loading-gray series w-25"}),e._v(" "),s("div",{staticClass:"loading-gray reps w-15"})]),e._v(" "),s("div",{staticClass:"loading-gray option w-25"}),e._v(" "),s("div",{staticClass:"loading-gray tempo w-15"}),e._v(" "),s("div",{staticClass:"loading-gray hold w-25"})]),e._v(" "),s("div",{staticClass:"commentary"},[s("div",{staticClass:"loading-gray title w-25"}),e._v(" "),s("div",{staticClass:"loading-gray input"})])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"exercise loading-block"},[s("div",{staticClass:"loading-gray thumbnail-wrapper"}),e._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"loading-gray h2 w-35"}),e._v(" "),s("div",{staticClass:"details"},[s("div",{staticClass:"series-reps"},[s("div",{staticClass:"loading-gray series w-15"}),e._v(" "),s("div",{staticClass:"loading-gray reps w-25"})]),e._v(" "),s("div",{staticClass:"loading-gray option w-25"}),e._v(" "),s("div",{staticClass:"loading-gray tempo w-15"}),e._v(" "),s("div",{staticClass:"loading-gray hold w-25"})]),e._v(" "),s("div",{staticClass:"commentary"},[s("div",{staticClass:"loading-gray title w-25"}),e._v(" "),s("div",{staticClass:"loading-gray input"})])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"exercise loading-block"},[s("div",{staticClass:"loading-gray thumbnail-wrapper"}),e._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"loading-gray h2 w-45"}),e._v(" "),s("div",{staticClass:"details"},[s("div",{staticClass:"series-reps"},[s("div",{staticClass:"loading-gray series w-15"}),e._v(" "),s("div",{staticClass:"loading-gray reps w-15"})]),e._v(" "),s("div",{staticClass:"loading-gray option w-25"}),e._v(" "),s("div",{staticClass:"loading-gray tempo w-15"}),e._v(" "),s("div",{staticClass:"loading-gray hold w-25"})]),e._v(" "),s("div",{staticClass:"commentary"},[s("div",{staticClass:"loading-gray title w-25"}),e._v(" "),s("div",{staticClass:"loading-gray input"})])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"icon-edit-active"},[t("i",{staticClass:"fas fa-pen"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"icon-request-subscription"},[t("i",{staticClass:"kiv-subscription icon-20"})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"text-request-subscription"},[s("p",[e._v("\n                    Pour avoir accès à l’ensemble des vidéos de la prescription, vous devez être abonné.\n                ")])])}],!1,null,"1c390998",null);function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function F(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?O(Object(s),!0).forEach((function(t){D(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):O(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function D(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}T.options.__file="assets/vue/patient/ReadWorkSheetPage/ExercisesPlaylist.vue";var I={components:{ExercisesPlaylist:T.exports,TimingFrieze:v,TagPartOfBody:s(7771).Z},data:function(){return{patient:null,doctor:null,worksheetId:null,worksheet:{},exercises:[],currentWorksheetSession:{},totalWorksheetSessions:null,doctorView:null,csrfTokenStartWorksheetSession:null,csrfTokenCompleteWorksheetSession:null,csrfTokenCompleteExercise:null,csrfTokenCreateSessionStat:null,csrfTokenCreateCommentary:null,modalTimingFriezeMobile:!1,loading:!1,stripeSubPlans:null,status:null,stripeSubscription:null,commentaryModel:{content:"",id:null,doctor:null,patient:null,worksheetSession:null}}},computed:{getWorksheet:function(){return this.worksheet},getExercises:function(){return this.exercises},getCurrentWorksheetSession:function(){return this.currentWorksheetSession},getTotalWorksheetSessions:function(){return this.totalWorksheetSessions},allExercisesIsCompleted:function(){if(this.getExercises)return!this.getExercises.filter((function(e){return!e.isCompleted})).length}},methods:{rederictToDashboard:function(){if(this.doctorView&&this.doctor){var e=window.location.search,t=new URLSearchParams(e).get("ref");document.location.href="dashp"===t?"/doctor/".concat(this.doctor.id,"/voir/patient/").concat(this.patient.id):"/doctor/".concat(this.doctor.id,"/dashboard")}else document.location.href="/patient/".concat(this.patient.id,"/dashboard")},stripeCheckout:function(e){this.axios.post("/subscription/checkout",{stripeSubPlanId:this.stripeSubPlans[e].planId,stripeCustomerId:this.stripeSubscription?this.stripeSubscription.customer:null,successUrl:"patient/".concat(this.patient.id,"/fiche/").concat(this.getWorksheet.id,"/success"),cancelUrl:"patient/".concat(this.patient.id,"/fiche/").concat(this.getWorksheet.id,"/cancel"),userId:"".concat(this.patient.id),userType:"patient"}).then((function(e){window.location.href=e.data})).catch((function(e){console.log(e),o.Z.openErrorNotification("Erreur","Erreur lors du processus d'abonnement")}))}},created:function(){var e=this;i.default.prototype.$vs=this.$vs;var t=JSON.parse(document.getElementById("vueData").innerHTML);this.patient=t.patient,this.doctor=t.doctor,this.worksheetId=t.worksheetId,this.doctorView=t.doctorView,this.csrfTokenStartWorksheetSession=t.csrfTokenStartWorksheetSession,this.csrfTokenCompleteWorksheetSession=t.csrfTokenCompleteWorksheetSession,this.csrfTokenCompleteExercise=t.csrfTokenCompleteExercise,this.csrfTokenCreateSessionStat=t.csrfTokenCreateSessionStat,this.csrfTokenCreateCommentary=t.csrfTokenCreateCommentary,this.stripeSubPlans=t.stripeSubPlans,this.stripeSubscription=t.stripeSubscription,this.status=t.status,"cancel"===this.status&&o.Z.openPrimaryNotification("Paiement annulé","Le paiement a été annulé"),"success"===this.status&&o.Z.openSuccessNotification("Paiement accepté","Vous pouvez profiter de votre abonnement"),this.loading=!0;var s=this.doctorView?"/doctorview":"";this.axios.get("/patient/".concat(this.patient.id,"/get/worksheet/").concat(this.worksheetId)).then((function(t){e.worksheet=t.data,e.axios.get("/patient/".concat(e.patient.id,"/get/current-worksheet-session/").concat(e.worksheetId).concat(s)).then((function(t){e.currentWorksheetSession=t.data.currentWorksheetSession,e.axios.get("/patient/".concat(e.patient.id,"/get/exercises/").concat(e.worksheetId)).then((function(t){e.exercises=t.data,e.loading=!1,e.exercises=o.Z.sortByPosition(e.exercises.map((function(t){var s;return F(F({},t),{},{commentaries:o.Z.sortByCreatedAtAsc(t.commentaries),commentary:F(F({},e.commentaryModel),{},{doctor:e.doctorView?e.doctor:null,patient:e.doctorView?null:e.patient,worksheetSession:null!==(s=e.getCurrentWorksheetSession)&&void 0!==s?s:null})})}))),e.axios.get("/patient/".concat(e.patient.id,"/get/total-worksheet-sessions/").concat(e.worksheetId)).then((function(t){e.totalWorksheetSessions=t.data,!e.currentWorksheetSession||e.currentWorksheetSession.isInProgress||e.currentWorksheetSession.isCompleted||e.doctorView?e.loading=!1:e.axios.post("/patient/".concat(e.patient.id,"/start/worksheet-session"),{_token:e.csrfTokenStartWorksheetSession,worksheetId:e.getWorksheet.id,worksheetSessionId:e.getCurrentWorksheetSession.id}).then((function(t){e.getCurrentWorksheetSession.isInProgress=!0,e.exercises.forEach((function(e){e.isCompleted=!1})),e.loading=!1})).catch((function(e){var t="object"===P(e.response.data)?e.response.data.detail:e.response.data;console.error(t)}))})).catch((function(e){var t="object"===P(e.response.data)?e.response.data.detail:e.response.data;console.error(t)}))})).catch((function(e){var t="object"===P(e.response.data)?e.response.data.detail:e.response.data;console.error(t)}))})).catch((function(e){var t="object"===P(e.response.data)?e.response.data.detail:e.response.data;console.error(t)}))})).catch((function(e){var t="object"===P(e.response.data)?e.response.data.detail:e.response.data;console.error(t)}))}},j=(0,d.Z)(I,n,[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title"},[t("div",{staticClass:"loading-gray h1"})])}],!1,null,"795db4d4",null);j.options.__file="assets/vue/patient/ReadWorkSheetPage.vue";var R=j.exports,$=s(9669),B=s.n($),A=s(2346),q=s(1370),M=s.n(q),z=s(1652),N=s.n(z);B().interceptors.request.use((function(e){return e.headers["X-Requested-With"]="XMLHttpRequest",e})),i.default.use(A.Z,B()),i.default.use(M()),i.default.use(N()),new i.default({render:function(e){return e(R)}}).$mount("#vue")},5205:function(e,t,s){e.exports=s.p+"images/basket.4113e5a7.svg"},4459:function(e,t,s){e.exports=s.p+"images/confettis.d696b8e2.svg"},1407:function(e,t,s){e.exports=s.p+"images/46.0399c65a.svg"},70:function(e,t,s){e.exports=s.p+"images/47.b41f86d5.svg"},889:function(e,t,s){e.exports=s.p+"images/48.fdbe8352.svg"},5988:function(e,t,s){e.exports=s.p+"images/49.d0512f3a.svg"},1867:function(e,t,s){e.exports=s.p+"images/50.dc6f934c.svg"},4857:function(e,t,s){e.exports=s.p+"images/51.8b05a017.svg"},1703:function(e,t,s){e.exports=s.p+"images/52.c28f7a8b.svg"},6240:function(e,t,s){e.exports=s.p+"images/53.324059de.svg"},2213:function(e,t,s){e.exports=s.p+"images/54.096a1702.svg"},1489:function(e,t,s){e.exports=s.p+"images/score-elip.4b8debdb.svg"},8875:function(e,t,s){e.exports=s.p+"images/score-fanion.cf92067d.svg"},4256:function(e,t,s){e.exports=s.p+"images/score-stars-confettis.06d70d9e.svg"}},function(e){e.O(0,[327,285,26,949,480],(function(){return t=1873,e(e.s=t);var t}));e.O()}]);