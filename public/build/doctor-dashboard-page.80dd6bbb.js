(self.webpackChunk=self.webpackChunk||[]).push([[857],{9404:function(t,e,s){"use strict";var a=s(538),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("section",{staticClass:"db-doctor",attrs:{id:"dashboard"}},[a("h1",[a("transition",{attrs:{name:"fade"}},[t.prescriProcess?t._e():a("span",[t._v("Bienvenue sur votre dashboard !\n                    "),a("i",[a("img",{attrs:{src:s(9402),alt:"Icone d'une main qui fait 'coucou'"}})])]),t._v(" "),t.prescriProcess?a("span",{staticClass:"prescri-process"},[a("span",[t._v("Création d'une prescription")]),t._v(" "),a("vs-button",{staticClass:"secondary",on:{click:t.stopPrescriProcess}},[t._v("\n                        Annuler\n                    ")])],1):t._e()])],1),t._v(" "),a("main",{class:{"with-notifs":!(t.doctor.city&&t.doctor.gender&&t.doctor.firstname&&t.doctor.lastname&&t.doctor.isVerified)}},[a("MyDashboardNotifications",{staticClass:"mobile-view",attrs:{doctor:t.doctor}}),t._v(" "),a("transition",{attrs:{name:"fade"}},[1===t.activeTab?a("MyPrescriptions",{attrs:{doctor:t.doctor,doctorPrescriptions:t.getDoctorPrescriptions,csrfTokenRemoveWorksheet:t.csrfTokenRemoveWorksheet,loadingDoctorWorksheets:t.loadingDoctorWorksheets},on:{prescriProcess:t.startPrescriProcess}}):t._e(),t._v(" "),2===t.activeTab?a("MyWorksheetTemplates",{attrs:{doctor:t.doctor,worksheetTemplates:t.getWorksheetTemplates,tagsFromExercises:t.tagsFromExercises,csrfTokenRemoveWorksheet:t.csrfTokenRemoveWorksheet,loadingAllWorksheets:t.loadingAllWorksheets,prescriProcess:t.prescriProcessWorksheet,btnLoadingWorksheetPrescriProcessRedirect:t.btnLoadingWorksheetPrescriProcessRedirect},on:{prescriProcessWorksheetChoice:t.setPrescriProcessWorksheetChoice}}):t._e()],1),t._v(" "),a("aside",[a("MyDashboardNotifications",{staticClass:"desktop-view",attrs:{doctor:t.doctor}}),t._v(" "),a("MyPatients",{attrs:{doctor:t.doctor,csrfTokenAddPatient:t.csrfTokenAddPatient,csrfTokenRemovePatient:t.csrfTokenRemovePatient,csrfTokenCreatePatient:t.csrfTokenCreatePatient,prescriProcess:t.prescriProcessPatient,btnLoadingPatientPrescriProcessRedirect:t.btnLoadingPatientPrescriProcessRedirect},on:{prescriProcessPatientChoice:t.setPrescriProcessPatientChoice}})],1)],1)])])};i._withStripped=!0;s(7327),s(2222),s(2707),s(4916),s(4765),s(6992),s(1539),s(8783),s(3948),s(285),s(1249),s(7941),s(2526),s(5003),s(4747),s(9337),s(1817),s(2165);var n=s(4098),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.doctor.city&&t.doctor.gender&&t.doctor.firstname&&t.doctor.lastname&&t.doctor.isVerified?t._e():s("section",{staticClass:"kiv-block",class:{reduced:!t.$parent.myDBNotificationsContent},attrs:{id:"dashboard-notifications"}},[s("button",{staticClass:"toggle-content",on:{click:function(e){t.$parent.myDBNotificationsContent=!t.$parent.myDBNotificationsContent}}},[s("i",{staticClass:"kiv-chevron-down icon-3"})]),t._v(" "),s("h2",[t._v("Notifications")]),t._v(" "),s("transition",{attrs:{name:"height"}},[t.$parent.myDBNotificationsContent?s("div",{staticClass:"notifications-list"},[t.loading||t.doctor.isVerified?t._e():s("div",{staticClass:"notifications-item"},[s("p",{staticClass:"notification-label"},[t._v("\n                    Vérifier votre adresse email\n                ")]),t._v(" "),s("div",{staticClass:"notification-actions",class:{disabled:t.actionInProgress}},[s("a",{staticClass:"action-link verif-mail",on:{click:function(e){return t.resendVerifEmail()}}},[s("i",{staticClass:"fas fa-envelope"}),t._v(" "),s("span",[t._v("Renvoyer lien")])])])]),t._v(" "),t.loading||t.doctor.city&&t.doctor.gender&&t.doctor.firstname&&t.doctor.lastname?t._e():s("div",{staticClass:"notifications-item"},[s("p",{staticClass:"notification-label"},[t._v("Compléter votre profil")]),t._v(" "),s("div",{staticClass:"notification-actions"},[s("a",{staticClass:"action-link",attrs:{href:"/parametres"}},[s("i",{staticClass:"kiv-pen icon-4"}),t._v(" "),s("span",[t._v("Compléter")])])])]),t._v(" "),t.loading?s("div",[s("div",{staticClass:"loading-block notifications-item"},[s("p",{staticClass:"loading w-60 notification-label"}),t._v(" "),s("div",{staticClass:"loading w-25 notification-actions"})]),t._v(" "),s("div",{staticClass:"loading-block notifications-item"},[s("p",{staticClass:"loading w-30 notification-label"}),t._v(" "),s("div",{staticClass:"loading w-30 notification-actions"})])]):t._e()]):t._e()])],1)};function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}o._withStripped=!0;var c={data:function(){return{actionInProgress:!1,loading:!1}},props:{doctor:Object},methods:{resendVerifEmail:function(){var t=this;this.actionInProgress=!0,this.axios.get("/doctor/".concat(this.doctor.id,"/resend/verify-email")).then((function(e){n.Z.openSuccessNotification("E-mail de vérification envoyé",e.data),t.actionInProgress=!1})).catch((function(e){var s="object"===r(e.response.data)?e.response.data.detail:e.response.data;n.Z.openErrorNotification("Erreur",s),t.actionInProgress=!1}))}}},l=s(1900),d=(0,l.Z)(c,o,[],!1,null,null,null);d.options.__file="assets/vue/doctor/DashboardPage/MyDashboardNotifications.vue";var v=d.exports,h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"kiv-block s-worksheet-templates",class:{reduced:!t.$parent.myWorksheetTemplatesContent},attrs:{id:"my-worksheets"}},[s("div",{staticClass:"toggle-content tab",on:{click:function(e){t.$parent.myWorksheetTemplatesContent=!t.$parent.myWorksheetTemplatesContent}}},[s("i",{staticClass:"kiv-chevron-down icon-3"})]),t._v(" "),s("div",{staticClass:"tabs"},[s("div",{staticClass:"inactive",on:{click:function(e){return t.activeTab(1)}}},[t._m(0)]),t._v(" "),s("div",{on:{click:function(e){return t.activeTab(2)}}},[t._m(1)])]),t._v(" "),s("transition",{attrs:{name:"fade"}},[t.prescriProcess&&t.getWorksheetTemplates.length?s("div",{staticClass:"prescri-process-dialog"},[s("span",{staticClass:"step-num"},[s("i",{staticClass:"fas fa-folder-plus"}),t._v("Etape\n                "+t._s(t.$parent.prescriProcessPatientSelected?2:1)+"\n            ")]),t._v(" "),s("p",[t._v("\n                Veuillez Sélectionner une fiche, vous pourrez la\n                personnaliser à l'étape suivante\n            ")])]):t._e()]),t._v(" "),s("transition",{attrs:{name:"fade"}},[t.prescriProcess?s("div",{staticClass:"prescri-process-dialog pp-create-worksheet"},[s("span",{staticClass:"step-num"},[s("i",{staticClass:"fas fa-folder-plus"}),t._v("Etape\n                "+t._s(t.$parent.prescriProcessPatientSelected?2:1)+"\n            ")]),t._v(" "),s("p",[t.getWorksheetTemplates.length?s("span",[t._v("Ou créez")]):s("span",[t._v("Créez")]),t._v(" une nouvelle fiche\n            ")])]):t._e()]),t._v(" "),s("transition",{attrs:{name:"height"}},[t.$parent.myWorksheetTemplatesContent?s("div",[s("div",{staticClass:"primary-actions"},[s("div",{staticClass:"search"},[s("vs-input",{attrs:{"label-placeholder":"Filtrer par nom de fiche et/ou créateur"},on:{keyup:function(e){t.page=1}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),s("div",{staticClass:"view-all-templates"},[s("span",[t._v("Voir les fiches "),s("br"),t._v("\n                            des autres prat.")]),t._v(" "),s("vs-switch",{on:{click:function(e){t.page=1}},model:{value:t.viewAllTemplates,callback:function(e){t.viewAllTemplates=e},expression:"viewAllTemplates"}})],1)],1),t._v(" "),s("div",[s("div",{staticClass:"kiv-select tags"},[t.getTagsFromAll.length?s("vs-select",{attrs:{filter:"",multiple:"",placeholder:"Mots-Clés"},on:{change:function(e){t.page=1}},model:{value:t.selectedTags,callback:function(e){t.selectedTags=e},expression:"selectedTags"}},[t._l(t.getTagsFromAll,(function(e,a){return s("vs-option",{key:a,attrs:{label:e,value:e}},[t._v("\n                                "+t._s(e)+"\n                            ")])})),t._v(" "),s("template",{slot:"notData"},[t._v("\n                                Aucun mot-clé\n                            ")])],2):s("div",{staticClass:"loading select-tags"})],1),t._v(" "),s("div",{staticClass:"btn-primary-action add"},[s("vs-tooltip",{scopedSlots:t._u([{key:"tooltip",fn:function(){return[t._v(" Créer une fiche ")]},proxy:!0}],null,!1,987881784)},[t.$parent.prescriProcess?t._e():s("vs-button",{staticClass:"btn-action add",attrs:{loading:t.btnLoadingAddWorksheet,circle:"",floating:""},on:{click:function(e){return t.redirectToCreatePage(0)}}},[s("plus-icon",{staticClass:"custom-class",attrs:{size:"3x"}})],1)],1)],1),t._v(" "),s("transition",{attrs:{name:"fade"}},[t.$parent.prescriProcess?s("div",{staticClass:"btn-prescription-action",class:{active:t.prescriProcess,selected:t.$parent.prescriProcessWorksheetSelected&&null===t.$parent.prescriProcessWorksheetSelected.id}},[s("vs-button",{staticClass:"w-100",attrs:{loading:0===t.btnLoadingWorksheetPrescriProcessRedirect},on:{click:function(e){return t.prescriProcessWorksheetChoice({id:null})}}},[t.$parent.prescriProcess&&!t.$parent.prescriProcessWorksheetSelected||t.$parent.prescriProcessWorksheetSelected&&null!==t.$parent.prescriProcessWorksheetSelected.id?s("span",[s("i",{staticClass:"fas fa-folder-plus"}),t._v("Créer\n                                    une fiche")]):t._e(),t._v(" "),t.$parent.prescriProcessWorksheetSelected&&null===t.$parent.prescriProcessWorksheetSelected.id?s("span",[s("i",{staticClass:"fas fa-check-circle"}),t._v("Sélectionné")]):t._e()])],1):t._e()])],1)]),t._v(" "),s("div",{staticClass:"worksheet-list wl-doctor"},[s("transition",{attrs:{name:"fade"}},[!t.loadingAllWorksheets&&t.getWorksheetTemplates.length?s("div",t._l(t.getWorksheetTemplates,(function(e,a){return s("div",{key:a},[s("div",{staticClass:"worksheet-header"},[s("div",{staticClass:"user-title",on:{click:function(s){return t.redirectToWorksheetPage(e.id)}}},[s("h3",{staticClass:"worksheet-title"},[t._v("\n                                        "+t._s(e.title)+"\n                                    ")])]),t._v(" "),s("div",{staticClass:"tags"},t._l(e.exercisesTags,(function(e,a){return s("div",{key:a,staticClass:"tag-chip"},[t._v("\n                                        "+t._s(e)+"\n                                    ")])})),0),t._v(" "),s("TagPartOfBody",{attrs:{partOfBody:e.partOfBody}})],1),t._v(" "),s("div",{staticClass:"worksheet-content"},[s("div",[s("div",{staticClass:"worksheet-details"},[s("div",{staticClass:"\n                                                worksheet-exercises-count\n                                            "},[s("i",{staticClass:"kiv-exercise icon-7"}),t._v(" "),s("span",{staticClass:"b"},[t._v(t._s(e.exercises.length))]),t._v("\n                                            exercice"),e.exercises.length>1?s("span",[t._v("s")]):t._e()]),t._v(" "),s("div",{staticClass:"worksheet-timing"},[s("i",{staticClass:"kiv-calendar icon-10"}),t._v(" "),s("span",{staticClass:"b"},[t._v(t._s(e.perDay)+"x")]),t._v("\n                                            par jour -\n                                            "),s("span",{staticClass:"b"},[t._v(t._s(e.perWeek)+"x")]),t._v("\n                                            par semaine\n                                        ")]),t._v(" "),s("div",{staticClass:"worksheet-period"},[s("i",{staticClass:"kiv-clock icon-11"}),t._v("\n                                            Période :\n                                            "),s("span",{staticClass:"b"},[t._v(t._s(e.duration)+"\n                                                semaine"),e.duration>1?s("span",[t._v("s")]):t._e()])])]),t._v(" "),s("div",{staticClass:"worksheet-details reduced"},[s("div",{staticClass:"\n                                                worksheet-exercises-count\n                                            "},[s("i",{staticClass:"kiv-exercise icon-7"}),t._v(" "),s("span",{staticClass:"b"},[t._v(t._s(e.exercises.length))]),t._v("\n                                            ex.\n                                        ")]),t._v(" "),s("div",{staticClass:"worksheet-timing"},[s("i",{staticClass:"kiv-calendar icon-10"}),t._v(" "),s("span",{staticClass:"b"},[t._v(t._s(e.perDay)+"x")]),t._v("\n                                            / jour -\n                                            "),s("span",{staticClass:"b"},[t._v(t._s(e.perWeek)+"x")]),t._v("\n                                            / sem.\n                                        ")]),t._v(" "),s("div",{staticClass:"worksheet-period"},[s("i",{staticClass:"kiv-clock icon-11"}),t._v(" "),s("span",{staticClass:"b"},[t._v(t._s(e.duration)+"\n                                                sem.")])])]),t._v(" "),s("div",{staticClass:"btns-date"},[s("div",{staticClass:"created-at-date"},[s("span",[t._v("créé le\n                                                "+t._s(t.formatDate(e.createdAt))+"\n                                                "),e.doctor&&(e.doctor.firstname||e.doctor.lastname)?s("span",{staticClass:"creator"},[t._v("\n                                                    par\n                                                    "+t._s(e.doctor.firstname)+"\n                                                    "+t._s(e.doctor.lastname)+"\n                                                ")]):t._e()]),t._v(" "),e.doctor?s("vs-avatar",{staticClass:"user-avatar",attrs:{size:"22",circle:""}},[s("img",{attrs:{src:e.doctor.avatarUrl?e.doctor.avatarUrl:"/img/avatar-default.svg",alt:"Avatar de "+e.doctor.firstname+" "+e.doctor.lastname}})]):t._e()],1),t._v(" "),s("div",{staticClass:"buttons"},[s("vs-button",{staticClass:"btn-action",attrs:{circle:"",floating:""},on:{click:function(s){return t.redirectToWorksheetPage(e.id)}}},[s("i",{staticClass:"fas fa-eye"})]),t._v(" "),e.doctor.id===t.doctor.id?s("vs-button",{staticClass:"btn-action",attrs:{circle:"",floating:""},on:{click:function(s){return t.redirectToEditPage(e.id)}}},[s("i",{staticClass:"fas fa-pen"})]):t._e(),t._v(" "),e.doctor.id===t.doctor.id?s("vs-button",{staticClass:"btn-action",attrs:{circle:"",floating:""},on:{click:function(s){return t.removeWorksheet(e)}}},[s("i",{staticClass:"fas fa-trash"})]):t._e()],1)])])]),t._v(" "),s("div",{staticClass:"big-buttons"},[s("div",{staticClass:"btn-create-action"},[s("vs-button",{staticClass:"w-100",attrs:{disabled:t.$parent.prescriProcess,loading:t.btnLoadingCopyWorksheet===e.id},on:{click:function(s){return t.redirectToCreatePage(e.id)}}},[s("i",{staticClass:"fas fa-plus-circle"}),t._v("\n                                        Copier\n                                    ")])],1),t._v(" "),s("div",{staticClass:"btn-prescription-action",class:{active:t.prescriProcess,selected:t.$parent.prescriProcessWorksheetSelected&&t.$parent.prescriProcessWorksheetSelected.id===e.id}},[s("vs-button",{staticClass:"w-100",attrs:{loading:t.btnLoadingWorksheetPrescriProcessRedirect===e.id},on:{click:function(s){return t.prescriProcessWorksheetChoice(e)}}},[s("transition",{attrs:{name:"fade"}},[!t.prescriProcess&&!t.$parent.prescriProcessWorksheetSelected||t.$parent.prescriProcessWorksheetSelected&&t.$parent.prescriProcessWorksheetSelected.id!=e.id?s("span",[s("i",{staticClass:"\n                                                        fas\n                                                        fa-folder-plus\n                                                    "}),t._v("Prescrire")]):t._e(),t._v(" "),t.prescriProcess&&!t.$parent.prescriProcessWorksheetSelected?s("span",[s("i",{staticClass:"\n                                                        fas\n                                                        fa-folder-plus\n                                                    "}),t._v("Sélectionner")]):t._e(),t._v(" "),t.$parent.prescriProcessWorksheetSelected&&t.$parent.prescriProcessWorksheetSelected.id===e.id?s("span",[s("i",{staticClass:"\n                                                        fas\n                                                        fa-check-circle\n                                                    "}),t._v("Sélectionné")]):t._e()])],1)],1)])])})),0):t._e(),t._v(" "),t.loadingAllWorksheets||t.getWorksheetTemplates.length||t.search||t.selectedTags.length?t._e():s("div",{staticClass:"not-found"},[s("p",[s("i",{staticClass:"fas fa-folder-minus"}),t._v(" "),s("span",[t._v("Vous n'avez pas de fiche")])])]),t._v(" "),t.loadingAllWorksheets||t.getWorksheetTemplates.length||!t.search&&!t.selectedTags.length?t._e():s("div",{staticClass:"not-found"},[s("p",[s("i",{staticClass:"fas fa-folder-minus"}),t._v(" "),s("span",[t._v("Aucune fiche n'a été trouvée avec\n                                "),t.search?s("span",[t._v('"'),s("strong",[t._v(t._s(t.search))]),t._v('"')]):t._e(),t.search&&t.selectedTags.length?s("span",{staticClass:"et"},[t._v("et")]):t._e(),t.selectedTags.length?s("span",{staticClass:"tags"},t._l(t.selectedTags,(function(e,a){return s("div",{key:a,staticClass:"tag-chip"},[t._v("\n                                        "+t._s(e)+"\n                                    ")])})),0):t._e()])])]),t._v(" "),t.loadingAllWorksheets?s("div",[s("div",{staticClass:"loading loading-block"},[s("div",{staticClass:"worksheet-header w-85"},[s("div",{staticClass:"loading worksheet-title w-65"}),t._v(" "),s("div",{staticClass:"loading part-of-body"})]),t._v(" "),s("div",{staticClass:"loading worksheet-progress-line"}),t._v(" "),s("div",{staticClass:"worksheet-content"},[s("div",{staticClass:"worksheet-details"},[s("div",{staticClass:"\n                                            loading\n                                            worksheet-exercises-count\n                                            w-45\n                                        "}),t._v(" "),s("div",{staticClass:"\n                                            loading\n                                            worksheet-timing\n                                            w-25\n                                        "}),t._v(" "),s("div",{staticClass:"\n                                            loading\n                                            worksheet-period\n                                            w-15\n                                        "})])])]),t._v(" "),s("div",{staticClass:"loading loading-block"},[s("div",{staticClass:"worksheet-header w-85"},[s("div",{staticClass:"loading worksheet-title w-45"}),t._v(" "),s("div",{staticClass:"loading part-of-body"})]),t._v(" "),s("div",{staticClass:"loading worksheet-progress-line"}),t._v(" "),s("div",{staticClass:"worksheet-content"},[s("div",{staticClass:"worksheet-details"},[s("div",{staticClass:"\n                                            loading\n                                            worksheet-exercises-count\n                                            w-45\n                                        "}),t._v(" "),s("div",{staticClass:"\n                                            loading\n                                            worksheet-timing\n                                            w-25\n                                        "}),t._v(" "),s("div",{staticClass:"\n                                            loading\n                                            worksheet-period\n                                            w-15\n                                        "})])])]),t._v(" "),s("div",{staticClass:"loading loading-block"},[s("div",{staticClass:"worksheet-header w-85"},[s("div",{staticClass:"loading worksheet-title w-55"}),t._v(" "),s("div",{staticClass:"loading part-of-body"})]),t._v(" "),s("div",{staticClass:"loading worksheet-progress-line"}),t._v(" "),s("div",{staticClass:"worksheet-content"},[s("div",{staticClass:"worksheet-details"},[s("div",{staticClass:"\n                                            loading\n                                            worksheet-exercises-count\n                                            w-45\n                                        "}),t._v(" "),s("div",{staticClass:"\n                                            loading\n                                            worksheet-timing\n                                            w-25\n                                        "}),t._v(" "),s("div",{staticClass:"\n                                            loading\n                                            worksheet-period\n                                            w-15\n                                        "})])])]),t._v(" "),s("div",{staticClass:"loading loading-block"},[s("div",{staticClass:"worksheet-header w-85"},[s("div",{staticClass:"loading worksheet-title w-45"}),t._v(" "),s("div",{staticClass:"loading part-of-body"})]),t._v(" "),s("div",{staticClass:"loading worksheet-progress-line"}),t._v(" "),s("div",{staticClass:"worksheet-content"},[s("div",{staticClass:"worksheet-details"},[s("div",{staticClass:"\n                                            loading\n                                            worksheet-exercises-count\n                                            w-45\n                                        "}),t._v(" "),s("div",{staticClass:"\n                                            loading\n                                            worksheet-timing\n                                            w-25\n                                        "}),t._v(" "),s("div",{staticClass:"\n                                            loading\n                                            worksheet-period\n                                            w-15\n                                        "})])])]),t._v(" "),s("div",{staticClass:"loading loading-block"},[s("div",{staticClass:"worksheet-header w-85"},[s("div",{staticClass:"loading worksheet-title w-45"}),t._v(" "),s("div",{staticClass:"loading part-of-body"})]),t._v(" "),s("div",{staticClass:"loading worksheet-progress-line"}),t._v(" "),s("div",{staticClass:"worksheet-content"},[s("div",{staticClass:"worksheet-details"},[s("div",{staticClass:"\n                                            loading\n                                            worksheet-exercises-count\n                                            w-45\n                                        "}),t._v(" "),s("div",{staticClass:"\n                                            loading\n                                            worksheet-timing\n                                            w-25\n                                        "}),t._v(" "),s("div",{staticClass:"\n                                            loading\n                                            worksheet-period\n                                            w-15\n                                        "})])])]),t._v(" "),s("div",{staticClass:"loading loading-block"},[s("div",{staticClass:"worksheet-header w-85"},[s("div",{staticClass:"loading worksheet-title w-45"}),t._v(" "),s("div",{staticClass:"loading part-of-body"})]),t._v(" "),s("div",{staticClass:"loading worksheet-progress-line"}),t._v(" "),s("div",{staticClass:"worksheet-content"},[s("div",{staticClass:"worksheet-details"},[s("div",{staticClass:"\n                                            loading\n                                            worksheet-exercises-count\n                                            w-45\n                                        "}),t._v(" "),s("div",{staticClass:"\n                                            loading\n                                            worksheet-timing\n                                            w-25\n                                        "}),t._v(" "),s("div",{staticClass:"\n                                            loading\n                                            worksheet-period\n                                            w-15\n                                        "})])])]),t._v(" "),s("div",{staticClass:"loading loading-block"},[s("div",{staticClass:"worksheet-header w-85"},[s("div",{staticClass:"loading worksheet-title w-45"}),t._v(" "),s("div",{staticClass:"loading part-of-body"})]),t._v(" "),s("div",{staticClass:"loading worksheet-progress-line"}),t._v(" "),s("div",{staticClass:"worksheet-content"},[s("div",{staticClass:"worksheet-details"},[s("div",{staticClass:"\n                                            loading\n                                            worksheet-exercises-count\n                                            w-45\n                                        "}),t._v(" "),s("div",{staticClass:"\n                                            loading\n                                            worksheet-timing\n                                            w-25\n                                        "}),t._v(" "),s("div",{staticClass:"\n                                            loading\n                                            worksheet-period\n                                            w-15\n                                        "})])])])]):t._e()])],1),t._v(" "),t.countWorksheetTemplates>t.max?s("div",{staticClass:"pagination"},[s("vs-pagination",{attrs:{"buttons-dotted":"",length:t.getLength(t.getSearch(t.worksheetTemplates,t.search),t.max)},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),t._v(" "),s("div",{staticClass:"count-page"},[t._v("\n                    Page : "),s("b",[t._v(t._s(t.page))])])],1):t._e()]):t._e()]),t._v(" "),s("vs-dialog",{model:{value:t.modalConfirmRemoveWorksheet,callback:function(e){t.modalConfirmRemoveWorksheet=e},expression:"modalConfirmRemoveWorksheet"}},[s("p",{staticClass:"modal-confirm-text"},[t._v("Confirmer la suppression de")]),t._v(" "),s("div",{staticClass:"modal-confirm-detail remove-item"},[s("div",{staticClass:"modal-confirm-icon remove-item"},[s("i",{staticClass:"fas fa-trash"})]),t._v(" "),s("p",[s("span",[t._v("\n                    "+t._s(t.removeWorksheetDetails.title)+"\n                ")])])]),t._v(" "),s("div",{staticClass:"modal-confirm-buttons"},[s("vs-button",{staticClass:"secondary",on:{click:function(e){t.modalConfirmRemoveWorksheet=!1}}},[t._v("\n                Annuler\n            ")]),t._v(" "),s("vs-button",{class:{disabled:t.btnLoadingValidRemoveWorksheet},attrs:{loading:t.btnLoadingValidRemoveWorksheet},on:{click:t.validRemoveWorksheet}},[t._v("\n                Confirmer\n            ")])],1)])],1)};h._withStripped=!0;s(9653),s(561),s(6699),s(2023);var p=s(4117),u=s(381),f=s.n(u),g=s(9101);function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var _={props:{doctor:Object,worksheetTemplates:Array,loadingAllWorksheets:Boolean,tagsFromExercises:Array,prescriProcess:Boolean,btnLoadingWorksheetPrescriProcessRedirect:Number,csrfTokenRemoveWorksheet:String},components:{TagPartOfBody:p.Z,PlusIcon:g.pOD},data:function(){return{selectedTags:[],search:"",page:1,max:6,viewAllTemplates:!1,modalConfirmRemoveWorksheet:!1,removeWorksheetDetails:{},btnLoadingValidRemoveWorksheet:!1,btnLoadingAddWorksheet:!1,btnLoadingCopyWorksheet:null}},computed:{getWorksheetTemplates:function(){return this.getPage(this.getSearch(this.worksheetTemplates,this.search),this.page,this.max)},countWorksheetTemplates:function(){return this.getSearch(this.worksheetTemplates,this.search).length},getTagsFromAll:function(){return n.Z.getTagsFromAll(this.tagsFromExercises)}},methods:{prescriProcessWorksheetChoice:function(t){this.$emit("prescriProcessWorksheetChoice",t)},redirectToEditPage:function(t){document.location.href="/doctor/".concat(this.doctor.id,"/fiche/edition/").concat(t)},redirectToCreatePage:function(t){console.log(t),t?this.btnLoadingCopyWorksheet=t:this.btnLoadingAddWorksheet=!0,document.location.href="/doctor/".concat(this.doctor.id,"/fiche/creation/").concat(t)},redirectToWorksheetPage:function(t){document.location.href="/doctor/".concat(this.doctor.id,"/fiche/voir/").concat(t)},activeTab:function(t){this.$parent.activeTab=t,window.innerWidth<576&&(1===t&&(this.$parent.myPrescriptionsContent=!0),2===t&&(this.$parent.myWorksheetTemplatesContent=!this.$parent.myWorksheetTemplatesContent))},removeWorksheet:function(t){return this.removeWorksheetDetails=t,this.modalConfirmRemoveWorksheet=!this.modalConfirmRemoveWorksheet},validRemoveWorksheet:function(){var t=this;this.btnLoadingValidRemoveWorksheet=!0,this.axios.post("/doctor/".concat(this.doctor.id,"/remove/worksheet"),{_token:this.csrfTokenRemoveWorksheet,worksheetId:this.removeWorksheetDetails.id}).then((function(e){n.Z.openSuccessNotification("Suppression de la fiche",e.data),t.$parent.allWorksheets.splice(t.$parent.allWorksheets.indexOf(t.removeWorksheetDetails),1),t.btnLoadingValidRemoveWorksheet=!1,t.modalConfirmRemoveWorksheet=!1})).catch((function(e){var s="object"===m(e.response.data)?e.response.data.detail:e.response.data;n.Z.openErrorNotification("Erreur",s),t.btnLoadingValidRemoveWorksheet=!1,t.modalConfirmRemoveWorksheet=!1}))},formatDate:function(t){return f()(t).format("DD/MM/YYYY")},getPage:function(t,e,s){return n.Z.getPage(t,e,s)},getLength:function(t,e){return n.Z.getLength(t,e)},getSearch:function(t,e){var s=this,a=n.Z.getSearch(t,e);return this.selectedTags.length&&(a=a.filter((function(t){var e=!1;return t.exercisesTags&&t.exercisesTags.forEach((function(t){s.selectedTags.includes(t)&&(e=!0)})),e}))),this.viewAllTemplates||(a=a.filter((function(t){return t.doctor&&t.doctor.id===s.doctor.id}))),a}}},C=(0,l.Z)(_,h,[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h2",[s("span",[t._v("Mes prescriptions")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h2",[s("span",[t._v("Mes fiches")])])}],!1,null,null,null);C.options.__file="assets/vue/doctor/DashboardPage/MyWorksheetTemplates.vue";var k=C.exports,P=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"kiv-block s-prescriptions",class:{reduced:!t.$parent.myPrescriptionsContent},attrs:{id:"my-worksheets"}},[s("div",{staticClass:"toggle-content tab",on:{click:function(e){t.$parent.myPrescriptionsContent=!t.$parent.myPrescriptionsContent}}},[s("i",{staticClass:"kiv-chevron-down icon-3"})]),t._v(" "),s("div",{staticClass:"tabs"},[s("div",{on:{click:function(e){return t.activeTab(1)}}},[t._m(0)]),t._v(" "),s("div",{staticClass:"inactive",on:{click:function(e){return t.activeTab(2)}}},[t._m(1)])]),t._v(" "),s("transition",{attrs:{name:"height"}},[t.$parent.myPrescriptionsContent?s("div",[s("div",{staticClass:"primary-actions"},[s("div",{staticClass:"search"},[s("vs-input",{attrs:{"label-placeholder":"Filtrer par nom de fiche et/ou patient"},on:{keyup:function(e){t.page=1}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._v(" "),s("div",{staticClass:"btn-primary-action"},[s("vs-button",{staticClass:"w-100",on:{click:t.prescriProcess}},[s("i",{staticClass:"fas fa-folder-plus"}),t._v(" Prescrire\n                    ")])],1)]),t._v(" "),s("div",{staticClass:"worksheet-list wl-doctor"},[!t.loadingDoctorWorksheets&&t.getDoctorPrescriptions.length?s("div",t._l(t.getDoctorPrescriptions,(function(e,a){return s("div",{key:a},[s("div",{staticClass:"worksheet-header"},[s("div",{staticClass:"user-title"},[s("vs-avatar",{staticClass:"user-avatar",attrs:{size:"35",circle:""},on:{click:function(s){return t.redirectToPatientDashboard(e.patient.id)}}},[s("img",{attrs:{src:e.patient.avatarUrl?e.patient.avatarUrl:"/img/avatar-default.svg",alt:"Avatar de "+e.patient.firstname+" "+e.patient.lastname}})]),t._v(" "),s("h3",{staticClass:"worksheet-title",on:{click:function(s){return t.redirectToPatientDashboard(e.patient.id)}}},[e.patient.firstname||e.patient.lastname?s("span",{staticClass:"user-name"},[t._v("\n                                        "+t._s(e.patient.firstname)+"\n                                        "+t._s(e.patient.lastname)+"\n                                    ")]):s("span",[t._v("\n                                        "+t._s(e.patient.email)+"\n                                    ")]),t._v(" "),s("span",{staticClass:"deux-points"},[t._v(":")]),t._v("\n                                    "+t._s(e.title)+"\n                                ")]),t._v(" "),e.commentaries.length?s("div",[s("vs-button",{staticClass:"btn-action commentaries",attrs:{circle:"",floating:""},on:{click:function(s){return t.redirectToWorksheetPage(e.id,e.patient.id,!0)}}},[s("i",{staticClass:"far fa-comment-alt"}),t._v(" "),s("div",{staticClass:"count-commentaries"},[t._v("\n                                            "+t._s(e.commentaries.length)+"\n                                        ")])])],1):t._e()],1),t._v(" "),s("TagPartOfBody",{attrs:{partOfBody:e.partOfBody}})],1),t._v(" "),s("div",{staticClass:"worksheet-progress-line"},[t.loadingsGetSessions.includes(e.id)?s("div",{staticClass:"loading-gray progressbar-base"}):s("div",{staticClass:"progressbar-base"},[s("div",{staticClass:"progressbar-thumb",style:{width:e.worksheetTotalProgression+"%"}})]),t._v(" "),s("div",{staticClass:"count-sessions"},[t.loadingsGetSessions.includes(e.id)?s("div",{staticClass:"loading-gray session-nb"}):s("p",{staticClass:"session-nb",class:{completed:100<=e.worksheetTotalProgression}},[e.totalWorksheetSessions>0?s("span",[t._v("\n                                        Session n°"),e.currentWorksheetSession?s("span",[t._v(t._s(e.currentWorksheetSession.execOrder))]):s("span",[t._v(t._s(e.totalWorksheetSessions))]),t._v("/"+t._s(e.totalWorksheetSessions)+"\n                                    ")]):t._e(),t._v(" "),0===e.totalWorksheetSessions?s("span",[t._v("\n                                        Non démarrée\n                                    ")]):t._e(),t._v(" "),null===e.totalWorksheetSessions?s("span",[t._v("\n                                        NB Sessions\n                                    ")]):t._e()])])]),t._v(" "),s("div",{staticClass:"worksheet-content"},[s("div",[s("div",{staticClass:"worksheet-details"},[s("div",{staticClass:"worksheet-exercises-count"},[s("i",{staticClass:"kiv-exercise icon-7"}),t._v(" "),s("span",{staticClass:"b"},[t._v(t._s(e.exercises.length))]),t._v("\n                                        exercice"),e.exercises.length>1?s("span",[t._v("s")]):t._e()]),t._v(" "),s("div",{staticClass:"worksheet-timing"},[s("i",{staticClass:"kiv-calendar icon-10"}),t._v(" "),s("span",{staticClass:"b"},[t._v(t._s(e.perDay)+"x")]),t._v("\n                                        par jour -\n                                        "),s("span",{staticClass:"b"},[t._v(t._s(e.perWeek)+"x")]),t._v("\n                                        par semaine\n                                    ")]),t._v(" "),s("div",{staticClass:"worksheet-period"},[s("i",{staticClass:"kiv-clock icon-11"}),t._v("\n                                        Période :\n                                        "),s("span",{staticClass:"b"},[t._v(t._s(e.duration)+"\n                                            semaine"),e.duration>1?s("span",[t._v("s")]):t._e()])])]),t._v(" "),s("div",{staticClass:"worksheet-details reduced"},[s("div",{staticClass:"worksheet-exercises-count"},[s("i",{staticClass:"kiv-exercise icon-7"}),t._v(" "),s("span",{staticClass:"b"},[t._v(t._s(e.exercises.length))]),t._v("\n                                        ex.\n                                    ")]),t._v(" "),s("div",{staticClass:"worksheet-timing"},[s("i",{staticClass:"kiv-calendar icon-10"}),t._v(" "),s("span",{staticClass:"b"},[t._v(t._s(e.perDay)+"x")]),t._v("\n                                        / jour -\n                                        "),s("span",{staticClass:"b"},[t._v(t._s(e.perWeek)+"x")]),t._v("\n                                        / sem.\n                                    ")]),t._v(" "),s("div",{staticClass:"worksheet-period"},[s("i",{staticClass:"kiv-clock icon-11"}),t._v(" "),s("span",{staticClass:"b"},[t._v(t._s(e.duration)+"\n                                            sem.")])])]),t._v(" "),s("div",{staticClass:"btns-date"},[s("div",{staticClass:"created-at-date"},[s("span",[t._v("créé le\n                                            "+t._s(t.formatDate(e.createdAt))+"\n                                        ")])]),t._v(" "),s("div",{staticClass:"buttons"},[e.totalWorksheetSessions>0?s("vs-button",{staticClass:"btn-action",attrs:{circle:"",floating:""},on:{click:function(s){return t.redirectToWorksheetPage(e.id,e.patient.id,!0)}}},[s("i",{staticClass:"fas fa-eye"})]):t._e(),t._v(" "),0===e.totalWorksheetSessions?s("vs-button",{staticClass:"btn-action",attrs:{circle:"",floating:""},on:{click:function(s){return t.redirectToWorksheetPage(e.id,e.patient.id,!1)}}},[s("i",{staticClass:"fas fa-eye"})]):t._e(),t._v(" "),s("vs-button",{staticClass:"btn-action",attrs:{circle:"",floating:""},on:{click:function(s){return t.redirectToEditPage(e.id,e.patient.id)}}},[s("i",{staticClass:"fas fa-pen"})]),t._v(" "),s("vs-button",{staticClass:"btn-action",attrs:{circle:"",floating:""},on:{click:function(s){return t.removeWorksheet(e)}}},[s("i",{staticClass:"fas fa-trash"})])],1)])])])])})),0):t._e(),t._v(" "),t.loadingDoctorWorksheets||t.getDoctorPrescriptions.length||t.search?t._e():s("div",{staticClass:"not-found"},[s("p",[s("i",{staticClass:"fas fa-folder-minus"}),t._v(" "),s("span",[t._v("Vous n'avez pas de prescription")])])]),t._v(" "),t.loadingDoctorWorksheets||t.getDoctorPrescriptions.length||!t.search?t._e():s("div",{staticClass:"not-found"},[s("p",[s("i",{staticClass:"fas fa-folder-minus"}),t._v(" "),s("span",[t._v("Aucune prescription n'a été trouvée avec\n                            "),t.search?s("span",[t._v('"'),s("strong",[t._v(t._s(t.search))]),t._v('"')]):t._e()])])]),t._v(" "),t.loadingDoctorWorksheets?s("div",[s("div",{staticClass:"loading loading-block"},[s("div",{staticClass:"worksheet-header w-85"},[s("div",{staticClass:"loading worksheet-title w-65"}),t._v(" "),s("div",{staticClass:"loading part-of-body"})]),t._v(" "),s("div",{staticClass:"loading worksheet-progress-line"}),t._v(" "),s("div",{staticClass:"worksheet-content"},[s("div",{staticClass:"worksheet-details"},[s("div",{staticClass:"\n                                        loading\n                                        worksheet-exercises-count\n                                        w-45\n                                    "}),t._v(" "),s("div",{staticClass:"loading worksheet-timing w-25"}),t._v(" "),s("div",{staticClass:"loading worksheet-period w-15"})])])]),t._v(" "),s("div",{staticClass:"loading loading-block"},[s("div",{staticClass:"worksheet-header w-85"},[s("div",{staticClass:"loading worksheet-title w-45"}),t._v(" "),s("div",{staticClass:"loading part-of-body"})]),t._v(" "),s("div",{staticClass:"loading worksheet-progress-line"}),t._v(" "),s("div",{staticClass:"worksheet-content"},[s("div",{staticClass:"worksheet-details"},[s("div",{staticClass:"\n                                        loading\n                                        worksheet-exercises-count\n                                        w-45\n                                    "}),t._v(" "),s("div",{staticClass:"loading worksheet-timing w-25"}),t._v(" "),s("div",{staticClass:"loading worksheet-period w-15"})])])]),t._v(" "),s("div",{staticClass:"loading loading-block"},[s("div",{staticClass:"worksheet-header w-85"},[s("div",{staticClass:"loading worksheet-title w-55"}),t._v(" "),s("div",{staticClass:"loading part-of-body"})]),t._v(" "),s("div",{staticClass:"loading worksheet-progress-line"}),t._v(" "),s("div",{staticClass:"worksheet-content"},[s("div",{staticClass:"worksheet-details"},[s("div",{staticClass:"\n                                        loading\n                                        worksheet-exercises-count\n                                        w-45\n                                    "}),t._v(" "),s("div",{staticClass:"loading worksheet-timing w-25"}),t._v(" "),s("div",{staticClass:"loading worksheet-period w-15"})])])]),t._v(" "),s("div",{staticClass:"loading loading-block"},[s("div",{staticClass:"worksheet-header w-85"},[s("div",{staticClass:"loading worksheet-title w-45"}),t._v(" "),s("div",{staticClass:"loading part-of-body"})]),t._v(" "),s("div",{staticClass:"loading worksheet-progress-line"}),t._v(" "),s("div",{staticClass:"worksheet-content"},[s("div",{staticClass:"worksheet-details"},[s("div",{staticClass:"\n                                        loading\n                                        worksheet-exercises-count\n                                        w-45\n                                    "}),t._v(" "),s("div",{staticClass:"loading worksheet-timing w-25"}),t._v(" "),s("div",{staticClass:"loading worksheet-period w-15"})])])]),t._v(" "),s("div",{staticClass:"loading loading-block"},[s("div",{staticClass:"worksheet-header w-85"},[s("div",{staticClass:"loading worksheet-title w-45"}),t._v(" "),s("div",{staticClass:"loading part-of-body"})]),t._v(" "),s("div",{staticClass:"loading worksheet-progress-line"}),t._v(" "),s("div",{staticClass:"worksheet-content"},[s("div",{staticClass:"worksheet-details"},[s("div",{staticClass:"\n                                        loading\n                                        worksheet-exercises-count\n                                        w-45\n                                    "}),t._v(" "),s("div",{staticClass:"loading worksheet-timing w-25"}),t._v(" "),s("div",{staticClass:"loading worksheet-period w-15"})])])]),t._v(" "),s("div",{staticClass:"loading loading-block"},[s("div",{staticClass:"worksheet-header w-85"},[s("div",{staticClass:"loading worksheet-title w-45"}),t._v(" "),s("div",{staticClass:"loading part-of-body"})]),t._v(" "),s("div",{staticClass:"loading worksheet-progress-line"}),t._v(" "),s("div",{staticClass:"worksheet-content"},[s("div",{staticClass:"worksheet-details"},[s("div",{staticClass:"\n                                        loading\n                                        worksheet-exercises-count\n                                        w-45\n                                    "}),t._v(" "),s("div",{staticClass:"loading worksheet-timing w-25"}),t._v(" "),s("div",{staticClass:"loading worksheet-period w-15"})])])])]):t._e()]),t._v(" "),t.doctorPrescriptions.length>t.max?s("div",{staticClass:"pagination"},[s("vs-pagination",{attrs:{"buttons-dotted":"",length:t.getLength(t.getSearch(t.doctorPrescriptions,t.search),t.max)},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),t._v(" "),s("div",{staticClass:"count-page"},[t._v("\n                    Page : "),s("b",[t._v(t._s(t.page))])])],1):t._e()]):t._e()]),t._v(" "),s("vs-dialog",{model:{value:t.modalConfirmRemoveWorksheet,callback:function(e){t.modalConfirmRemoveWorksheet=e},expression:"modalConfirmRemoveWorksheet"}},[s("p",{staticClass:"modal-confirm-text"},[t._v("Confirmer la suppression de")]),t._v(" "),s("div",{staticClass:"modal-confirm-detail remove-item"},[s("div",{staticClass:"modal-confirm-icon remove-item"},[s("i",{staticClass:"fas fa-trash"})]),t._v(" "),s("p",[s("span",[t._v("\n                    "+t._s(t.removeWorksheetDetails.title)+"\n                ")])])]),t._v(" "),s("div",{staticClass:"modal-confirm-buttons"},[s("vs-button",{staticClass:"secondary",on:{click:function(e){t.modalConfirmRemoveWorksheet=!1}}},[t._v("\n                Annuler\n            ")]),t._v(" "),s("vs-button",{class:{disabled:t.btnLoadingValidRemoveWorksheet},attrs:{loading:t.btnLoadingValidRemoveWorksheet},on:{click:t.validRemoveWorksheet}},[t._v("\n                Confirmer\n            ")])],1)])],1)};P._withStripped=!0;s(9826);function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var w={props:{doctor:Object,doctorPrescriptions:Array,loadingDoctorWorksheets:Boolean,csrfTokenRemoveWorksheet:String},components:{TagPartOfBody:p.Z},computed:{getDoctorPrescriptions:function(){var t=this,e=this.getPage(n.Z.getSearch(this.doctorPrescriptions,this.search,"doctor"),this.page,this.max);if(e.length){var s=this.search?700:0;clearTimeout(this.debounceGetSessionsInfos),this.debounceGetSessionsInfos=setTimeout((function(){e.forEach((function(e){!t.doctor.patients.find((function(t){return t.id===e.patient.id}))||null!==e.worksheetTotalProgression&&null!==e.currentWorksheetSession&&null!==e.totalWorksheetSessions&&null!==e.totalCompletedWorksheetSessions||(t.loadingsGetSessions.push(e.id),t.axios.get("/patient/".concat(e.patient.id,"/get/current-worksheet-session/").concat(e.id,"/doctorview")).then((function(s){e.currentWorksheetSession=null!==s.data.currentWorksheetSession&&s.data.currentWorksheetSession,t.axios.get("/patient/".concat(e.patient.id,"/get/total-worksheet-sessions/").concat(e.id)).then((function(s){e.totalWorksheetSessions=s.data,t.axios.get("/patient/".concat(e.patient.id,"/get/total-completed-worksheet-sessions/").concat(e.id)).then((function(s){e.totalCompletedWorksheetSessions=s.data,e.worksheetTotalProgression=t.calculWorksheetTotalProgression(e.totalCompletedWorksheetSessions,e.totalWorksheetSessions),t.loadingsGetSessions.splice(t.loadingsGetSessions.indexOf(e.id),1)})).catch((function(t){var e="object"===b(t.response.data)?t.response.data.detail:t.response.data;console.error(e)}))})).catch((function(t){var e="object"===b(t.response.data)?t.response.data.detail:t.response.data;console.error(e)}))})).catch((function(t){var e="object"===b(t.response.data)?t.response.data.detail:t.response.data;console.error(e)})))}))}),s)}return e}},data:function(){return{search:"",page:1,max:6,modalConfirmRemoveWorksheet:!1,removeWorksheetDetails:{},btnLoadingValidRemoveWorksheet:!1,debounceGetSessionsInfos:null,loadingsGetSessions:[]}},methods:{calculWorksheetTotalProgression:function(t,e){var s=100/e;return Math.round(s*t*10)/10},prescriProcess:function(){this.$emit("prescriProcess",!0)},redirectToEditPage:function(t,e){document.location.href="/doctor/".concat(this.doctor.id,"/fiche/edition/").concat(t,"/").concat(e)},redirectToWorksheetPage:function(t,e,s){document.location.href=s?"/doctor/".concat(this.doctor.id,"/voir/").concat(t,"/").concat(e):"/doctor/".concat(this.doctor.id,"/fiche/voir/").concat(t,"/").concat(e)},redirectToPatientDashboard:function(t){document.location.href="/doctor/".concat(this.doctor.id,"/voir/patient/").concat(t)},activeTab:function(t){this.$parent.activeTab=t,window.innerWidth<576&&(1===t&&(this.$parent.myPrescriptionsContent=!this.$parent.myPrescriptionsContent),2===t&&(this.$parent.myWorksheetTemplatesContent=!0))},removeWorksheet:function(t){return this.removeWorksheetDetails=t,this.modalConfirmRemoveWorksheet=!this.modalConfirmRemoveWorksheet},validRemoveWorksheet:function(){var t=this;this.btnLoadingValidRemoveWorksheet=!0,this.axios.post("/doctor/".concat(this.doctor.id,"/remove/worksheet"),{_token:this.csrfTokenRemoveWorksheet,worksheetId:this.removeWorksheetDetails.id}).then((function(e){n.Z.openSuccessNotification("Suppression de la prescription",e.data),t.$parent.doctorWorksheets.splice(t.$parent.doctorWorksheets.indexOf(t.removeWorksheetDetails),1),t.btnLoadingValidRemoveWorksheet=!1,t.modalConfirmRemoveWorksheet=!1})).catch((function(e){var s="object"===b(e.response.data)?e.response.data.detail:e.response.data;n.Z.openErrorNotification("Erreur",s),t.btnLoadingValidRemoveWorksheet=!1,t.modalConfirmRemoveWorksheet=!1}))},formatDate:function(t){return f()(t).format("DD/MM/YYYY")},getPage:function(t,e,s){return n.Z.getPage(t,e,s)},getLength:function(t,e){return n.Z.getLength(t,e)},getSearch:function(t,e){return n.Z.getSearch(t,e)}}},y=(0,l.Z)(w,P,[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h2",[s("span",[t._v("Mes prescriptions")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h2",[s("span",[t._v("Mes fiches")])])}],!1,null,null,null);y.options.__file="assets/vue/doctor/DashboardPage/MyPrescriptions.vue";var W=y.exports,S=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"kiv-block",class:{reduced:!t.$parent.myPatientsContent},attrs:{id:"my-patients"}},[s("button",{staticClass:"toggle-content",on:{click:function(e){t.$parent.myPatientsContent=!t.$parent.myPatientsContent}}},[s("i",{staticClass:"kiv-chevron-down icon-3"})]),t._v(" "),s("h2",[t._v("Mes Patients")]),t._v(" "),s("transition",{attrs:{name:"fade"}},[t.prescriProcess?s("div",{staticClass:"prescri-process-dialog"},[s("span",{staticClass:"step-num"},[s("i",{staticClass:"fas fa-folder-plus"}),t._v("Etape\n                "+t._s(t.$parent.prescriProcessWorksheetSelected?2:1)+"\n            ")]),t._v(" "),s("p",[t._v("Veuillez Sélectionner un patient")])]):t._e()]),t._v(" "),s("transition",{attrs:{name:"height"}},[t.$parent.myPatientsContent?s("div",[s("div",{staticClass:"primary-actions"},[s("div",{staticClass:"search"},[s("vs-input",{attrs:{"label-placeholder":"Filtrer par nom ou email"},on:{keyup:function(e){t.page=1}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._v(" "),s("div",[s("div",{staticClass:"btn-primary-action add"},[s("vs-tooltip",{scopedSlots:t._u([{key:"tooltip",fn:function(){return[t._v("\n                                Ajouter un patient\n                            ")]},proxy:!0}],null,!1,2558201810)},[s("vs-button",{staticClass:"btn-action add",attrs:{circle:"",floating:""},on:{click:function(e){t.modalAddPatient=!0}}},[s("plus-icon",{staticClass:"custom-class",attrs:{size:"3x"}})],1)],1)],1),t._v(" "),s("vs-dialog",{attrs:{width:"450px",loading:t.$parent.loadingAllPatients},model:{value:t.modalAddPatient,callback:function(e){t.modalAddPatient=e},expression:"modalAddPatient"}},[s("PatientAdd",{attrs:{doctor:t.doctor,allPatients:t.allPatients,loadingAllPatients:t.loadingAllPatients,csrfTokenAddPatient:t.csrfTokenAddPatient,csrfTokenCreatePatient:t.csrfTokenCreatePatient},on:{addPatient:t.addPatient,closeModalAddPatient:function(e){t.modalAddPatient=!1}}})],1)],1)]),t._v(" "),s("div",{staticClass:"patients-list"},[t.loadingDoctorPatients?t._e():s("div",t._l(t.getDoctorPatients,(function(e,a){return s("div",{key:a,staticClass:"patient-block"},[s("button",{staticClass:"remove-user",on:{click:function(s){return t.removePatient(e)}}},[s("i",{staticClass:"fas fa-user-minus"})]),t._v(" "),s("div",{staticClass:"patient-details"},[s("div",[s("vs-avatar",{staticClass:"avatar",attrs:{circle:"",size:"60"},on:{click:function(s){return t.redirectToPatientDashboard(e.id)}}},[s("img",{attrs:{src:e.avatarUrl?e.avatarUrl:"/img/avatar-default.svg",alt:"Avatar de "+e.firstname+" "+e.lastname}}),t._v(" "),e.birthdate?s("div",{staticClass:"age"},[t._v("\n                                        "+t._s(t.getAge(e.birthdate))+" ans\n                                    ")]):t._e()]),t._v(" "),s("div",{staticClass:"user-name"},[s("div",{staticClass:"name",on:{click:function(s){return t.redirectToPatientDashboard(e.id)}}},[e.firstname||e.lastname?s("span",[t._v("\n                                            "+t._s(e.firstname)+"\n                                            "+t._s(e.lastname)+"\n                                        ")]):s("span",[t._v("\n                                            "+t._s(e.email)+"\n                                        ")])]),t._v(" "),s("div",{staticClass:"mail",on:{click:function(s){return t.redirectToPatientDashboard(e.id)}}},[t._v("\n                                        "+t._s(e.email)+"\n                                    ")]),t._v(" "),e.worksheets.length?s("div",{staticClass:"prescriptions"},[s("h4",[s("span",[t._v(t._s(e.worksheets.length))]),t._v("\n                                            prescription"),e.worksheets.length>1?s("span",[t._v("s")]):t._e(),t._v("\n                                            :\n                                        ")]),t._v(" "),s("div",{staticClass:"\n                                                prescriptions-patient-list\n                                            "},t._l(e.worksheets,(function(t,e){return s("BtnChartWorksheetPartOfBody",{key:e,staticClass:"prescription",attrs:{worksheet:t}})})),1)]):t._e()])],1),t._v(" "),s("div",{staticClass:"btn-prescription-action",class:{active:t.prescriProcess,selected:t.$parent.prescriProcessPatientSelected&&t.$parent.prescriProcessPatientSelected.id===e.id}},[s("vs-button",{staticClass:"w-100",attrs:{loading:t.btnLoadingPatientPrescriProcessRedirect===e.id},on:{click:function(s){return t.prescriProcessPatientChoice(e)}}},[s("transition",{attrs:{name:"fade"}},[!t.prescriProcess&&!t.$parent.prescriProcessPatientSelected||t.$parent.prescriProcessPatientSelected&&t.$parent.prescriProcessPatientSelected.id!=e.id?s("span",[s("i",{staticClass:"fas fa-folder-plus"}),t._v("Prescrire")]):t._e(),t._v(" "),t.prescriProcess&&!t.$parent.prescriProcessPatientSelected?s("span",[s("i",{staticClass:"fas fa-folder-plus"}),t._v("Sélectionner")]):t._e(),t._v(" "),t.$parent.prescriProcessPatientSelected&&t.$parent.prescriProcessPatientSelected.id===e.id?s("span",[s("i",{staticClass:"fas fa-check-circle"}),t._v("Sélectionné")]):t._e()])],1)],1)]),t._v(" "),s("div",{staticClass:"account-infos"},[s("div",{staticClass:"status"},[e.addRequestDoctor&&e.isVerified?s("div",{staticClass:"status"},[s("div",{staticClass:"icon-active-status"}),t._v(" "),s("p",{staticClass:"text-status"},[t._v("Actif")])]):t._e(),t._v(" "),e.addRequestDoctor&&!e.isVerified?s("div",{staticClass:"status"},[s("div",{staticClass:"icon-inactive-status"}),t._v(" "),s("p",{staticClass:"text-status"},[t._v("Inactif")])]):t._e(),t._v(" "),!1===e.addRequestDoctor?s("div",{staticClass:"status"},[s("div",{staticClass:"icon-waiting-status"}),t._v(" "),s("p",{staticClass:"text-status"},[t._v("Attente")])]):t._e()]),t._v(" "),e.lastLoginAt?s("div",{staticClass:"last-login"},[s("span",[t._v("Dernière connexion :")]),t._v(" "),s("strong",[t._v(t._s(t.formatDate(e.lastLoginAt)))])]):t._e()])])})),0),t._v(" "),t.loadingDoctorPatients||t.getDoctorPatients.length||t.search?t._e():s("div",{staticClass:"not-found"},[s("p",[s("i",{staticClass:"fas fa-user-minus"}),t._v(" "),s("span",[t._v("Vous n'avez pas de patient")])])]),t._v(" "),t.loadingDoctorPatients||t.getDoctorPatients.length||!t.search?t._e():s("div",{staticClass:"not-found"},[s("p",[s("i",{staticClass:"fas fa-user-minus"}),t._v(" "),s("span",[t._v("Aucun patient n'a été trouvé avec\n                            "),t.search?s("span",[t._v('"'),s("strong",[t._v(t._s(t.search))]),t._v('"')]):t._e()])])]),t._v(" "),t.loadingDoctorPatients?s("div",[s("div",{staticClass:"loading loading-block patient-block"},[s("div",{staticClass:"patient-details"},[s("div",[s("div",{staticClass:"loading avatar"}),t._v(" "),s("div",{staticClass:"user-name"},[s("div",{staticClass:"loading name w-35"}),t._v(" "),s("div",{staticClass:"loading mail w-45"}),t._v(" "),s("div",{staticClass:"loading prescriptions w-25"})])]),t._v(" "),s("div",{staticClass:"loading btn-prescription-action"})]),t._v(" "),s("div",{staticClass:"account-infos"},[s("div",{staticClass:"loading status w-35"}),t._v(" "),s("div",{staticClass:"loading last-login w-45"})])]),t._v(" "),s("div",{staticClass:"loading loading-block patient-block"},[s("div",{staticClass:"patient-details"},[s("div",[s("div",{staticClass:"loading avatar"}),t._v(" "),s("div",{staticClass:"user-name"},[s("div",{staticClass:"loading name w-35"}),t._v(" "),s("div",{staticClass:"loading mail w-45"}),t._v(" "),s("div",{staticClass:"loading prescriptions w-25"})])]),t._v(" "),s("div",{staticClass:"loading btn-prescription-action"})]),t._v(" "),s("div",{staticClass:"account-infos"},[s("div",{staticClass:"loading status w-35"}),t._v(" "),s("div",{staticClass:"loading last-login w-45"})])]),t._v(" "),s("div",{staticClass:"loading loading-block patient-block"},[s("div",{staticClass:"patient-details"},[s("div",[s("div",{staticClass:"loading avatar"}),t._v(" "),s("div",{staticClass:"user-name"},[s("div",{staticClass:"loading name w-35"}),t._v(" "),s("div",{staticClass:"loading mail w-45"}),t._v(" "),s("div",{staticClass:"loading prescriptions w-25"})])]),t._v(" "),s("div",{staticClass:"loading btn-prescription-action"})]),t._v(" "),s("div",{staticClass:"account-infos"},[s("div",{staticClass:"loading status w-35"}),t._v(" "),s("div",{staticClass:"loading last-login w-45"})])]),t._v(" "),s("div",{staticClass:"loading loading-block patient-block"},[s("div",{staticClass:"patient-details"},[s("div",[s("div",{staticClass:"loading avatar"}),t._v(" "),s("div",{staticClass:"user-name"},[s("div",{staticClass:"loading name w-35"}),t._v(" "),s("div",{staticClass:"loading mail w-45"}),t._v(" "),s("div",{staticClass:"loading prescriptions w-25"})])]),t._v(" "),s("div",{staticClass:"loading btn-prescription-action"})]),t._v(" "),s("div",{staticClass:"account-infos"},[s("div",{staticClass:"loading status w-35"}),t._v(" "),s("div",{staticClass:"loading last-login w-45"})])]),t._v(" "),s("div",{staticClass:"loading loading-block patient-block"},[s("div",{staticClass:"patient-details"},[s("div",[s("div",{staticClass:"loading avatar"}),t._v(" "),s("div",{staticClass:"user-name"},[s("div",{staticClass:"loading name w-35"}),t._v(" "),s("div",{staticClass:"loading mail w-45"}),t._v(" "),s("div",{staticClass:"loading prescriptions w-25"})])]),t._v(" "),s("div",{staticClass:"loading btn-prescription-action"})]),t._v(" "),s("div",{staticClass:"account-infos"},[s("div",{staticClass:"loading status w-35"}),t._v(" "),s("div",{staticClass:"loading last-login w-45"})])]),t._v(" "),s("div",{staticClass:"loading loading-block patient-block"},[s("div",{staticClass:"patient-details"},[s("div",[s("div",{staticClass:"loading avatar"}),t._v(" "),s("div",{staticClass:"user-name"},[s("div",{staticClass:"loading name w-35"}),t._v(" "),s("div",{staticClass:"loading mail w-45"}),t._v(" "),s("div",{staticClass:"loading prescriptions w-25"})])]),t._v(" "),s("div",{staticClass:"loading btn-prescription-action"})]),t._v(" "),s("div",{staticClass:"account-infos"},[s("div",{staticClass:"loading status w-35"}),t._v(" "),s("div",{staticClass:"loading last-login w-45"})])])]):t._e()]),t._v(" "),t.doctorPatients.length>t.max?s("div",{staticClass:"pagination"},[s("vs-pagination",{attrs:{"buttons-dotted":"",length:t.getLength(t.getSearch(t.doctorPatients,t.search),t.max)},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),t._v(" "),s("div",{staticClass:"count-page"},[t._v("\n                    Page : "),s("b",[t._v(t._s(t.page))])])],1):t._e()]):t._e()]),t._v(" "),s("vs-dialog",{model:{value:t.modalConfirmRemovePatient,callback:function(e){t.modalConfirmRemovePatient=e},expression:"modalConfirmRemovePatient"}},[s("p",{staticClass:"modal-confirm-text"},[t._v("Confirmer la suppression de")]),t._v(" "),s("div",{staticClass:"modal-confirm-detail remove-item"},[s("div",{staticClass:"modal-confirm-icon remove-item"},[s("i",{staticClass:"fas fa-user-minus"})]),t._v(" "),s("p",[s("span",[t._v("\n                    "+t._s(t.getUserName(t.removePatientDetails))+"\n                ")])])]),t._v(" "),s("p",{staticClass:"modal-confirm-text"},[t._v("de votre liste.")]),t._v(" "),s("div",{staticClass:"modal-confirm-buttons"},[s("vs-button",{staticClass:"secondary",on:{click:function(e){t.modalConfirmRemovePatient=!1}}},[t._v("\n                Annuler\n            ")]),t._v(" "),s("vs-button",{class:{disabled:t.btnLoadingValidRemovePatient},attrs:{loading:t.btnLoadingValidRemovePatient},on:{click:t.validRemovePatient}},[t._v("\n                Confirmer\n            ")])],1)])],1)};S._withStripped=!0;var x=s(376),T=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h2",[t._v("Ajout d'un patient")]),t._v(" "),s("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.hideSelectBox,expression:"hideSelectBox"}],staticClass:"select-filter",class:{loading:t.loadingAllPatients}},[t.loadingAllPatients?t._e():s("div",[s("div",{directives:[{name:"show",rawName:"v-show",value:t.userSelected.email,expression:"userSelected.email"}],staticClass:"user-selected user",on:{click:t.resetSelect}},[s("vs-avatar",{staticClass:"avatar",attrs:{circle:"",size:"35"}},[s("img",{attrs:{src:t.userSelected.avatarUrl?t.userSelected.avatarUrl:"/img/avatar-default.svg",alt:"Avatar de "+t.userSelected.firstname+" "+t.userSelected.lastname}})]),t._v(" "),s("div",{staticClass:"text"},[s("div",{staticClass:"name"},[t._v("\n                        "+t._s(t.getUserName(t.userSelected))+"\n                        "),s("span",{directives:[{name:"show",rawName:"v-show",value:t.userSelected.birthdate,expression:"userSelected.birthdate"}],staticClass:"birthdate"},[t._v("\n                            "+t._s(t.getAge(t.userSelected.birthdate))+"\n                            ans")])]),t._v(" "),s("div",{staticClass:"email"},[t._v("\n                        "+t._s(t.userSelected.email)+"\n                    ")])])],1),t._v(" "),s("input",{directives:[{name:"show",rawName:"v-show",value:!t.userSelected.email,expression:"!userSelected.email"},{name:"model",rawName:"v-model",value:t.filter,expression:"filter"}],class:{"b-r-b-zero":t.selectBox,"placeholder-gray":t.selectBox},attrs:{id:"user-choice-select",placeholder:t.selectBox?"Recherchez un patient kivid":"Sélectionnez un patient kivid",autocomplete:"off"},domProps:{value:t.filter},on:{click:function(e){t.selectBox=!0},keyup:t.selectBoxWithThrottle,input:function(e){e.target.composing||(t.filter=e.target.value)}}}),t._v(" "),s("div",{staticClass:"arrow-toggle-box",class:{active:t.selectBox},on:{click:t.toggleSelectBox}},[s("i",{staticClass:"vs-icon-arrow"})]),t._v(" "),s("transition",{attrs:{name:"height"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.selectBox,expression:"selectBox"}],staticClass:"select-box",on:{click:t.focusInputSelect}},[t.allPatientsFiltered.length?s("ul",t._l(t.allPatientsFiltered,(function(e,a){return s("li",{key:a},[s("div",{staticClass:"user",on:{click:function(s){return t.selectUser(e)}}},[s("vs-avatar",{staticClass:"avatar",attrs:{circle:"",size:"35"}},[s("img",{attrs:{src:e.avatarUrl?e.avatarUrl:"/img/avatar-default.svg",alt:"Avatar de "+e.firstname+" "+e.lastname}})]),t._v(" "),s("div",{staticClass:"text"},[s("div",{staticClass:"name"},[t._v("\n                                        "+t._s(t.getUserName(e))+"\n                                        "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.birthdate,expression:"patient.birthdate"}],staticClass:"birthdate"},[t._v("\n                                            "+t._s(t.getAge(e.birthdate))+"\n                                            ans")])]),t._v(" "),s("div",{staticClass:"email"},[t._v("\n                                        "+t._s(e.email)+"\n                                    ")])])],1)])})),0):t._e(),t._v(" "),!t.allPatientsFiltered.length&&t.filter?s("div",[s("p",{staticClass:"not-found"},[s("i",{staticClass:"fas fa-users-slash"}),t._v(" "),s("span",[t._v("\n                                Aucun patient n'a été trouvé avec \""),s("strong",[t._v(t._s(t.filter))]),t._v('"\n                            ')])])]):t._e(),t._v(" "),t.allPatientsFiltered.length||t.filter?t._e():s("div",[s("p",{staticClass:"not-found"},[s("i",{staticClass:"fas fa-users-slash"}),t._v("\n                            Aucun patient n'a été trouvé\n                        ")])])])])],1)]),t._v(" "),s("div",{staticClass:"btn-container",class:{disabled:t.btnLoadingValidAddPatient}},[s("vs-button",{staticClass:"w-100",attrs:{loading:t.btnLoadingValidAddPatient,disabled:!t.userSelected.email||t.btnLoadingValidAddPatient},on:{click:t.validAddPatient}},[t._v("Valider la sélection")])],1),t._v(" "),t._m(0),t._v(" "),s("div",{staticClass:"create-patient-form"},[s("vs-select",{attrs:{placeholder:"Civilité"},model:{value:t.createPatientDetails.gender,callback:function(e){t.$set(t.createPatientDetails,"gender",e)},expression:"createPatientDetails.gender"}},[s("vs-option",{attrs:{label:"Inconnu",value:"0"}},[t._v("Inconnu")]),t._v(" "),s("vs-option",{attrs:{label:"M.",value:"1"}},[t._v("M.")]),t._v(" "),s("vs-option",{attrs:{label:"Mme",value:"2"}},[t._v("Mme")])],1),t._v(" "),s("vs-input",{attrs:{"label-placeholder":"Prénom",type:"text"},model:{value:t.createPatientDetails.firstname,callback:function(e){t.$set(t.createPatientDetails,"firstname",e)},expression:"createPatientDetails.firstname"}}),t._v(" "),s("vs-input",{attrs:{"label-placeholder":"Nom",type:"text"},model:{value:t.createPatientDetails.lastname,callback:function(e){t.$set(t.createPatientDetails,"lastname",e)},expression:"createPatientDetails.lastname"}}),t._v(" "),s("vs-input",{class:{error:t.validationMessage.email&&t.createPatientDetails.email},attrs:{danger:null!=t.validationMessage.email,"label-placeholder":"Email",autocomplete:"email",type:"email","icon-after":""},on:{keyup:t.validationEmail},scopedSlots:t._u([t.validationMessage.email&&t.createPatientDetails.email?{key:"icon",fn:function(){return[s("i",{staticClass:"kiv-error error icon-24"})]},proxy:!0}:null,t.validationMessage.email&&t.createPatientDetails.email?{key:"message-danger",fn:function(){return[t._v("\n                "+t._s(t.validationMessage.email)+"\n            ")]},proxy:!0}:null],null,!0),model:{value:t.createPatientDetails.email,callback:function(e){t.$set(t.createPatientDetails,"email",e)},expression:"createPatientDetails.email"}})],1),t._v(" "),s("div",{staticClass:"btn-container",class:{disabled:t.btnLoadingValidCreatePatient}},[s("vs-button",{staticClass:"w-100",attrs:{disabled:t.validationMessage.email||!t.createPatientDetails.email||t.btnLoadingValidCreatePatient,loading:t.btnLoadingValidCreatePatient},on:{click:t.validCreatePatient}},[t._v("Valider la création")])],1)])};T._withStripped=!0;var D=s(2649);function A(t){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var R={name:"PatientAdd",props:{doctor:Object,allPatients:Array,loadingAllPatients:Boolean,csrfTokenAddPatient:String,csrfTokenCreatePatient:String},directives:{ClickOutside:s.n(D)()},data:function(){return{btnLoadingValidAddPatient:!1,btnLoadingValidCreatePatient:!1,createPatientDetails:{firstname:"",lastname:"",email:"",gender:""},validationMessage:{email:null},userSelected:{email:null,avatarUrl:null,firstname:null,lastname:null,gender:null,birthdate:null},filter:"",selectBox:!1,selectInput:null}},computed:{allPatientsFiltered:function(){return n.Z.getSearch(this.allPatients.filter((function(t){return!t.doctor})),this.filter)}},methods:{validAddPatient:function(){var t=this;this.btnLoadingValidAddPatient=!0,this.axios.post("/doctor/".concat(this.doctor.id,"/add/patient"),{_token:this.csrfTokenAddPatient,patientId:this.userSelected.id}).then((function(e){n.Z.openSuccessNotification("Ajout du patient",e.data),t.userSelected.addRequestDoctor=!1,t.userSelected.doctor=t.doctor,t.$emit("addPatient",t.userSelected),t.btnLoadingValidAddPatient=!1,t.$emit("closeModalAddPatient",!0)})).catch((function(e){var s="object"===A(e.response.data)?e.response.data.detail:e.response.data;n.Z.openErrorNotification("Erreur",s),t.btnLoadingValidAddPatient=!1,t.$emit("closeModalAddPatient",!0)}))},validCreatePatient:function(){var t=this;this.btnLoadingValidCreatePatient=!0,this.axios.post("/doctor/".concat(this.doctor.id,"/create/patient"),{_token:this.csrfTokenCreatePatient,firstname:this.createPatientDetails.firstname,lastname:this.createPatientDetails.lastname,gender:this.createPatientDetails.gender&&"0"!=this.createPatientDetails.gender?"1"===this.createPatientDetails.gender?"male":"female":"",email:this.createPatientDetails.email}).then((function(e){n.Z.openSuccessNotification("Création du patient",e.data.message),t.$emit("addPatient",e.data.patient),t.createPatientDetails={firstname:"",lastname:"",email:"",gender:""},t.btnLoadingValidCreatePatient=!1,t.$emit("closeModalAddPatient",!0)})).catch((function(e){var s="object"===A(e.response.data)?e.response.data.detail:e.response.data;n.Z.openErrorNotification("Erreur",s),t.btnLoadingValidCreatePatient=!1,t.$emit("closeModalAddPatient",!0)}))},validationEmail:function(){this.validationMessage.email=null;/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(this.createPatientDetails.email).toLowerCase())||(this.validationMessage.email="Merci d'entrer un email valide.")},getAge:function(t){return n.Z.generateAgeFromDateOfBirth(t)},toggleSelectBox:function(){this.selectBox=!this.selectBox,this.userSelected&&this.resetSelect(),this.selectBox&&this.focusInputSelect()},hideSelectBox:function(){this.selectBox=!1},selectUser:function(t){this.userSelected=t,this.hideSelectBox()},resetSelect:function(){var t=this;this.userSelected={email:null,avatarUrl:null,firstname:null,lastname:null,gender:null,birthdate:null},setTimeout((function(){t.selectInput=document.getElementById("user-choice-select"),t.selectBox=!0,t.focusInputSelect()}),100)},focusInputSelect:function(){this.selectInput.focus()},getUserName:function(t){return n.Z.getUserName(t)},selectBoxWithThrottle:function(){var t=this;this.selectBoxThrottle||(this.selectBoxThrottle=!0,this.selectBox=!0,console.log("selectBox"),setTimeout((function(){t.selectBoxThrottle=!1}),1e3))}},mounted:function(){this.selectInput=document.getElementById("user-choice-select")}},$=(0,l.Z)(R,T,[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"divider"},[s("div",{staticClass:"divider-text"},[t._v("ou")])])}],!1,null,"79b63c6c",null);$.options.__file="assets/vue/doctor/DashboardPage/MyPatients/PatientAdd.vue";var L=$.exports;function B(t){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var E={props:{doctor:Object,csrfTokenAddPatient:String,csrfTokenRemovePatient:String,csrfTokenCreatePatient:String,prescriProcess:Boolean,btnLoadingPatientPrescriProcessRedirect:Number},components:{BtnChartWorksheetPartOfBody:x.Z,PatientAdd:L,PlusIcon:g.pOD},data:function(){return{search:"",page:1,max:5,doctorPatients:[],allPatients:[],modalAddPatient:!1,loadingDoctorPatients:!1,loadingAllPatients:!1,modalConfirmRemovePatient:!1,removePatientDetails:{},btnLoadingValidRemovePatient:!1}},computed:{getDoctorPatients:function(){return this.getPage(this.sortByLastLogin(n.Z.getSearch(this.doctorPatients,this.search,"doctor")),this.page,this.max)},getAllPatients:function(){return this.allPatients}},methods:{prescriProcessPatientChoice:function(t){this.$emit("prescriProcessPatientChoice",t)},removePatient:function(t){return this.removePatientDetails=t,this.modalConfirmRemovePatient=!this.modalConfirmRemovePatient},validRemovePatient:function(){var t=this;this.btnLoadingValidRemovePatient=!0,this.axios.post("/doctor/".concat(this.doctor.id,"/remove/patient"),{_token:this.csrfTokenRemovePatient,patientId:this.removePatientDetails.id}).then((function(e){if(n.Z.openSuccessNotification("Suppression du patient",e.data),t.doctorPatients.splice(t.doctorPatients.indexOf(t.removePatientDetails),1),t.allPatients.length){var s=t.allPatients.find((function(e){return e.id===t.removePatientDetails.id}));s.doctor=null,s.addRequestDoctor=null}t.btnLoadingValidRemovePatient=!1,t.modalConfirmRemovePatient=!1})).catch((function(e){var s="object"===B(e.response.data)?e.response.data.detail:e.response.data;n.Z.openErrorNotification("Erreur",s),t.btnLoadingValidRemovePatient=!1,t.modalConfirmRemovePatient=!1}))},addPatient:function(t){this.doctorPatients.push(t)},getAge:function(t){return n.Z.generateAgeFromDateOfBirth(t)},formatDate:function(t){return f()(t).format("DD/MM/YYYY")},getPage:function(t,e,s){return n.Z.getPage(t,e,s)},getLength:function(t,e){return n.Z.getLength(t,e)},getSearch:function(t,e){return n.Z.getSearch(t,e)},redirectToPatientDashboard:function(t){document.location.href="/doctor/".concat(this.doctor.id,"/voir/patient/").concat(t)},sortByLastLogin:function(t){return t.sort((function(t,e){return new Date(e.lastLoginAt)-new Date(t.lastLoginAt)})),t},sortByCreatedAt:function(t){return t.sort((function(t,e){return new Date(e.createdAt)-new Date(t.createdAt)})),t},getUserName:function(t){return n.Z.getUserName(t)}},created:function(){var t=this;this.loadingDoctorPatients=!0,this.axios.get("/doctor/".concat(this.doctor.id,"/get/patients")).then((function(e){t.doctorPatients=e.data,t.doctorPatients.forEach((function(e){e.worksheets&&(e.worksheets=t.sortByCreatedAt(e.worksheets))})),t.loadingDoctorPatients=!1})).catch((function(t){var e="object"===B(t.response.data)?t.response.data.detail:t.response.data;console.error(e)})),this.loadingAllPatients=!0,this.axios.get("/doctor/".concat(this.doctor.id,"/get/all/patients")).then((function(e){t.allPatients=e.data,t.loadingAllPatients=!1})).catch((function(t){var e="object"===B(t.response.data)?t.response.data.detail:t.response.data;console.error(e)}))}},N=(0,l.Z)(E,S,[],!1,null,null,null);function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function I(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function M(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?I(Object(s),!0).forEach((function(e){V(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):I(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function V(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}N.options.__file="assets/vue/doctor/DashboardPage/MyPatients.vue";var Z={components:{MyDashboardNotifications:v,MyWorksheetTemplates:k,MyPrescriptions:W,MyPatients:N.exports},data:function(){return{doctor:null,myDBNotificationsContent:!0,myWorksheetTemplatesContent:!0,myPrescriptionsContent:!0,myPatientsContent:!0,csrfTokenAddPatient:null,csrfTokenRemovePatient:null,csrfTokenCreatePatient:null,csrfTokenRemoveWorksheet:null,loadingAllWorksheets:!1,loadingDoctorWorksheets:!1,allWorksheets:[],doctorWorksheets:[],tagsFromExercises:[],activeTab:1,prescriProcess:!1,prescriProcessPatient:!1,prescriProcessPatientSelected:null,prescriProcessWorksheet:!1,prescriProcessWorksheetSelected:null,btnLoadingPatientPrescriProcessRedirect:null,btnLoadingWorksheetPrescriProcessRedirect:null}},computed:{getWorksheetTemplates:function(){return this.sortByCreatedAt(this.allWorksheets.filter((function(t){return!t.patient})))},getDoctorPrescriptions:function(){return this.sortByCreatedAt(this.doctorWorksheets.filter((function(t){return t.patient})))}},methods:{setPrescriProcessWorksheetChoice:function(t){if(this.prescriProcess||this.startPrescriProcess(),this.prescriProcessWorksheetSelected=t,this.prescriProcessWorksheet=!1,this.prescriProcessPatientSelected){var e=this.prescriProcessWorksheetSelected.id?this.prescriProcessWorksheetSelected.id:0;this.btnLoadingPatientPrescriProcessRedirect=this.prescriProcessPatientSelected.id,this.btnLoadingWorksheetPrescriProcessRedirect=e,document.location.href="/doctor/".concat(this.doctor.id,"/fiche/creation/").concat(e,"/").concat(this.prescriProcessPatientSelected.id)}else{var s=document.getElementById("my-patients").getBoundingClientRect().top+window.pageYOffset+-100;window.scrollTo({top:s,behavior:"smooth"}),this.prescriProcessPatient=!0}},setPrescriProcessPatientChoice:function(t){if(this.prescriProcess||this.startPrescriProcess(),this.prescriProcessPatientSelected=t,this.prescriProcessPatient=!1,this.prescriProcessWorksheetSelected){var e=this.prescriProcessWorksheetSelected.id?this.prescriProcessWorksheetSelected.id:0;this.btnLoadingPatientPrescriProcessRedirect=this.prescriProcessPatientSelected.id,this.btnLoadingWorksheetPrescriProcessRedirect=e,document.location.href="/doctor/".concat(this.doctor.id,"/fiche/creation/").concat(e,"/").concat(this.prescriProcessPatientSelected.id)}else{var s=document.getElementById("my-worksheets").getBoundingClientRect().top+window.pageYOffset+-100;window.scrollTo({top:s,behavior:"smooth"}),this.activeTab=2,this.prescriProcessWorksheet=!0}},startPrescriProcess:function(){this.prescriProcess=!0,this.prescriProcessWorksheet=!0,this.myWorksheetTemplatesContent=!0,this.myPatientsContent=!0,this.activeTab=2},stopPrescriProcess:function(){this.prescriProcess=!1,this.prescriProcessWorksheet=!1,this.prescriProcessPatient=!1,this.prescriProcessWorksheetSelected=null,this.prescriProcessPatientSelected=null,this.btnLoadingPatientPrescriProcessRedirect=null,this.btnLoadingWorksheetPrescriProcessRedirect=null,this.activeTab=1},sortByCreatedAt:function(t){return t.sort((function(t,e){return new Date(e.createdAt)-new Date(t.createdAt)})),t},onResize:function(){window.innerWidth>576&&(this.myDBNotificationsContent=!0,this.myWorksheetTemplatesContent=!0,this.myPrescriptionsContent=!0,this.myPatientsContent=!0)}},created:function(){var t=this;a.default.prototype.$vs=this.$vs,document.body.classList.add("fuzzy-balls"),window.addEventListener("resize",this.onResize);var e=JSON.parse(document.getElementById("vueData").innerHTML);this.doctor=e.doctor,this.csrfTokenAddPatient=e.csrfTokenAddPatient,this.csrfTokenRemovePatient=e.csrfTokenRemovePatient,this.csrfTokenCreatePatient=e.csrfTokenCreatePatient,this.csrfTokenRemoveWorksheet=e.csrfTokenRemoveWorksheet;var s=window.location.search;"ws"===new URLSearchParams(s).get("tab")&&(this.activeTab=2),this.loadingDoctorWorksheets=!0,this.axios.get("/doctor/".concat(this.doctor.id,"/get/worksheets")).then((function(e){t.doctorWorksheets=e.data.map((function(t){return M(M({},t),{},{worksheetTotalProgression:null,currentWorksheetSession:null,totalWorksheetSessions:null,totalCompletedWorksheetSessions:null})})),t.loadingDoctorWorksheets=!1})).catch((function(t){var e="object"===O(t.response.data)?t.response.data.detail:t.response.data;console.error(e)})),this.loadingAllWorksheets=!0,this.axios.get("/doctor/".concat(this.doctor.id,"/get/all/worksheets")).then((function(e){t.allWorksheets=e.data,t.tagsFromExercises=n.Z.generateTagsFromExercises(t.allWorksheets),t.loadingAllWorksheets=!1})).catch((function(t){var e="object"===O(t.response.data)?t.response.data.detail:t.response.data;console.error(e)}))},beforeDestroy:function(){window.removeEventListener("resize",this.onResize)}},j=(0,l.Z)(Z,i,[],!1,null,null,null);j.options.__file="assets/vue/doctor/DashboardPage.vue";var z=j.exports,F=s(9669),U=s.n(F),Y=s(2346);s(1370);a.default.use(Y.Z,U()),new a.default({render:function(t){return t(z)}}).$mount("#vue")},3111:function(t,e,s){var a=s(4488),i=s(1340),n="["+s(1361)+"]",o=RegExp("^"+n+n+"*"),r=RegExp(n+n+"*$"),c=function(t){return function(e){var s=i(a(e));return 1&t&&(s=s.replace(o,"")),2&t&&(s=s.replace(r,"")),s}};t.exports={start:c(1),end:c(2),trim:c(3)}},1361:function(t){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},9653:function(t,e,s){"use strict";var a=s(9781),i=s(7854),n=s(4705),o=s(1320),r=s(6656),c=s(4326),l=s(9587),d=s(2190),v=s(7593),h=s(7293),p=s(30),u=s(8006).f,f=s(1236).f,g=s(3070).f,m=s(3111).trim,_="Number",C=i.Number,k=C.prototype,P=c(p(k))==_,b=function(t){if(d(t))throw TypeError("Cannot convert a Symbol value to a number");var e,s,a,i,n,o,r,c,l=v(t,"number");if("string"==typeof l&&l.length>2)if(43===(e=(l=m(l)).charCodeAt(0))||45===e){if(88===(s=l.charCodeAt(2))||120===s)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:a=2,i=49;break;case 79:case 111:a=8,i=55;break;default:return+l}for(o=(n=l.slice(2)).length,r=0;r<o;r++)if((c=n.charCodeAt(r))<48||c>i)return NaN;return parseInt(n,a)}return+l};if(n(_,!C(" 0o1")||!C("0b1")||C("+0x1"))){for(var w,y=function(t){var e=arguments.length<1?0:t,s=this;return s instanceof y&&(P?h((function(){k.valueOf.call(s)})):c(s)!=_)?l(new C(b(e)),s,y):b(e)},W=a?u(C):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),S=0;W.length>S;S++)r(C,w=W[S])&&!r(y,w)&&g(y,w,f(C,w));y.prototype=k,k.constructor=y,o(i,_,y)}},376:function(t,e,s){"use strict";s.d(e,{Z:function(){return o}});var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("vs-button",{staticClass:"btn-chart part-of-body",attrs:{size:"mini"}},["pied"===t.worksheet.partOfBody.icon?a("img",{staticClass:"icon-pied",attrs:{src:s(1351),alt:"Icone Pied"}}):t._e(),t._v(" "),"jambe"===t.worksheet.partOfBody.icon?a("img",{staticClass:"icon-jambe",attrs:{src:s(8189),alt:"Icone Jambe"}}):t._e(),t._v(" "),"bras"===t.worksheet.partOfBody.icon?a("img",{staticClass:"icon-bras",attrs:{src:s(7932),alt:"Icone Bras"}}):t._e(),t._v(" "),"main"===t.worksheet.partOfBody.icon?a("img",{staticClass:"icon-main",attrs:{src:s(6098),alt:"Icone Main"}}):t._e(),t._v(" "),"epaule"===t.worksheet.partOfBody.icon?a("img",{staticClass:"icon-epaule",attrs:{src:s(2890),alt:"Icone Épaule"}}):t._e(),t._v(" "),"dos"===t.worksheet.partOfBody.icon?a("img",{staticClass:"icon-dos",attrs:{src:s(6910),alt:"Icone Dos"}}):t._e(),t._v(" "),"cervicales"===t.worksheet.partOfBody.icon?a("img",{staticClass:"icon-cervicales",attrs:{src:s(1135),alt:"Icone Cervicales"}}):t._e(),t._v(" "),"lombaires"===t.worksheet.partOfBody.icon?a("img",{staticClass:"icon-lombaires",attrs:{src:s(2894),alt:"Icone Lombaires"}}):t._e(),t._v(" "),"thoracique"===t.worksheet.partOfBody.icon?a("img",{staticClass:"icon-thoracique",attrs:{src:s(4114),alt:"Icone Thoracique"}}):t._e(),t._v("\n    "+t._s(t.worksheet.title.length>20?t.worksheet.title.substring(0,20)+"...":t.worksheet.title)+"\n")])};a._withStripped=!0;var i={props:{worksheet:Object}},n=(0,s(1900).Z)(i,a,[],!1,null,null,null);n.options.__file="assets/vue/components/BtnChartWorksheetPartOfBody.vue";var o=n.exports},9402:function(t,e,s){"use strict";t.exports=s.p+"images/hand.5b877b0c.svg"}},function(t){t.O(0,[429,247,912,900],(function(){return e=9404,t(t.s=e);var e}));t.O()}]);