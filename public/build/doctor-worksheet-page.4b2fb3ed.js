"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[459],{154:function(e,t,s){var i=s(538),o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container",attrs:{id:"worksheet"}},[s("header",[e.loading?s("div",{staticClass:"loading-block"},[e._m(0),e._v(" "),s("div",{staticClass:"loading-gray part-of-body"})]):s("div",[e.patient?s("div",{staticClass:"prescri-for-patient-content"},[s("i",{staticClass:"kiv-arrow-left icon-31",on:{click:function(t){return e.rederictToDashboard()}}}),e._v(" "),s("div",{staticClass:"prescri-for-patient"},[e._m(1),e._v(" "),s("vs-avatar",{staticClass:"user-avatar",attrs:{size:"26",circle:""}},[s("img",{attrs:{src:e.patient.avatarUrl?e.patient.avatarUrl:"/img/avatar-default.svg",alt:"Avatar de "+e.patient.firstname+" "+e.patient.lastname}})]),e._v(" "),s("div",{staticClass:"user-name"},[s("div",[e._v("\n                            "+e._s(e.getUserName(e.patient))+"\n                        ")])])],1)]):e._e(),e._v(" "),"voir"===e.action?s("div",{staticClass:"title-view"},[s("div",{staticClass:"title"},[s("i",{staticClass:"kiv-arrow-left icon-31",class:{hidden:e.patient},on:{click:function(t){return e.rederictToDashboard()}}}),e._v(" "),s("h1",[e._v(e._s(e.getWorksheet.title))])]),e._v(" "),e.getWorksheet.partOfBody?s("TagPartOfBody",{attrs:{partOfBody:e.getWorksheet.partOfBody}}):e._e()],1):s("div",{staticClass:"title"},[s("i",{staticClass:"kiv-arrow-left icon-31",class:{hidden:e.patient},on:{click:function(t){return e.rederictToDashboard()}}}),e._v(" "),s("vs-input",{attrs:{"label-placeholder":"Titre de la fiche",type:"text"},on:{keyup:function(t){e.titleIsEmptyMessage=null}},scopedSlots:e._u([e.titleIsEmptyMessage?{key:"message-danger",fn:function(){return[e._v("\n                        "+e._s(e.titleIsEmptyMessage)+"\n                    ")]},proxy:!0}:null],null,!0),model:{value:e.worksheet.title,callback:function(t){e.$set(e.worksheet,"title",t)},expression:"worksheet.title"}})],1),e._v(" "),"voir"!==e.action?s("div",{staticClass:"worksheet-params"},[s("div",{staticClass:"worksheet-details",class:{disabled:"edition"===e.action&&e.checkIfWorksheetSessionsExist}},["edition"===e.action&&e.checkIfWorksheetSessionsExist?s("div",{staticClass:"avert-sessions-start"},[s("i",{staticClass:"kiv-info icon-17"}),e._v(" "),s("p",[e._v("\n                            Vous ne pouvez plus modifier la durée de la\n                            prescription car le patient a déjà démarré ses\n                            sessions.\n                        ")])]):e._e(),e._v(" "),s("div",{staticClass:"worksheet-timing-perweek"},[s("i",{staticClass:"kiv-calendar icon-10"}),e._v(" "),s("vs-input",{attrs:{id:"perWeek","label-placeholder":"X par sem. (max: 7)",type:"number",min:"1",max:"7"},on:{blur:function(t){return e.checkIfDurationValueIsEmptyOrNull(e.worksheet.perWeek,t)}},model:{value:e.worksheet.perWeek,callback:function(t){e.$set(e.worksheet,"perWeek",t)},expression:"worksheet.perWeek"}})],1),e._v(" "),s("div",{staticClass:"worksheet-timing-perday"},[s("i",{staticClass:"kiv-calendar icon-10"}),e._v(" "),s("vs-input",{attrs:{id:"perDay","label-placeholder":"X par jour (max: 3)",type:"number",min:"1",max:"3"},on:{blur:function(t){return e.checkIfDurationValueIsEmptyOrNull(e.worksheet.perDay,t)}},model:{value:e.worksheet.perDay,callback:function(t){e.$set(e.worksheet,"perDay",t)},expression:"worksheet.perDay"}})],1),e._v(" "),s("div",{staticClass:"worksheet-period"},[s("i",{staticClass:"kiv-clock icon-11"}),e._v(" "),s("vs-input",{attrs:{id:"duration","label-placeholder":"Durée en sem. (max: 52)",type:"number",min:"1",max:"52"},on:{blur:function(t){return e.checkIfDurationValueIsEmptyOrNull(e.worksheet.duration,t)}},model:{value:e.worksheet.duration,callback:function(t){e.$set(e.worksheet,"duration",t)},expression:"worksheet.duration"}})],1)]),e._v(" "),s("div",{staticClass:"select-filter-block"},[s("SelectPartOfBody",{attrs:{partOfBody:e.worksheet.partOfBody},on:{partOfBodySelected:e.setPartOfBody,partOfBodyReset:e.resetPoB}}),e._v(" "),e.partOfBodyIsEmptyMessage?s("div",{staticClass:"error-mess"},[e._v("\n                        "+e._s(e.partOfBodyIsEmptyMessage)+"\n                    ")]):e._e()],1)]):e._e()])]),e._v(" "),s("main",[s("section",{class:{"no-mt":"voir"===e.action},attrs:{id:"exercises-playlist"}},[s("ExercisesPlaylist",{attrs:{doctor:e.doctor,loading:e.loading,action:e.action,worksheet:e.getWorksheet,exercises:e.getExercises,loadingVideos:e.loadingVideos,videos:e.videos,csrfTokenRemoveExercise:e.csrfTokenRemoveExercise}})],1)]),e._v(" "),s("div",{staticClass:"btn-valid",class:{disabled:e.btnLoadingValidEditWorksheet||e.btnLoadingValidCreateWorksheet||e.loading}},["edition"===e.action?s("vs-button",{attrs:{loading:e.btnLoadingValidEditWorksheet},on:{click:e.validEdit}},[s("i",{staticClass:"fas fa-check-circle"}),e._v("\n            Valider les modifications\n        ")]):e._e(),e._v(" "),"creation"!==e.action||e.patient?e._e():s("vs-button",{attrs:{loading:e.btnLoadingValidCreateWorksheet},on:{click:e.validCreate}},[s("i",{staticClass:"fas fa-check-circle"}),e._v("\n            Créer la fiche\n        ")]),e._v(" "),"creation"===e.action&&e.patient?s("vs-button",{attrs:{loading:e.btnLoadingValidCreateWorksheet},on:{click:e.validCreate}},[s("i",{staticClass:"fas fa-check-circle"}),e._v("\n            Créer la prescription\n        ")]):e._e()],1)])};o._withStripped=!0;s(2222),s(1249),s(2526),s(1817),s(1539),s(2165),s(6992),s(8783),s(3948),s(7941),s(7327),s(5003),s(4747),s(9337);var a=s(4098),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"exercises-list"},[e.loading?s("div",[e._m(0),e._v(" "),e._m(1),e._v(" "),e._m(2)]):s("div",e._l(e.getExercises,(function(t,i){return s("div",{key:i,staticClass:"exercise"},[s("div",{staticClass:"thumbnail-wrapper"},["voir"!==e.action?s("div",{staticClass:"btns-arrow"},[0!=t.position?s("vs-button",{attrs:{circle:"",icon:""},on:{click:function(s){return e.upPosition(t)}}},[s("i",{staticClass:"fas fa-sort-up"})]):e._e(),e._v(" "),t.position!=e.getExercises.length-1?s("vs-button",{attrs:{circle:"",icon:""},on:{click:function(s){return e.downPosition(t)}}},[s("i",{staticClass:"fas fa-sort-down"})]):e._e()],1):e._e(),e._v(" "),s("div",{staticClass:"btn-playlist"},[s("vs-button",{on:{click:function(s){return e.openVideoPlayer(t)}}},[s("span",[e._v(" Voir")])])],1),e._v(" "),s("div",{staticClass:"thumbnail",style:{backgroundImage:"url('"+t.video.thumbnailUrl+"')"}})]),e._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"input-h2"},[s("h2",[s("span",[e._v(e._s(t.video.name))])]),e._v(" "),"voir"!==e.action?s("button",{staticClass:"remove-exercise",on:{click:function(s){return e.removeExercise(t)}}},[s("i",{staticClass:"fas fa-trash"})]):e._e()]),e._v(" "),"voir"!==e.action?s("div",{staticClass:"details"},[s("div",{staticClass:"series-reps"},[s("div",{staticClass:"series"},[s("i",{staticClass:"kiv-series icon-18"}),e._v(" "),s("vs-input",{attrs:{"label-placeholder":"Nb de séries",type:"number",min:"1"},on:{blur:function(s){return e.checkIfValueIsEmptyOrNull(t)}},model:{value:t.numberOfSeries,callback:function(s){e.$set(t,"numberOfSeries",s)},expression:"exercise.numberOfSeries"}})],1),e._v(" "),s("div",{staticClass:"reps"},[s("i",{staticClass:"kiv-reps icon-19"}),e._v(" "),s("vs-input",{attrs:{"label-placeholder":"Nb de répétitions",type:"number",min:"1"},on:{blur:function(s){return e.checkIfValueIsEmptyOrNull(t)}},model:{value:t.numberOfRepetitions,callback:function(s){e.$set(t,"numberOfRepetitions",s)},expression:"exercise.numberOfRepetitions"}})],1)])]):e._e(),e._v(" "),"voir"!==e.action?s("div",{staticClass:"options"},[s("div",{staticClass:"option",class:{active:t.optionActive,hidden:!t.video.options.length}},[s("span",[e._v("Option")]),e._v(" "),s("vs-switch",{on:{change:function(s){return e.checkValue(t.optionActive,t,"option")}},model:{value:t.optionActive,callback:function(s){e.$set(t,"optionActive",s)},expression:"exercise.optionActive"}}),e._v(" "),s("div",{staticClass:"kiv-select",class:{disabled:!t.optionActive}},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.option,expression:"exercise.option"}],staticClass:"select-options",on:{change:function(s){var i=Array.prototype.filter.call(s.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(t,"option",s.target.multiple?i:i[0])}}},[s("option",{attrs:{value:""}}),e._v(" "),e._l(t.video.options,(function(t,i){return s("option",{key:i,attrs:{label:t.name},domProps:{value:t.name}},[e._v("\n                                        "+e._s(t.name)+"\n                                    ")])}))],2),e._v(" "),s("div",{staticClass:"placeholder",class:{hidden:t.option}},[e._v("\n                                    Sélectionner\n                                ")]),e._v(" "),s("div",{staticClass:"white-background"})])],1),e._v(" "),s("div",{staticClass:"hold",class:{active:t.holdActive}},[s("span",[e._v("Tenir")]),e._v(" "),s("vs-switch",{on:{change:function(s){return e.checkValue(t.holdActive,t,"hold")}},model:{value:t.holdActive,callback:function(s){e.$set(t,"holdActive",s)},expression:"exercise.holdActive"}}),e._v(" "),s("vs-input",{class:{disabled:!t.holdActive},attrs:{"label-placeholder":"Secondes",type:"number"},model:{value:t.hold,callback:function(s){e.$set(t,"hold",s)},expression:"exercise.hold"}})],1),e._v(" "),s("div",{staticClass:"tempo",class:{active:t.tempoActive}},[s("span",[e._v("Tempo")]),e._v(" "),s("vs-switch",{on:{change:function(s){return e.checkValue(t.tempoActive,t,"tempo")}},model:{value:t.tempoActive,callback:function(s){e.$set(t,"tempoActive",s)},expression:"exercise.tempoActive"}}),e._v(" "),s("vs-input",{class:{disabled:!t.tempoActive},attrs:{"label-placeholder":"(ex: 2 - 0 - 1 - 0)",type:"text"},model:{value:t.tempo,callback:function(s){e.$set(t,"tempo",s)},expression:"exercise.tempo"}}),e._v(" "),s("vs-tooltip",{staticClass:"kiv-help",scopedSlots:e._u([{key:"tooltip",fn:function(){return[e._v("\n                                    Le tempo, c'est tout simplement le\n                                    rythme de la répétition, indiquant que\n                                    le mouvement doit être lent, explosif ou\n                                    contrôlé.\n                                ")]},proxy:!0}],null,!0)},[s("div",{staticClass:"icon-help",class:{active:t.tempoActive}},[s("i",{staticClass:"fas fa-question"})])])],1)]):e._e(),e._v(" "),"voir"===e.action?s("div",{staticClass:"details"},[s("div",{staticClass:"series-reps"},[s("div",{staticClass:"series"},[s("i",{staticClass:"kiv-series icon-18"}),s("span",[e._v(e._s(t.numberOfSeries))]),e._v("\n                                séries\n                            ")]),e._v(" "),t.numberOfRepetitions?s("div",{staticClass:"reps"},[s("i",{staticClass:"kiv-reps icon-19"}),s("span",[e._v(e._s(t.numberOfRepetitions))]),e._v("\n                                répétitions\n                            ")]):e._e()]),e._v(" "),t.option?s("div",{staticClass:"option"},[e._v("\n                            Options : "),s("span",[e._v(e._s(t.option))])]):e._e(),e._v(" "),t.hold?s("div",{staticClass:"hold"},[e._v("\n                            Tenir : "),s("span",[e._v(e._s(t.hold)+"s")])]):e._e(),e._v(" "),t.tempo?s("div",{staticClass:"tempo"},[e._v("\n                            Tempo : "),s("span",[e._v(e._s(t.tempo))]),e._v(" "),s("vs-tooltip",{staticClass:"kiv-help",scopedSlots:e._u([{key:"tooltip",fn:function(){return[e._v("\n                                    Le tempo, c'est tout simplement le\n                                    rythme de la répétition, indiquant que\n                                    le mouvement doit être lent, explosif ou\n                                    contrôlé.\n                                ")]},proxy:!0}],null,!0)},[s("div",{staticClass:"icon-help"},[s("i",{staticClass:"fas fa-question"})])])],1):e._e()]):e._e()])])})),0),e._v(" "),"voir"!==e.action?s("div",{staticClass:"add-videos"},[s("div",{staticClass:"btn-add-videos"},[s("vs-button",{on:{click:function(t){return e.openVideoLibrary()}}},[s("i",{staticClass:"fab fa-youtube"}),e._v(" Ajouter des vidéos\n                ")])],1)]):e._e()]),e._v(" "),s("transition",{attrs:{name:"fade"}},[e.videoPlayerToggle?s("VideoPlayer",{attrs:{doctor:e.doctor,worksheet:e.getWorksheet,exercise:e.exerciseForPlaying,exercises:e.getExercises,lastExercise:e.getTheLastExercise},on:{closeVideoPlayer:e.closeVideoPlayer}}):e._e()],1),e._v(" "),s("transition",{attrs:{name:"fade"}},[e.videoLibraryToggle?s("VideoLibrary",{attrs:{doctor:e.doctor,loadingVideos:e.loadingVideos,videos:e.videos},on:{closeVideoLibrary:e.closeVideoLibrary,"videos-selection":e.addVideosSelection}}):e._e()],1),e._v(" "),s("vs-dialog",{model:{value:e.modalConfirmRemoveExercise,callback:function(t){e.modalConfirmRemoveExercise=t},expression:"modalConfirmRemoveExercise"}},[s("p",{staticClass:"modal-confirm-text"},[e._v("Confirmer la suppression de")]),e._v(" "),s("div",{staticClass:"modal-confirm-detail remove-item"},[s("div",{staticClass:"modal-confirm-icon remove-item"},[s("i",{staticClass:"fas fa-trash"})]),e._v(" "),s("p",[s("span",[e._v("\n                    "+e._s(e.removeExerciseDetails.video.name)+"\n                ")])])]),e._v(" "),s("div",{staticClass:"modal-confirm-buttons"},[s("vs-button",{staticClass:"secondary",on:{click:function(t){e.modalConfirmRemoveExercise=!1}}},[e._v("\n                Annuler\n            ")]),e._v(" "),s("vs-button",{class:{disabled:e.btnLoadingValidRemoveExercise},attrs:{loading:e.btnLoadingValidRemoveExercise},on:{click:e.validRemoveExercise}},[e._v("\n                Confirmer\n            ")])],1)])],1)};n._withStripped=!0;s(9826),s(561);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"video-player"},[s("button",{staticClass:"btn-close-player",on:{click:e.closeVideoPlayer}},[s("i",{staticClass:"kiv-x icon-21"})]),e._v(" "),s("div",{staticClass:"content"},[s("div",[s("div",{key:"video",staticClass:"video-frame"},[s("youtube",{ref:"youtube",attrs:{"player-vars":e.playerVars,"video-id":e.getExercise.video.youtubeId},on:{ended:e.videoEnded}})],1)])]),e._v(" "),s("transition",{attrs:{name:"fade"}},[s("div",{staticClass:"bottom-bar"},[s("div",{staticClass:"bottom-bar-content"},[s("div",{staticClass:"exercise-details"},[s("div",{staticClass:"exercise-count"},[e._v("\n                        Exercice "+e._s(e.getExercise.position+1)+"/"+e._s(e.getExercises?e.getExercises.length:0)+"\n                    ")]),e._v(" "),s("span",{staticClass:"tiret"},[e._v("-")]),e._v(" "),s("div",{staticClass:"exercise-name"},[e._v("\n                        "+e._s(e.getExercise.video.name)+"\n                    ")])]),e._v(" "),s("div",{staticClass:"exercise-series-reps-options"},[s("div",{staticClass:"series-reps"},[s("div",{staticClass:"series"},[s("i",{staticClass:"kiv-series icon-18"}),s("span",[e._v(e._s(e.getExercise.numberOfSeries))]),e._v("\n                            séries\n                        ")]),e._v(" "),s("div",{staticClass:"reps"},[s("i",{staticClass:"kiv-reps icon-19"}),s("span",[e._v(e._s(e.getExercise.numberOfRepetitions))]),e._v("\n                            répétitions\n                        ")])]),e._v(" "),s("div",{staticClass:"second-details"},[e.getExercise.option?s("div",{staticClass:"option"},[e._v("\n                            Options : "),s("span",[e._v(e._s(e.getExercise.option))])]):e._e(),e._v(" "),e.getExercise.hold?s("div",{staticClass:"hold"},[e._v("\n                            Tenir : "),s("span",[e._v(e._s(e.getExercise.hold)+"s")])]):e._e(),e._v(" "),e.getExercise.tempo?s("div",{staticClass:"tempo"},[e._v("\n                            Tempo : "),s("span",[e._v(e._s(e.getExercise.tempo))]),e._v(" "),s("vs-tooltip",{staticClass:"kiv-help",scopedSlots:e._u([{key:"tooltip",fn:function(){return[e._v("\n                                    Le tempo, c'est tout simplement le\n                                    rythme de la répétition, indiquant que\n                                    le mouvement doit être lent, explosif ou\n                                    contrôlé.\n                                ")]},proxy:!0}],null,!1,2695518001)},[s("div",{staticClass:"icon-help"},[s("i",{staticClass:"fas fa-question"})])])],1):e._e()])]),e._v(" "),s("div",{staticClass:"btn-next"},[s("vs-button",{on:{click:e.nextExercise}},[e.getExercise===e.getTheLastExercise?s("span",[e._v("Fermer")]):s("span",[e._v("Suivant")])])],1)])])])],1)};r._withStripped=!0;var c={props:{doctor:Object,exercise:Object,exercises:Array,worksheet:Object,lastExercise:Object},data:function(){return{playerVars:{rel:0,showinfo:0,ecver:2,modestbranding:1}}},computed:{getExercise:function(){return this.exercise},getExercises:function(){return this.exercises},getWorksheet:function(){return this.worksheet},getTheLastExercise:function(){return this.lastExercise}},methods:{videoEnded:function(){this.$refs.youtube.player.playVideo(),this.$refs.youtube.player.stopVideo()},nextExercise:function(){var e=this;this.getExercise===this.getTheLastExercise?this.closeVideoPlayer():this.$parent.exerciseForPlaying=this.exercises.find((function(t){return t.position===e.exercise.position+1}))},closeVideoPlayer:function(){this.$emit("closeVideoPlayer",!0)}}},l=s(1900),d=(0,l.Z)(c,r,[],!1,null,"c84679c0",null);d.options.__file="assets/vue/doctor/Worksheet/ExercisesPlaylist/VideoPlayer.vue";var v=d.exports,u=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"video-library"},[s("div",{staticClass:"content"},[s("section",{staticClass:"kiv-block",attrs:{id:"video-library"}},[s("button",{staticClass:"vs-dialog__close btn-close-library-sm",on:{click:e.closeVideoLibrary}},[s("i",{staticClass:"vs-icon-close vs-icon-hover-x"})]),e._v(" "),s("h2",[e._v("\n                Vidéothèque\n                "),e.loadingVideos?e._e():s("span",{staticClass:"count-videos"},[s("transition",{attrs:{name:"fade"}},[e.search||e.selectedTags.length||e.selectedPoB?s("i",{staticClass:"fas fa-filter"}):e._e()]),e._v(e._s(e.getTotalVideosFiltered)+" vidéo"),e.getTotalVideosFiltered>1?s("span",[e._v("s")]):e._e(),e._v(" "),e.search||e.selectedTags.length||e.selectedPoB?s("span",[e._v("\n                        filtrée"),e.getTotalVideosFiltered>1?s("span",[e._v("s")]):e._e()]):e._e()],1)]),e._v(" "),s("div",{staticClass:"primary-actions"},[s("div",{staticClass:"search"},[s("vs-input",{attrs:{"label-placeholder":"Filtrer par nom de video"},on:{keyup:function(t){e.page=1}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),s("div",{staticClass:"kiv-select tags"},[e.getTagsFromAllVideos.length?s("vs-select",{attrs:{filter:"",multiple:"",placeholder:"Mots-Clés"},on:{change:function(t){e.page=1},input:function(t){return e.selectTag()}},model:{value:e.selectedTags,callback:function(t){e.selectedTags=t},expression:"selectedTags"}},[e._l(e.getTagsFromAllVideos,(function(t,i){return s("vs-option",{key:i,attrs:{label:t,value:t}},[e._v("\n                            "+e._s(t)+"\n                        ")])})),e._v(" "),s("template",{slot:"notData"},[e._v("\n                            Aucun mot-clé ne correspond.")])],2):s("div",{staticClass:"loading select-tags"})],1),e._v(" "),s("SelectPartOfBody",{attrs:{partOfBody:e.selectedPoB},on:{partOfBodySelected:e.filterByPartOfBody,partOfBodyReset:e.resetSelectedPoB}})],1),e._v(" "),s("div",{staticClass:"video-library-content"},[!e.loadingVideos&&e.getVideos.length?s("div",{staticClass:"videos-list"},e._l(e.getVideos,(function(t,i){return s("div",{key:i,class:{"selected-video":e.selectedVideos.includes(t)}},[s("div",{staticClass:"video-thumbnail"},[s("a",{staticClass:"video-link",on:{click:function(s){return e.viewVideo(t)}}},[s("img",{attrs:{src:t.thumbnailUrl,alt:"vignette de la vidéo"}}),e._v(" "),s("svg",{attrs:{height:"512pt",viewBox:"0 -77 512.00213 512",width:"512pt",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{id:"test",d:"m501.453125 56.09375c-5.902344-21.933594-23.195313-39.222656-45.125-45.128906-40.066406-10.964844-200.332031-10.964844-200.332031-10.964844s-160.261719 0-200.328125 10.546875c-21.507813 5.902344-39.222657 23.617187-45.125 45.546875-10.542969 40.0625-10.542969 123.148438-10.542969 123.148438s0 83.503906 10.542969 123.148437c5.90625 21.929687 23.195312 39.222656 45.128906 45.128906 40.484375 10.964844 200.328125 10.964844 200.328125 10.964844s160.261719 0 200.328125-10.546875c21.933594-5.902344 39.222656-23.195312 45.128906-45.125 10.542969-40.066406 10.542969-123.148438 10.542969-123.148438s.421875-83.507812-10.546875-123.570312zm0 0",fill:"#f00"}}),e._v(" "),s("path",{attrs:{id:"test2",d:"m204.96875 256 133.269531-76.757812-133.269531-76.757813zm0 0",fill:"#fff"}})])])]),e._v(" "),s("div",{staticClass:"video-details"},[s("div",{staticClass:"video-name"},[t.name.length<45?s("div",[e._v("\n                                    "+e._s(t.name)+"\n                                ")]):s("div",[e._v("\n                                    "+e._s(t.name.substring(0,45)+"...")+"\n                                ")])]),e._v(" "),e.selectedVideos.includes(t)?s("vs-button",{staticClass:"btn-remove-vid",attrs:{circle:"",size:"small"},on:{click:function(s){return e.removeVideo(t)}}},[s("check-icon",{attrs:{size:"2x"}})],1):s("vs-button",{staticClass:"btn-add-vid",attrs:{circle:"",size:"small"},on:{click:function(s){return e.addVideo(t)}}},[s("plus-icon",{attrs:{size:"2x"}})],1)],1)])})),0):e._e(),e._v(" "),e.loadingVideos||e.getVideos.length||e.search||e.selectedTags.length||e.selectedPoB?e._e():s("div",{staticClass:"not-found"},[e._m(0)]),e._v(" "),e.loadingVideos||e.getVideos.length||!(e.search||e.selectedTags.length||e.selectedPoB)?e._e():s("div",{staticClass:"not-found"},[s("p",[s("i",{staticClass:"fab fa-youtube"}),e._v(" "),s("span",[e._v("Aucune vidéo n'a été trouvée avec\n                            "),e.search?s("span",[e._v('"'),s("strong",[e._v(e._s(e.search))]),e._v('"')]):e._e(),e._v(" "),e.search&&e.selectedTags.length||e.search&&e.selectedPoB?s("span",{staticClass:"et"},[e._v("\n                                et\n                            ")]):e._e(),e._v(" "),e.selectedTags.length?s("span",e._l(e.selectedTags,(function(t,i){return s("span",{key:i,staticClass:"nf-tag tag"},[s("span",{staticClass:"text wsnw"},[e._v(e._s(t))])])})),0):e._e(),e._v(" "),e.selectedPoB?s("span",{staticClass:"nf-tag part-of-body"},[s("span",{staticClass:"text wsnw"},[e._v("\n                                    "+e._s(e.selectedPoB.name)+"\n                                ")])]):e._e()])])]),e._v(" "),e.loadingVideos?s("div",{staticClass:"loading videos-list"}):e._e()]),e._v(" "),e.videos.length>e.max?s("div",{staticClass:"pagination"},[s("vs-pagination",{attrs:{length:e.getLength(e.getSearch(e.videos,e.search),e.max)},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}},[s("vs-select",{model:{value:e.page,callback:function(t){e.page=t},expression:"page"}},e._l(e.getLength(e.getSearch(e.videos,e.search),e.max),(function(t){return s("vs-option",{key:t,attrs:{label:t,value:t}},[e._v("\n                            "+e._s(t)+"\n                        ")])})),1)],1)],1):e._e(),e._v(" "),s("div",{staticClass:"btn-valid-selection"},[s("vs-button",{class:{disabled:e.btnLoadingValidVideosSelection},attrs:{loading:e.btnLoadingValidVideosSelection},on:{click:function(t){return e.validVideosSelection()}}},[s("i",{staticClass:"fas fa-check-circle"}),e._v("Valider la selection\n                ")])],1)])]),e._v(" "),s("vs-dialog",{staticClass:"view-video",model:{value:e.modalViewVideo,callback:function(t){e.modalViewVideo=t},expression:"modalViewVideo"}},[s("youtube",{attrs:{"player-vars":e.playerVars,"video-id":e.selectedViewVideo.youtubeId}})],1)],1)};u._withStripped=!0;s(4916),s(4765),s(8309),s(6699);var p=s(9101),h=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.hideSelectBox,expression:"hideSelectBox"}],staticClass:"select-filter"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.loadingPartsOfBody,expression:"!loadingPartsOfBody"}]},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.getPartOfBodySelected,expression:"getPartOfBodySelected"}],staticClass:"partofbody-selected part-of-body",on:{click:e.resetSelect}},["pied"===e.getPartOfBodySelected.icon?i("img",{staticClass:"icon-pied",attrs:{src:s(1351),alt:"Icone Pied"}}):e._e(),e._v(" "),"jambe"===e.getPartOfBodySelected.icon?i("img",{staticClass:"icon-jambe",attrs:{src:s(8189),alt:"Icone Jambe"}}):e._e(),e._v(" "),"bras"===e.getPartOfBodySelected.icon?i("img",{staticClass:"icon-bras",attrs:{src:s(7932),alt:"Icone Bras"}}):e._e(),e._v(" "),"main"===e.getPartOfBodySelected.icon?i("img",{staticClass:"icon-main",attrs:{src:s(6098),alt:"Icone Main"}}):e._e(),e._v(" "),"epaule"===e.getPartOfBodySelected.icon?i("img",{staticClass:"icon-epaule",attrs:{src:s(2890),alt:"Icone Épaule"}}):e._e(),e._v(" "),"dos"===e.getPartOfBodySelected.icon?i("img",{staticClass:"icon-dos",attrs:{src:s(6910),alt:"Icone Dos"}}):e._e(),e._v(" "),"cervicales"===e.getPartOfBodySelected.icon?i("img",{staticClass:"icon-cervicales",attrs:{src:s(1135),alt:"Icone Cervicales"}}):e._e(),e._v(" "),"lombaires"===e.getPartOfBodySelected.icon?i("img",{staticClass:"icon-lombaires",attrs:{src:s(2894),alt:"Icone Lombaires"}}):e._e(),e._v(" "),"thoracique"===e.getPartOfBodySelected.icon?i("img",{staticClass:"icon-thoracique",attrs:{src:s(4114),alt:"Icone Thoracique"}}):e._e(),e._v(" "),i("span",{staticClass:"text wsnw"},[e._v(e._s(e.getPartOfBodySelected.name))])]),e._v(" "),i("input",{directives:[{name:"show",rawName:"v-show",value:!e.getPartOfBodySelected,expression:"!getPartOfBodySelected"},{name:"model",rawName:"v-model",value:e.filter,expression:"filter"}],class:{"b-r-b-zero":e.selectBox},attrs:{id:"partofbody-choice-select",autocomplete:"off",placeholder:e.selectBox?"Recherchez":"Partie du corps"},domProps:{value:e.filter},on:{click:function(t){e.selectBox=!0},keyup:e.selectBoxWithThrottle,input:function(t){t.target.composing||(e.filter=t.target.value)}}}),e._v(" "),i("div",{staticClass:"arrow-toggle-box",class:{active:e.selectBox},on:{click:e.toggleSelectBox}},[i("i",{staticClass:"vs-icon-arrow"})]),e._v(" "),i("transition",{attrs:{name:"height"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.selectBox,expression:"selectBox"}],staticClass:"select-box",on:{click:e.focusInputSelect}},[e.partsOfBodyFiltered.length?i("ul",e._l(e.partsOfBodyFiltered,(function(t,o){return i("li",{key:o},[i("div",{staticClass:"part-of-body",on:{click:function(s){return e.selectPartOfBody(t)}}},["pied"===t.icon?i("img",{staticClass:"icon-pied",attrs:{src:s(1351),alt:"Icone Pied"}}):e._e(),e._v(" "),"jambe"===t.icon?i("img",{staticClass:"icon-jambe",attrs:{src:s(8189),alt:"Icone Jambe"}}):e._e(),e._v(" "),"bras"===t.icon?i("img",{staticClass:"icon-bras",attrs:{src:s(7932),alt:"Icone Bras"}}):e._e(),e._v(" "),"main"===t.icon?i("img",{staticClass:"icon-main",attrs:{src:s(6098),alt:"Icone Main"}}):e._e(),e._v(" "),"epaule"===t.icon?i("img",{staticClass:"icon-epaule",attrs:{src:s(2890),alt:"Icone Épaule"}}):e._e(),e._v(" "),"dos"===t.icon?i("img",{staticClass:"icon-dos",attrs:{src:s(6910),alt:"Icone Dos"}}):e._e(),e._v(" "),"cervicales"===t.icon?i("img",{staticClass:"icon-cervicales",attrs:{src:s(1135),alt:"Icone Cervicales"}}):e._e(),e._v(" "),"lombaires"===t.icon?i("img",{staticClass:"icon-lombaires",attrs:{src:s(2894),alt:"Icone Lombaires"}}):e._e(),e._v(" "),"thoracique"===t.icon?i("img",{staticClass:"icon-thoracique",attrs:{src:s(4114),alt:"Icone Thoracique"}}):e._e(),e._v(" "),i("span",{staticClass:"text wsnw"},[e._v(e._s(t.name))])])])})),0):i("div",[i("p",{staticClass:"not-found-pob"},[e._v("\n                        Aucune partie du corps ne correspond.\n                    ")])])])])],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.loadingPartsOfBody,expression:"loadingPartsOfBody"}],staticClass:"loading-gray loading-pob"})])};h._withStripped=!0;s(2023),s(5306),s(2707);var f=s(2649);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var g={props:{partOfBody:Object},directives:{ClickOutside:s.n(f)()},data:function(){return{partsOfBody:[],filter:"",selectBox:!1,selectInput:null,loadingPartsOfBody:!1,selectBoxThrottle:!1}},computed:{getPartOfBodySelected:function(){return this.partOfBody?this.partOfBody:""},partsOfBodyFiltered:function(){var e=this;return this.sortedPoBNameByAlphabet(this.partsOfBody.filter((function(t){return t.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().includes(e.filter.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase())})))}},methods:{toggleSelectBox:function(){this.selectBox=!this.selectBox,null!=this.partOfBody&&this.resetSelect(),this.selectBox&&this.focusInputSelect()},hideSelectBox:function(){this.selectBox=!1},selectPartOfBody:function(e){this.$emit("partOfBodySelected",e),this.hideSelectBox()},resetSelect:function(){var e=this;this.$emit("partOfBodyReset",!0),setTimeout((function(){e.selectInput=document.getElementById("partofbody-choice-select"),e.selectBox=!0,e.focusInputSelect()}),100)},focusInputSelect:function(){this.selectInput.focus()},selectBoxWithThrottle:function(){var e=this;this.selectBoxThrottle||(this.selectBoxThrottle=!0,this.selectBox=!0,console.log("selectBox"),setTimeout((function(){e.selectBoxThrottle=!1}),1e3))},sortedPoBNameByAlphabet:function(e){return e.sort((function(e,t){return e.name.localeCompare(t.name)})),e}},created:function(){var e=this;this.loadingPartsOfBody=!0,this.axios.get("/get/parts-of-body").then((function(t){e.partsOfBody=t.data,e.loadingPartsOfBody=!1})).catch((function(e){var t="object"===m(e.response.data)?e.response.data.detail:e.response.data;console.error(t)}))},mounted:function(){this.selectInput=document.getElementById("partofbody-choice-select")}},_=(0,l.Z)(g,h,[],!1,null,"874fd90c",null);_.options.__file="assets/vue/components/SelectPartOfBody.vue";var y=_.exports,b={props:{doctor:Object,loadingVideos:Boolean,videos:Array},components:{PlusIcon:p.pOD,CheckIcon:p.nQG,XIcon:p.b0D,SelectPartOfBody:y},data:function(){return{search:"",page:1,max:12,playerVars:{rel:0,showinfo:0,ecver:2,modestbranding:1},timeout:!1,selectedTags:[],selectedPoB:null,selectedVideos:[],modalAddVideo:!1,modalViewVideo:!1,selectedViewVideo:!1,btnLoadingValidVideosSelection:!1,inputChips:null}},computed:{getVideos:function(){return this.getPage(this.getSearch(this.videos,this.search),this.page,this.max)},getLengthForPagination:function(){return this.getLength(this.getSearch(this.videos,this.search),this.max)},getTotalVideosFiltered:function(){return this.getSearch(this.videos,this.search).length},getTagsFromAllVideos:function(){return a.Z.getTagsFromAllVideos(this.videos)}},methods:{selectTag:function(){this.inputChips||(this.inputChips=document.querySelector(".vs-select__chips__input")),this.inputChips.focus(),this.inputChips.blur()},filterByPartOfBody:function(e){this.selectedPoB=e,this.page=1},resetSelectedPoB:function(){this.selectedPoB=null,this.page=1},viewVideo:function(e){return this.selectedViewVideo=e,this.modalViewVideo=!this.modalViewVideo},addVideo:function(e){this.selectedVideos.push(e)},removeVideo:function(e){this.selectedVideos.splice(this.selectedVideos.indexOf(e),1)},validVideosSelection:function(){var e=this;this.btnLoadingValidVideosSelection=!0,this.$emit("videos-selection",this.selectedVideos),this.closeVideoLibrary(),setTimeout((function(){e.btnLoadingValidVideosSelection=!1}),1e3)},closeVideoLibrary:function(){var e=this;setTimeout((function(){e.search="",e.selectedTags=[],e.selectedVideos=[],e.selectedPoB=null}),300),this.$emit("closeVideoLibrary",!0)},getPage:function(e,t,s){return a.Z.getPage(e,t,s)},getLength:function(e,t){return a.Z.getLength(e,t)},getSearch:function(e,t){var s=this,i=a.Z.getSearch(e,t);return this.selectedTags.length&&(i=i.filter((function(e){var t=[];return e.tags&&s.selectedTags.forEach((function(s){var i=!1;e.tags.forEach((function(e){e.name===s&&(i=!0)})),t.push(i)})),!t.includes(!1)}))),this.selectedPoB&&(i=i.filter((function(e){var t=!1;return e.partOfBodys&&e.partOfBodys.forEach((function(e){e.id===s.selectedPoB.id&&(t=!0)})),t}))),i},resizeWindowEventHandler:function(e){var t=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){window.innerWidth<449&&(t.max=1e3,t.page=1),window.innerWidth>=449&&window.innerWidth<=649&&(t.max=8,t.page=1),window.innerWidth>649&&window.innerWidth<=849&&(t.max=9,t.page=1),window.innerWidth>849&&window.innerWidth<=1618&&(t.max=8,t.page=1),window.innerWidth>1618&&window.innerWidth<=1659&&(t.max=10,t.page=1),window.innerWidth>1659&&(t.max=12,t.page=1)}),250)}},created:function(){window.addEventListener("resize",this.resizeWindowEventHandler),this.resizeWindowEventHandler()},destroyed:function(){window.removeEventListener("resize",this.resizeWindowEventHandler)}},k=(0,l.Z)(b,u,[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p",[s("i",{staticClass:"fab fa-youtube"}),e._v(" "),s("span",[e._v("Il n'y a aucune vidéo")])])}],!1,null,null,null);function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}k.options.__file="assets/vue/doctor/Worksheet/ExercisesPlaylist/VideoLibrary.vue";var x={components:{VideoPlayer:v,VideoLibrary:k.exports},props:{doctor:Object,loading:Boolean,worksheet:Object,exercises:Array,action:String,csrfTokenRemoveExercise:String,loadingVideos:Boolean,videos:Array},data:function(){return{videoPlayerToggle:!1,videoLibraryToggle:!1,activeOptions:{option:[],tempo:[],hold:[]},exerciseForPlaying:null,modalConfirmRemoveExercise:!1,removeExerciseDetails:{video:{}},btnLoadingValidRemoveExercise:!1}},computed:{getWorksheet:function(){return this.worksheet},getExercises:function(){return a.Z.sortByPosition(this.exercises)},getTheLastExercise:function(){return this.getExercises[this.getExercises.length-1]}},methods:{checkValue:function(e,t,s){!1===e&&(t[s]="")},addVideosSelection:function(e){var t=this,s=this.getExercises.length;e.forEach((function(e,i){var o={id:null,position:s+i,numberOfRepetitions:10,numberOfSeries:3,option:"",tempo:"",hold:"",optionActive:!1,tempoActive:!1,holdActive:!1,video:e};t.exercises.push(o)}))},checkIfValueIsEmptyOrNull:function(e){e.numberOfSeries<1&&(e.numberOfSeries=1),e.numberOfRepetitions<1&&(e.numberOfRepetitions=1),""!==e.numberOfSeries&&null!==e.numberOfSeries||(e.numberOfSeries=1),""!==e.numberOfRepetitions&&null!==e.numberOfRepetitions||(e.numberOfRepetitions=1)},upPosition:function(e){if(e.position>0){var t=e.position,s=e.position-1,i=this.getExercises.find((function(e){return e.position===s}));e.position=s,i&&(i.position=t)}},downPosition:function(e){if(e.position<this.getExercises.length){var t=e.position,s=e.position+1,i=this.getExercises.find((function(e){return e.position===s}));e.position=s,i&&(i.position=t)}},removeExercise:function(e){return this.removeExerciseDetails=e,this.modalConfirmRemoveExercise=!this.modalConfirmRemoveExercise},validRemoveExercise:function(){var e=this;this.btnLoadingValidRemoveExercise=!0,this.removeExerciseDetails.id&&"creation"!==this.action?this.axios.post("/doctor/".concat(this.doctor.id,"/remove/exercise"),{_token:this.csrfTokenRemoveExercise,worksheetId:this.getWorksheet.id,exerciseId:this.removeExerciseDetails.id}).then((function(t){console.log(t.data),e.exercises.splice(e.exercises.indexOf(e.removeExerciseDetails),1),a.Z.sortByPosition(e.exercises).map((function(e,t){return e.position=t})),a.Z.openSuccessNotification("Suppression de l'exercice",t.data),e.btnLoadingValidRemoveExercise=!1,e.modalConfirmRemoveExercise=!1})).catch((function(t){var s="object"===C(t.response.data)?t.response.data.detail:t.response.data;a.Z.openErrorNotification("Erreur",s),e.btnLoadingValidRemoveExercise=!1,e.modalConfirmRemoveExercise=!1})):(this.exercises.splice(this.exercises.indexOf(this.removeExerciseDetails),1),a.Z.sortByPosition(this.exercises).map((function(e,t){return e.position=t})),this.btnLoadingValidRemoveExercise=!1,this.modalConfirmRemoveExercise=!1)},openVideoPlayer:function(e){this.exerciseForPlaying=e,this.videoPlayerToggle=!0,document.body.classList.add("no-scrollbar")},openVideoLibrary:function(){this.videoLibraryToggle=!0,document.body.classList.add("no-scrollbar")},closeVideoPlayer:function(){this.videoPlayerToggle=!1,document.body.classList.remove("no-scrollbar")},closeVideoLibrary:function(){this.videoLibraryToggle=!1,document.body.classList.remove("no-scrollbar")}}},w=(0,l.Z)(x,n,[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"exercise loading-block"},[s("div",{staticClass:"loading-gray thumbnail-wrapper"}),e._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"loading-gray h2 w-45"}),e._v(" "),s("div",{staticClass:"details"},[s("div",{staticClass:"series-reps"},[s("div",{staticClass:"loading-gray series w-25"}),e._v(" "),s("div",{staticClass:"loading-gray reps w-15"})]),e._v(" "),s("div",{staticClass:"loading-gray option w-25"}),e._v(" "),s("div",{staticClass:"loading-gray tempo w-15"}),e._v(" "),s("div",{staticClass:"loading-gray hold w-25"})]),e._v(" "),s("div",{staticClass:"commentary"},[s("div",{staticClass:"loading-gray title w-25"}),e._v(" "),s("div",{staticClass:"loading-gray input"})])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"exercise loading-block"},[s("div",{staticClass:"loading-gray thumbnail-wrapper"}),e._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"loading-gray h2 w-35"}),e._v(" "),s("div",{staticClass:"details"},[s("div",{staticClass:"series-reps"},[s("div",{staticClass:"loading-gray series w-15"}),e._v(" "),s("div",{staticClass:"loading-gray reps w-25"})]),e._v(" "),s("div",{staticClass:"loading-gray option w-25"}),e._v(" "),s("div",{staticClass:"loading-gray tempo w-15"}),e._v(" "),s("div",{staticClass:"loading-gray hold w-25"})]),e._v(" "),s("div",{staticClass:"commentary"},[s("div",{staticClass:"loading-gray title w-25"}),e._v(" "),s("div",{staticClass:"loading-gray input"})])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"exercise loading-block"},[s("div",{staticClass:"loading-gray thumbnail-wrapper"}),e._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"loading-gray h2 w-45"}),e._v(" "),s("div",{staticClass:"details"},[s("div",{staticClass:"series-reps"},[s("div",{staticClass:"loading-gray series w-15"}),e._v(" "),s("div",{staticClass:"loading-gray reps w-15"})]),e._v(" "),s("div",{staticClass:"loading-gray option w-25"}),e._v(" "),s("div",{staticClass:"loading-gray tempo w-15"}),e._v(" "),s("div",{staticClass:"loading-gray hold w-25"})]),e._v(" "),s("div",{staticClass:"commentary"},[s("div",{staticClass:"loading-gray title w-25"}),e._v(" "),s("div",{staticClass:"loading-gray input"})])])])}],!1,null,null,null);function E(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function V(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?E(Object(s),!0).forEach((function(t){O(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):E(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function O(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}w.options.__file="assets/vue/doctor/Worksheet/ExercisesPlaylist.vue";var S={components:{ExercisesPlaylist:w.exports,SelectPartOfBody:y,TagPartOfBody:s(4117).Z},data:function(){return{doctor:null,action:null,worksheetId:null,worksheet:{partOfBody:null,duration:1,perDay:1,perWeek:1,title:""},exercises:[],patient:null,loadingVideos:!1,videos:[],csrfTokenCreateWorksheet:null,csrfTokenEditWorksheet:null,csrfTokenRemoveExercise:null,loading:!1,maxDuration:{duration:52,perDay:3,perWeek:7},btnLoadingValidEditWorksheet:!1,btnLoadingValidCreateWorksheet:!1,checkIfWorksheetSessionsExist:null,titleIsEmptyMessage:null,partOfBodyIsEmptyMessage:null}},computed:{getWorksheet:function(){return this.worksheet},getExercises:function(){return this.exercises}},methods:{setPartOfBody:function(e){this.worksheet.partOfBody=e,this.partOfBodyIsEmptyMessage=""},resetPoB:function(){this.worksheet.partOfBody=null},rederictToDashboard:function(){document.location.href="/doctor/".concat(this.doctor.id,"/dashboard")},checkIfDurationValueIsEmptyOrNull:function(e,t){var s=t.target.id;"vs-input--duration"===s&&(""!==e&&null!==e||(this.worksheet.duration=1),e<1&&(this.worksheet.duration=1),e>this.maxDuration.duration&&(this.worksheet.duration=this.maxDuration.duration)),"vs-input--perDay"===s&&(""!==e&&null!==e||(this.worksheet.perDay=1),e<1&&(this.worksheet.perDay=1),e>this.maxDuration.perDay&&(this.worksheet.perDay=this.maxDuration.perDay)),"vs-input--perWeek"===s&&(""!==e&&null!==e||(this.worksheet.perWeek=1),e<1&&(this.worksheet.perWeek=1),e>this.maxDuration.perWeek&&(this.worksheet.perWeek=this.maxDuration.perWeek))},checkIfEmpty:function(){var e=!0;return this.worksheet.partOfBody||(this.partOfBodyIsEmptyMessage="Vous devez choisir une partie du corps",e=!1,a.Z.openErrorNotification("Erreur",this.partOfBodyIsEmptyMessage+" pour la fiche.")),""!==this.worksheet.title&&null!==this.worksheet.title||(this.titleIsEmptyMessage="Vous devez entrer un titre pour la fiche.",e=!1,a.Z.openErrorNotification("Erreur",this.titleIsEmptyMessage)),this.exercises.length||(e=!1,a.Z.openErrorNotification("Erreur","La fiche ne peut pas être vide, vous devez ajouter des vidéos.")),e},validEdit:function(){var e=this;this.btnLoadingValidEditWorksheet=!0,this.checkIfEmpty()?this.axios.post("/doctor/".concat(this.doctor.id,"/edit/worksheet"),{_token:this.csrfTokenEditWorksheet,worksheetId:this.worksheet.id,title:this.worksheet.title,partOfBodyId:this.worksheet.partOfBody.id,duration:this.worksheet.duration,perWeek:this.worksheet.perWeek,perDay:this.worksheet.perDay,exercises:this.exercises}).then((function(t){e.patient?a.Z.openSuccessNotification("Edition de la prescription","La prescription a bien été modifiée"):a.Z.openSuccessNotification("Edition de la fiche",t.data),e.btnLoadingValidEditWorksheet=!1,setTimeout((function(){e.patient?document.location.href="/doctor/".concat(e.doctor.id,"/dashboard"):document.location.href="/doctor/".concat(e.doctor.id,"/dashboard/?tab=ws")}),2e3)})).catch((function(t){var s="object"===B(t.response.data)?t.response.data.detail:t.response.data;e.btnLoadingValidEditWorksheet=!1,a.Z.openErrorNotification("Erreur",s)})):this.btnLoadingValidEditWorksheet=!1},validCreate:function(){var e=this;this.btnLoadingValidCreateWorksheet=!0,this.checkIfEmpty()?this.axios.post("/doctor/".concat(this.doctor.id,"/create/worksheet"),{_token:this.csrfTokenCreateWorksheet,worksheetId:this.worksheet.id,patientId:this.patient?this.patient.id:null,title:this.worksheet.title,partOfBodyId:this.worksheet.partOfBody.id,duration:this.worksheet.duration,perWeek:this.worksheet.perWeek,perDay:this.worksheet.perDay,exercises:this.exercises}).then((function(t){e.patient?e.worksheet.id?(a.Z.openSuccessNotification("Création de la prescription","La fiche <strong> ".concat(e.worksheet.title,"</strong> \n                                    a été prescrite à <strong>\n                                    ").concat(e.getUserName(e.patient),"</strong>")),e.btnLoadingValidCreateWorksheet=!1,setTimeout((function(){document.location.href="/doctor/".concat(e.doctor.id,"/dashboard")}),2e3)):e.axios.post("/doctor/".concat(e.doctor.id,"/create/worksheet"),{_token:e.csrfTokenCreateWorksheet,worksheetId:e.worksheet.id,patientId:null,title:e.worksheet.title,partOfBodyId:e.worksheet.partOfBody.id,duration:e.worksheet.duration,perWeek:e.worksheet.perWeek,perDay:e.worksheet.perDay,exercises:e.exercises}).then((function(t){a.Z.openSuccessNotification("Création de la prescription","La fiche <strong> ".concat(e.worksheet.title,"</strong> \n                                            a été prescrite à <strong>\n                                            ").concat(e.getUserName(e.patient),"</strong>")),e.btnLoadingValidCreateWorksheet=!1,setTimeout((function(){document.location.href="/doctor/".concat(e.doctor.id,"/dashboard")}),2e3)})).catch((function(t){var s="object"===B(t.response.data)?t.response.data.detail:t.response.data;e.btnLoadingValidCreateWorksheet=!1,a.Z.openErrorNotification("Erreur",s)})):(a.Z.openSuccessNotification("Création de la fiche",t.data),e.btnLoadingValidCreateWorksheet=!1,setTimeout((function(){document.location.href="/doctor/".concat(e.doctor.id,"/dashboard/?tab=ws")}),2e3))})).catch((function(t){var s="object"===B(t.response.data)?t.response.data.detail:t.response.data;e.btnLoadingValidCreateWorksheet=!1,a.Z.openErrorNotification("Erreur",s)})):this.btnLoadingValidCreateWorksheet=!1},getUserName:function(e){return a.Z.getUserName(e)}},created:function(){var e=this;i.default.prototype.$vs=this.$vs;var t=JSON.parse(document.getElementById("vueData").innerHTML);this.doctor=t.doctor,this.worksheetId=t.worksheetId,this.action=t.action,this.patient=t.patient,this.csrfTokenCreateWorksheet=t.csrfTokenCreateWorksheet,this.csrfTokenEditWorksheet=t.csrfTokenEditWorksheet,this.csrfTokenRemoveExercise=t.csrfTokenRemoveExercise,this.loading=!0,0!=this.worksheetId?this.axios.get("/doctor/".concat(this.doctor.id,"/get/worksheet/").concat(this.worksheetId)).then((function(t){e.worksheet=t.data,"creation"!==e.action||e.patient||(e.worksheet.title="Copie de ".concat(e.worksheet.title)),e.axios.get("/doctor/".concat(e.doctor.id,"/get/exercises/").concat(e.worksheetId)).then((function(t){e.exercises=t.data,e.exercises=e.exercises.map((function(e){return V(V({},e),{},{option:e.option?e.option:"",tempo:e.tempo?e.tempo:"",hold:e.hold?e.hold:"",optionActive:!!e.option,tempoActive:!!e.tempo,holdActive:!!e.hold})})),"edition"===e.action?e.axios.get("/doctor/".concat(e.doctor.id,"/check/worksheet-sessions-exist/").concat(e.worksheetId)).then((function(t){e.checkIfWorksheetSessionsExist=t.data,e.loading=!1})).catch((function(e){var t="object"===B(e.response.data)?e.response.data.detail:e.response.data;console.error(t)})):e.loading=!1})).catch((function(e){var t="object"===B(e.response.data)?e.response.data.detail:e.response.data;console.error(t)}))})).catch((function(e){var t="object"===B(e.response.data)?e.response.data.detail:e.response.data;console.error(t)})):this.loading=!1,this.loadingVideos=!0,this.axios.get("/doctor/".concat(this.doctor.id,"/get/videos")).then((function(t){e.loadingVideos=!1,e.videos=t.data})).catch((function(t){var s="object"===B(t.response.data)?t.response.data.detail:t.response.data;a.Z.openErrorNotification("Erreur",s),e.loadingVideos=!1}))}},P=(0,l.Z)(S,o,[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"title"},[s("i",{staticClass:"kiv-arrow-left icon-31"}),e._v(" "),s("div",{staticClass:"loading-gray h1"})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"label"},[e._v("prescription "),s("span",[e._v("pour")])])}],!1,null,null,null);P.options.__file="assets/vue/doctor/WorkSheetPage.vue";var I=P.exports,T=s(9669),W=s.n(T),L=s(2346),D=s(1370),A=s.n(D),R=s(1652),N=s.n(R);i.default.use(L.Z,W()),i.default.use(A()),i.default.use(N()),new i.default({render:function(e){return e(I)}}).$mount("#vue")}},function(e){e.O(0,[429,912,770,900],(function(){return t=154,e(e.s=t);var t}));e.O()}]);