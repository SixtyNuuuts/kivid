"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[603],{8699:function(t,e,i){var s=i(538),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[t.patient.doctor||t.doctorView?s("section",{staticClass:"db-patient",class:{"doctor-view":t.doctorView},attrs:{id:"dashboard"}},[s("div",[t.doctorView?s("i",{staticClass:"kiv-arrow-left icon-31",on:{click:function(e){return t.rederictToDashboard()}}}):t._e(),t._v(" "),s("h1",[t.doctorView?t._e():s("span",[t._v("\n                    Bienvenue sur votre dashboard !\n                    "),s("i",[s("img",{attrs:{src:i(9402),alt:"Icone d'une main qui fait 'coucou'"}})])]),t._v(" "),t.doctorView?s("span",[t._v("\n                    Dashboard de\n                    "),t.patient.firstname||t.patient.lastname?s("span",[t._v("\n                        "+t._s(t.patient.firstname)+"\n                        "+t._s(t.patient.lastname)+"\n                    ")]):s("span",[t._v("\n                        "+t._s(t.patient.email)+"\n                    ")])]):t._e()])]),t._v(" "),s("main",[t.doctorView?s("section",{staticClass:"kiv-block mobile-view",attrs:{id:"patient"}},[s("h2",[t._v("Le patient")]),t._v(" "),t.myDoctorContent?s("div",{staticClass:"patient-details"},[s("div",{staticClass:"patient-avatar"},[s("vs-avatar",{staticClass:"avatar",attrs:{circle:"",size:"116"}},[s("img",{attrs:{src:t.patient.avatarUrl?t.patient.avatarUrl:"/img/avatar-default.svg",alt:"Avatar de "+t.patient.firstname+" "+t.patient.lastname}})])],1),t._v(" "),s("div",{staticClass:"patient-infos"},[s("div",[s("p",{staticClass:"name"},[t._v("\n                                "+t._s(t.getUserName(t.patient))+"\n                            ")]),t._v(" "),t.patient.birthdate?s("p",{staticClass:"birthdate"},[t._v("\n                                "+t._s(t.getAge(t.patient.birthdate))+" ans\n                            ")]):t._e()])])]):t._e()]):t._e(),t._v(" "),s("MyScores",{attrs:{patient:t.patient,doctorView:t.doctorView,patientWorksheets:t.patientWorksheets,loadingPatientWorksheets:t.loadingPatientWorksheets}}),t._v(" "),s("MyWorksheets",{attrs:{patient:t.patient,doctorView:t.doctorView,doctor:t.currentUser,patientWorksheets:t.patientWorksheets,loadingPatientWorksheets:t.loadingPatientWorksheets}}),t._v(" "),s("aside",[t.doctorView?t._e():s("MyDashboardNotifications",{attrs:{patient:t.patient,csrfTokenAcceptDoctor:t.csrfTokenAcceptDoctor,csrfTokenDeclineDoctor:t.csrfTokenDeclineDoctor}}),t._v(" "),t.doctorView?t._e():s("section",{staticClass:"kiv-block",class:{reduced:!t.myDoctorContent},attrs:{id:"my-doctor"}},[s("button",{staticClass:"toggle-content",on:{click:function(e){t.myDoctorContent=!t.myDoctorContent}}},[s("i",{staticClass:"kiv-chevron-down icon-3"})]),t._v(" "),s("h2",[t._v("Mon praticien")]),t._v(" "),s("transition",{attrs:{name:"height2"}},[t.myDoctorContent?s("div",{staticClass:"doctor-details"},[s("div",{staticClass:"doctor-avatar"},[t.loadingDoctor?s("div",{staticClass:"loading avatar"}):t._e(),t._v(" "),t.patient.addRequestDoctor&&!t.loadingDoctor?s("vs-avatar",{staticClass:"avatar",attrs:{circle:"",size:"116"}},[s("img",{attrs:{src:t.patient.doctor.avatarUrl?t.patient.doctor.avatarUrl:"../../img/avatar-default.svg",alt:"Avatar de "+t.patient.doctor.firstname+" "+t.patient.doctor.lastname}})]):t._e(),t._v(" "),!1!==t.patient.addRequestDoctor||t.loadingDoctor?t._e():s("vs-avatar",{staticClass:"avatar waiting",attrs:{circle:"",size:"116"}},[s("img",{attrs:{src:i(9552),alt:"Smiley Monocle"}})])],1),t._v(" "),s("div",{staticClass:"doctor-infos"},[t.loadingDoctor?s("div",[s("p",{staticClass:"loading name w-55"}),t._v(" "),s("p",{staticClass:"loading city w-45"})]):t._e(),t._v(" "),t.patient.addRequestDoctor&&!t.loadingDoctor?s("div",[s("p",{staticClass:"name"},[t._v("\n                                        "+t._s(t.getUserName(t.patient.doctor))+"\n                                    ")]),t._v(" "),s("p",{staticClass:"entity-city"},[t.patient.doctor.entityName&&!t.patient.doctor.city?s("span",[t._v("\n                                            "+t._s(t.patient.doctor.entityName)+"\n                                        ")]):t._e(),t._v(" "),!t.patient.doctor.entityName&&t.patient.doctor.city?s("span",[t._v("\n                                            "+t._s(t.patient.doctor.city)+"\n                                        ")]):t._e(),t._v(" "),t.patient.doctor.entityName&&t.patient.doctor.city?s("span",[t._v("\n                                            "+t._s(t.patient.doctor.entityName)+",\n                                            "+t._s(t.patient.doctor.city)+"\n                                        ")]):t._e()])]):t._e(),t._v(" "),!1!==t.patient.addRequestDoctor||t.loadingDoctor?t._e():s("div",[s("p",[t._v("En attente de validation")])])])]):t._e()])],1),t._v(" "),t.doctorView?s("section",{staticClass:"kiv-block desktop-view",attrs:{id:"patient"}},[s("h2",[t._v("Le patient")]),t._v(" "),t.myDoctorContent?s("div",{staticClass:"patient-details"},[s("div",{staticClass:"patient-avatar"},[s("vs-avatar",{staticClass:"avatar",attrs:{circle:"",size:"116"}},[s("img",{attrs:{src:t.patient.avatarUrl?t.patient.avatarUrl:"/img/avatar-default.svg",alt:"Avatar de "+t.patient.firstname+" "+t.patient.lastname}})])],1),t._v(" "),s("div",{staticClass:"patient-infos"},[s("div",[s("p",{staticClass:"name"},[t._v("\n                                    "+t._s(t.getUserName(t.patient))+"\n                                ")]),t._v(" "),t.patient.birthdate?s("p",{staticClass:"birthdate"},[t._v("\n                                    "+t._s(t.getAge(t.patient.birthdate))+" ans\n                                ")]):t._e()])])]):t._e()]):t._e()],1),t._v(" "),s("MyExerciseStats",{attrs:{patient:t.patient,doctorView:t.doctorView,patientWorksheets:t.patientWorksheets,loadingPatientWorksheets:t.loadingPatientWorksheets}})],1)]):s("DoctorChoice",{attrs:{patient:t.patient,csrfTokenSelectDoctor:t.csrfTokenSelectDoctor,csrfTokenContact:t.csrfTokenContact}})],1)};n._withStripped=!0;i(7327),i(1249),i(4747),i(2222),i(7941),i(2526),i(5003),i(9337),i(1817),i(1539),i(2165),i(6992),i(8783),i(3948);var a=i(381),o=i.n(a),r=i(4098),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{attrs:{id:"doctor-choice"}},[i("h1",[t._v("Bienvenue sur Kivid !")]),t._v(" "),t._m(0),t._v(" "),i("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.hideSelectBox,expression:"hideSelectBox"}],staticClass:"select-filter",class:{loading:t.loading}},[t.loading?t._e():i("div",[t.doctorSelected?i("div",{staticClass:"doctor-selected doctor",on:{click:t.resetSelect}},[i("vs-avatar",{staticClass:"avatar",attrs:{circle:"",size:"35"}},[i("img",{attrs:{src:t.doctorSelected.avatarUrl?t.doctorSelected.avatarUrl:"/img/avatar-default.svg",alt:"Avatar de "+t.doctorSelected.firstname+" "+t.doctorSelected.lastname}})]),t._v(" "),i("div",{staticClass:"name"},[t._v("\n                    "+t._s(t.getUserName(t.doctorSelected))+"\n                ")])],1):i("input",{directives:[{name:"model",rawName:"v-model",value:t.filter,expression:"filter"}],class:{"b-r-b-zero":t.selectBox,"placeholder-gray":t.selectBox},attrs:{id:"doctor-choice-select",placeholder:t.selectBox?"Recherchez un praticien":"Sélectionnez un praticien",autocomplete:"off"},domProps:{value:t.filter},on:{click:function(e){t.selectBox=!0},keyup:t.selectBoxWithThrottle,input:function(e){e.target.composing||(t.filter=e.target.value)}}}),t._v(" "),i("div",{staticClass:"arrow-toggle-box",class:{active:t.selectBox},on:{click:t.toggleSelectBox}},[i("i",{staticClass:"kiv-chevron-down icon-3"})]),t._v(" "),i("transition",{attrs:{name:"height"}},[t.selectBox?i("div",{staticClass:"select-box",on:{click:t.focusInputSelect}},[t.getDoctors.length?i("ul",t._l(t.getDoctors,(function(e,s){return i("li",{key:s},[i("div",{staticClass:"doctor",on:{click:function(i){return t.selectDoctor(e)}}},[i("vs-avatar",{staticClass:"avatar",attrs:{circle:"",size:"35"}},[i("img",{attrs:{src:e.avatarUrl?e.avatarUrl:"/img/avatar-default.svg",alt:"Avatar de "+e.firstname+" "+e.lastname}})]),t._v(" "),i("div",{staticClass:"name"},[t._v("\n                                    "+t._s(t.getUserName(e))+"\n                                ")])],1)])})),0):i("div",[i("p",{staticClass:"not-found"},[i("i",{staticClass:"fas fa-users-slash"}),t._v(" "),i("span",[t._v("\n                                Aucun praticien n'a été trouvé avec \""),i("strong",[t._v(t._s(t.filter))]),t._v('"')])])])]):t._e()])],1)]),t._v(" "),i("a",{staticClass:"contact",on:{click:function(e){t.modalContact=!0}}},[t._v("Vous n'avez pas de praticien ?")]),t._v(" "),i("div",{staticClass:"btn-container"},[i("vs-button",{attrs:{disabled:!t.doctorSelected},on:{click:t.valideDoctorChoice}},[t._v("Valider et accéder à mon dashboard")])],1),t._v(" "),i("vs-dialog",{attrs:{width:"450px"},model:{value:t.modalContact,callback:function(e){t.modalContact=e},expression:"modalContact"}},[i("h2",[t._v("Je n'ai pas de praticien")]),t._v(" "),i("div",{staticClass:"contact-form"},[i("vs-input",{attrs:{"label-placeholder":"Prénom",type:"text"},model:{value:t.patient.firstname,callback:function(e){t.$set(t.patient,"firstname",e)},expression:"patient.firstname"}}),t._v(" "),i("vs-input",{attrs:{"label-placeholder":"Nom",type:"text"},model:{value:t.patient.lastname,callback:function(e){t.$set(t.patient,"lastname",e)},expression:"patient.lastname"}}),t._v(" "),i("vs-input",{class:{error:t.validationMessage.email&&t.patient.email},attrs:{danger:null!=t.validationMessage.email,"label-placeholder":"Email",autocomplete:"email",type:"email","icon-after":""},on:{keyup:t.validationEmail},scopedSlots:t._u([t.validationMessage.email&&t.patient.email?{key:"icon",fn:function(){return[i("i",{staticClass:"kiv-error error icon-24"})]},proxy:!0}:null,t.validationMessage.email&&t.patient.email?{key:"message-danger",fn:function(){return[t._v("\n                    "+t._s(t.validationMessage.email)+"\n                ")]},proxy:!0}:null],null,!0),model:{value:t.patient.email,callback:function(e){t.$set(t.patient,"email",e)},expression:"patient.email"}}),t._v(" "),i("VuePhoneNumberInput",{class:{filled:null!=t.contactTel,error:t.errorTel},attrs:{"default-country-code":"FR","only-countries":["FR"],"no-example":!0,"no-country-selector":!0,translations:{countrySelectorLabel:"Code pays",countrySelectorError:"Choisir un pays",phoneNumberLabel:"Numéro de téléphone",example:"Exemple :"},color:"#c1b79d","valid-color":"#c1b79d","error-color":"#ff564b",error:t.errorTel},model:{value:t.contactTel,callback:function(e){t.contactTel=e},expression:"contactTel"}})],1),t._v(" "),i("div",{staticClass:"btn-container",class:{disabled:t.btnLoadingValidContact}},[i("vs-button",{staticClass:"w-100",attrs:{disabled:t.validationMessage.email||!t.patient.email||t.btnLoadingValidContact,loading:t.btnLoadingValidContact},on:{click:t.validContact}},[t._v("Me contacter")])],1)])],1)};c._withStripped=!0;i(4916),i(5306);var l=i(2649),d=i.n(l),v=i(8328),u=i.n(v);function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var h={props:{patient:Object,csrfTokenSelectDoctor:String,csrfTokenContact:String},directives:{ClickOutside:d()},components:{VuePhoneNumberInput:u()},data:function(){return{doctors:[],doctorSelected:null,filter:"",selectBox:!1,selectInput:null,loading:!1,footer:null,modalContact:!1,btnLoadingValidContact:!1,validationMessage:{email:null},contactTel:null}},computed:{getDoctors:function(){return r.Z.getSearch(this.doctors,this.filter)},errorTel:function(){var t=!1;if(this.contactTel&&this.contactTel.length>4){var e=this.contactTel.replace(/ /g,"");/^0[1-9]([-. ]?[0-9]{2}){4}$/.test(String(e))||(t=!0)}return t}},methods:{valideDoctorChoice:function(){var t=this;this.axios.post("/patient/".concat(this.patient.id,"/select/doctor"),{_token:this.csrfTokenSelectDoctor,doctorId:this.doctorSelected.id}).then((function(e){r.Z.openSuccessNotification("Choix du praticien enregistré",e.data),t.patient.addRequestDoctor=!0,t.patient.doctor=t.doctorSelected,t.footer.classList.remove("hidden")})).catch((function(t){var e="object"===f(t.response.data)?t.response.data.detail:t.response.data;r.Z.openErrorNotification("Erreur",e)}))},toggleSelectBox:function(){this.selectBox=!this.selectBox,this.doctorSelected&&this.resetSelect(),this.selectBox&&this.focusInputSelect()},hideSelectBox:function(){this.selectBox=!1},selectDoctor:function(t){this.doctorSelected=t,this.hideSelectBox()},resetSelect:function(){var t=this;this.doctorSelected=null,setTimeout((function(){t.selectInput=document.getElementById("doctor-choice-select"),t.selectBox=!0,t.focusInputSelect()}),100)},focusInputSelect:function(){this.selectInput.focus()},getUserName:function(t){return r.Z.getUserName(t)},validContact:function(){var t=this;this.btnLoadingValidContact=!0,this.axios.post("/contact",{_token:this.csrfTokenContact,firstname:this.patient.firstname,lastname:this.patient.lastname,email:this.patient.email,contactTel:this.contactTel}).then((function(e){r.Z.openSuccessNotification("Message envoyé",e.data),t.modalContact=!1,t.btnLoadingValidContact=!1})).catch((function(e){var i="object"===f(e.response.data)?e.response.data.detail:e.response.data;t.modalContact=!1,t.btnLoadingValidContact=!1,r.Z.openErrorNotification("Erreur",i)}))},validationEmail:function(){this.validationMessage.email=null;/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(this.patient.email).toLowerCase())||(this.validationMessage.email="Merci d'entrer un email valide.")},selectBoxWithThrottle:function(){var t=this;this.selectBoxThrottle||(this.selectBoxThrottle=!0,this.selectBox=!0,console.log("selectBox"),setTimeout((function(){t.selectBoxThrottle=!1}),1e3))}},mounted:function(){var t=this;this.footer=document.querySelector(".footer"),this.footer.classList.add("hidden"),null===this.patient.firstname&&(this.patient.firstname=""),null===this.patient.lastname&&(this.patient.lastname=""),this.loading=!0,this.axios.get("/get/doctors").then((function(e){t.doctors=e.data,t.loading=!1})).catch((function(t){t.response&&console.log(t.response.data.detail?t.response.data.detail:t.response.data)})),this.selectInput=document.getElementById("doctor-choice-select")}},p=i(1900),_=(0,p.Z)(h,c,[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("h4",[t._v("\n        Vous n’avez pas encore de praticien attritré. "),i("br"),t._v("\n        Recherchez-en dans la liste ci-dessous.\n    ")])}],!1,null,null,null);_.options.__file="assets/vue/patient/DashboardPage/DoctorChoice.vue";var g=_.exports,m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"kiv-block",class:{reduced:!t.$parent.myScoresContent},attrs:{id:"my-scores"}},[i("button",{staticClass:"toggle-content",on:{click:function(e){t.$parent.myScoresContent=!t.$parent.myScoresContent}}},[i("i",{staticClass:"kiv-chevron-down icon-3"})]),t._v(" "),i("h2",[t.doctorView?t._e():i("span",[t._v("Mes")]),t.doctorView?i("span",[t._v("Ses")]):t._e(),t._v(" indices\n    ")]),t._v(" "),i("transition",{attrs:{name:"height"}},[t.$parent.myScoresContent?i("div",{staticClass:"content"},[i("div",{staticClass:"score-circle"},[i("vue-ellipse-progress",t._b({attrs:{progress:t.getScorePercentage}},"vue-ellipse-progress",t.options,!1)),t._v(" "),i("div",{staticClass:"score-circle-text"},[i("span",{staticClass:"score"},[t._v(t._s(t.formatNumbThousand(t.getScore)))]),t._v(" "),i("p",{staticClass:"unit"},[t._v("Points")])])],1),t._v(" "),i("div",{staticClass:"score-line"},[i("div",{staticClass:"progressbar-base",class:{"loading-gray-dark":t.loading}},[i("div",{staticClass:"progressbar-thumb",class:{max:t.score>=t.scoreMax},style:{width:t.getScorePercentage+"%"}}),t._v(" "),i("div",{staticClass:"progressbar-steps"},[i("div",[i("div",{staticClass:"point"}),t._v(" "),i("span",[t._v("10 000 pts")])]),t._v(" "),i("div",[i("div",{staticClass:"point"}),t._v(" "),i("span",[t._v("20 000 pts")])]),t._v(" "),i("div",[i("div",{staticClass:"point"}),t._v(" "),i("span",[t._v("30 000 pts")])]),t._v(" "),i("div",[i("div",{staticClass:"point"}),t._v(" "),i("span",[t._v("40 000 pts")])])]),t._v(" "),t.loading?t._e():i("div",{staticClass:"progressbar-current-score",class:{start:t.getScorePercentage<20,end:t.getScorePercentage>80},style:{left:t.getScorePercentage<=100?t.getScorePercentage+"%":"100%"}},[i("span",[t.doctorView?t._e():i("span",[t._v("Votre")]),t.doctorView?i("span",[t._v("Son")]):t._e(),t._v(" score\n                            "),i("span",{staticClass:"score"},[t._v(t._s("("+t.formatNumbThousand(t.getScore)+" pts)"))])])]),t._v(" "),i("div",{staticClass:"progressbar-base-end-decoration"},[i("div"),t._v(" "),i("div"),t._v(" "),i("div")])])]),t._v(" "),i("div",{staticClass:"exercise-block score-block"},[i("div",{staticClass:"stat-icon"},[i("i",{staticClass:"kiv-exercise icon-7"})]),t._v(" "),i("h4",{staticClass:"stat-label"},[t._v("Nombre d’exercices faits")]),t._v(" "),i("div",{staticClass:"stat-result"},[t.loadingPatientWorksheets?t._e():i("h3",[t._v("\n                        "+t._s(t.getTotalExerciseCompleted)+"\n                    ")]),t._v(" "),t.loadingPatientWorksheets?i("div",{staticClass:"loading-gray loading-block-h3 w-25"}):t._e()])]),t._v(" "),i("div",{staticClass:"sensitivity-block score-block"},[i("div",{staticClass:"stat-icon"},[i("i",{staticClass:"kiv-sensitivity icon-8"})]),t._v(" "),i("h4",{staticClass:"stat-label"},[t.doctorView?t._e():i("span",[t._v("Votre")]),t.doctorView?i("span",[t._v("Sa")]):t._e(),t._v(" sensibilité\n                ")]),t._v(" "),i("div",{staticClass:"stat-result"},[t.loadingPatientWorksheets?t._e():i("h3",[t.getSensitivityVariation&&"up"===t.getSensitivityVariation.variation?i("span",[t._v("\n                            En amélioration\n                        ")]):t._e(),t._v(" "),t.getSensitivityVariation&&"down"===t.getSensitivityVariation.variation?i("span",[t._v("\n                            En baisse\n                        ")]):t._e(),t._v(" "),t.getSensitivityVariation&&"equal"===t.getTechnicalVariation.variation?i("span",[t._v("\n                            Stable\n                        ")]):t._e(),t._v(" "),t.getSensitivityVariation?t._e():i("span",[t._v("\n                            Bientôt !\n                        ")])]),t._v(" "),t.getSensitivityVariation&&!t.loadingPatientWorksheets&&"up"===t.getSensitivityVariation.variation?i("div",{staticClass:"stat-variation green"},[t._v("\n                        ("),i("i",{staticClass:"kiv-variation-up icon-27"}),i("span",[t._v("+"+t._s(t.getSensitivityVariation.result)+"%")]),t._v(")\n                    ")]):t._e(),t._v(" "),t.getSensitivityVariation&&!t.loadingPatientWorksheets&&"down"===t.getSensitivityVariation.variation?i("div",{staticClass:"stat-variation red"},[t._v("\n                        ("),i("i",{staticClass:"kiv-variation-down icon-28"}),i("span",[t._v(t._s(t.getSensitivityVariation.result)+"%")]),t._v(")\n                    ")]):t._e(),t._v(" "),t.loadingPatientWorksheets?i("div",{staticClass:"loading-gray loading-block-h3 w-75"}):t._e()])]),t._v(" "),i("div",{staticClass:"technical-block score-block"},[i("div",{staticClass:"stat-icon"},[i("i",{staticClass:"kiv-technical icon-9"})]),t._v(" "),i("h4",{staticClass:"stat-label"},[t.doctorView?t._e():i("span",[t._v("Votre")]),t.doctorView?i("span",[t._v("Sa")]):t._e(),t._v(" technique\n                ")]),t._v(" "),i("div",{staticClass:"stat-result"},[t.loadingPatientWorksheets?t._e():i("h3",[t.getTechnicalVariation&&"up"===t.getTechnicalVariation.variation?i("span",[t._v("\n                            En amélioration\n                        ")]):t._e(),t._v(" "),t.getTechnicalVariation&&"down"===t.getTechnicalVariation.variation?i("span",[t._v("\n                            En baisse\n                        ")]):t._e(),t._v(" "),t.getTechnicalVariation&&"equal"===t.getTechnicalVariation.variation?i("span",[t._v("\n                            Stable\n                        ")]):t._e(),t._v(" "),t.getTechnicalVariation?t._e():i("span",[t._v("\n                            Bientôt !\n                        ")])]),t._v(" "),t.getTechnicalVariation&&!t.loadingPatientWorksheets&&"up"===t.getTechnicalVariation.variation?i("div",{staticClass:"stat-variation green"},[t._v("\n                        ("),i("i",{staticClass:"kiv-variation-up icon-27"}),i("span",[t._v("+"+t._s(t.getTechnicalVariation.result)+"%")]),t._v(")\n                    ")]):t._e(),t._v(" "),t.getTechnicalVariation&&!t.loadingPatientWorksheets&&"down"===t.getTechnicalVariation.variation?i("div",{staticClass:"stat-variation red"},[t._v("\n                        ("),i("i",{staticClass:"kiv-variation-down icon-28"}),i("span",[t._v(t._s(t.getTechnicalVariation.result)+"%")]),t._v(")\n                    ")]):t._e(),t._v(" "),t.loadingPatientWorksheets?i("div",{staticClass:"loading-gray loading-block-h3 w-75"}):t._e()])]),t._v(" "),i("ScoreRankBlock",{attrs:{rank:t.getRank,loading:t.loading,doctorView:t.doctorView}})],1):t._e()])],1)};m._withStripped=!0;i(2707),i(2420),i(9714),i(1038),i(7042),i(8309);var k=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"score-rank-block score-block",class:{nouveau:"nouveau"===t.rank,debutant:"debutant"===t.rank,amateur:"amateur"===t.rank,intermediaire:"intermediaire"===t.rank,confirme:"confirme"===t.rank,expert:"expert"===t.rank}},[s("transition",{attrs:{name:"fade",mode:"out-in"}},[t.loading||"nouveau"!==t.rank?t._e():s("div",{key:"nouveau"},[s("h4",[t.doctorView?t._e():s("span",[t._v("Votre")]),t.doctorView?s("span",[t._v("Son")]):t._e(),t._v(" niveau\n            ")]),t._v(" "),s("i",{staticClass:"rank-img"},[s("img",{attrs:{src:i(9402),alt:"Icone du rang nouveau patient"}})]),t._v(" "),s("p",{staticClass:"rank-label"},[t._v("Nouveau Patient")]),t._v(" "),s("p",{staticClass:"rank-result"},[t._v("C’est parti pour aller mieux !")])]),t._v(" "),t.loading||"debutant"!==t.rank?t._e():s("div",{key:"debutant"},[s("h4",[t._v("Votre niveau")]),t._v(" "),s("i",{staticClass:"rank-img"},[s("img",{attrs:{src:i(8737),alt:"Icone du rang débutant"}})]),t._v(" "),s("p",{staticClass:"rank-label"},[t._v("Patient Débutant")]),t._v(" "),s("p",{staticClass:"rank-result"},[t._v('Muscle ton jeu "Robert" !')])]),t._v(" "),t.loading||"amateur"!==t.rank?t._e():s("div",{key:"amateur"},[s("h4",[t._v("Votre niveau")]),t._v(" "),s("i",{staticClass:"rank-img"},[s("img",{attrs:{src:i(5057),alt:"Icone du rang amateur"}})]),t._v(" "),s("p",{staticClass:"rank-label"},[t._v("Patient Amateur")]),t._v(" "),s("p",{staticClass:"rank-result"},[t._v("La tête dans le guidon !")])]),t._v(" "),t.loading||"intermediaire"!==t.rank?t._e():s("div",{key:"intermediaire"},[s("h4",[t._v("Votre niveau")]),t._v(" "),s("i",{staticClass:"rank-img"},[s("img",{attrs:{src:i(8513),alt:"Icone du rang intermédiaire"}})]),t._v(" "),s("p",{staticClass:"rank-label"},[t._v("Patient Intermédiaire")]),t._v(" "),s("p",{staticClass:"rank-result"},[t._v("Bien dans tes Baskets !")])]),t._v(" "),t.loading||"confirme"!==t.rank?t._e():s("div",{key:"confirme"},[s("h4",[t._v("Votre niveau")]),t._v(" "),s("i",{staticClass:"rank-img"},[s("img",{attrs:{src:i(8513),alt:"Icone 1 du rang confirmé"}}),t._v(" "),s("img",{attrs:{src:i(8513),alt:"Icone 2 du rang confirmé"}})]),t._v(" "),s("p",{staticClass:"rank-label"},[t._v("Patient Confirmé")]),t._v(" "),s("p",{staticClass:"rank-result"},[t._v("Pas le temps de niaiser !")])]),t._v(" "),t.loading||"expert"!==t.rank?t._e():s("div",{key:"expert"},[s("h4",[t._v("Votre niveau")]),t._v(" "),s("i",{staticClass:"rank-img"},[s("img",{attrs:{src:i(8513),alt:"Icone 1 du rang expert"}}),t._v(" "),s("img",{attrs:{src:i(8513),alt:"Icone 2 du rang expert"}}),t._v(" "),s("img",{attrs:{src:i(8513),alt:"Icone 3 du rang expert"}})]),t._v(" "),s("p",{staticClass:"rank-label"},[t._v("Patient Expert")]),t._v(" "),s("p",{staticClass:"rank-result"},[t._v("Prêt pour le prochain Iron Man !")])])]),t._v(" "),t.loading?s("div",{key:"loading",staticClass:"loading-block"},[s("div",{staticClass:"loading h4 w-65"}),t._v(" "),s("div",{staticClass:"loading i"}),t._v(" "),s("div",{staticClass:"loading rank-label"}),t._v(" "),s("div",{staticClass:"loading rank-result w-85"})]):t._e()],1)};k._withStripped=!0;var b={props:{rank:String,loading:Boolean,doctorView:Boolean}},y=(0,p.Z)(b,k,[],!1,null,"2ea27674",null);y.options.__file="assets/vue/patient/DashboardPage/MyScores/ScoreRankBlock.vue";var C=y.exports;function S(t){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function w(t){return function(t){if(Array.isArray(t))return x(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return x(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return x(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}var T={props:{patient:Object,patientWorksheets:Array,loadingPatientWorksheets:Boolean,doctorView:Boolean},components:{ScoreRankBlock:C},data:function(){return{loading:!1,score:0,scoreMax:5e4,options:{color:"#FF6332","empty-color":"#ffc6b5",size:130,thickness:5,"empty-thickness":3,"line-mode":"out 5",animation:"rs 700 1000",legend:!1}}},computed:{getScore:function(){return this.score},getScorePercentage:function(){if(this.score>0){var t=100*this.score/this.scoreMax;return t>100&&(t=100),t>1?t:1}return 1},getRank:function(){return this.score>=0&&this.score<1e4?"nouveau":this.score>=1e4&&this.score<2e4?"debutant":this.score>=2e4&&this.score<3e4?"amateur":this.score>=3e4&&this.score<4e4?"intermediaire":this.score>=4e4&&this.score<5e4?"confirme":this.score>=5e4?"expert":void 0},getTotalExerciseCompleted:function(){var t=0;return this.patientWorksheets.forEach((function(e){t+=e.exerciseStats.length})),this.formatNumbThousand(Math.floor(t/3))},getSensitivityVariation:function(){return this.calculVariation("sensitivity")},getTechnicalVariation:function(){return this.calculVariation("technical")}},methods:{calculVariation:function(t){var e=[];this.patientWorksheets.forEach((function(i){e=[].concat(w(e),w(i.exerciseStats.filter((function(e){return e.criterion===t}))))}));var i=0;if(!(e.length>1))return null;var s=e.sort((function(t,e){return new Date(t.doneAt)-new Date(e.doneAt)})).filter((function(t,i){return i>e.length-1-1})),n=this.statsAverage(s);if(!s.length)return null;var a=e.sort((function(t,e){return new Date(t.doneAt)-new Date(e.doneAt)})).filter((function(t,i){return i<=e.length-1-1})),o=this.statsAverage(a);return{variation:0===(i=Math.round(10*(n-o)*10)/10)?"equal":1===Math.sign(i)?"up":"down",result:i}},formatNumbThousand:function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")},statsAverage:function(t){return Math.round(t.reduce((function(t,e){return t=parseInt(t+e.rating)}),[])/t.length*10)/10}},mounted:function(){var t=this;this.loading=!0,this.axios.get("/patient/".concat(this.patient.id,"/get/score")).then((function(e){if(t.score=e.data.score?e.data.score:0,e.data.notifScoreRank){var i=document.getElementById("user-notif-list");document.getElementById("notif-bell").classList.add("has-notifications");var s=document.createElement("li");s.classList.add("prio"),s.classList.add("active"),s.addEventListener("mouseover",(function(){s.classList.remove("active")}),!1);var n=document.createElement("div");n.classList.add("notif-icon");var a=document.createElement("img");a.src="/img/icons/colored/confettis.svg",a.alt="Icone de confettis",a.classList.add("icon-confettis");var o=document.createElement("p"),r=document.createElement("span");r.innerText="Vous avez atteint le niveau ".concat(e.data.notifScoreRank," ! Félicitations !"),o.appendChild(r),n.appendChild(a),s.appendChild(n),s.appendChild(o),i.appendChild(s)}t.loading=!1})).catch((function(t){var e="object"===S(t.response.data)?t.response.data.detail:t.response.data;console.error(e)}))}},D=(0,p.Z)(T,m,[],!1,null,"2a90fada",null);D.options.__file="assets/vue/patient/DashboardPage/MyScores.vue";var O=D.exports,W=function(){var t=this,e=t.$createElement,i=t._self._c||e;return!t.getDashboardNotifications.length&&t.patient.birthdate&&t.patient.gender&&t.patient.firstname&&t.patient.lastname&&t.patient.isVerified?t._e():i("section",{staticClass:"kiv-block",class:{reduced:!t.$parent.myDBNotificationsContent},attrs:{id:"dashboard-notifications"}},[i("button",{staticClass:"toggle-content",on:{click:function(e){t.$parent.myDBNotificationsContent=!t.$parent.myDBNotificationsContent}}},[i("i",{staticClass:"kiv-chevron-down icon-3"})]),t._v(" "),i("h2",[t._v("Notifications")]),t._v(" "),i("transition",{attrs:{name:"height"}},[t.$parent.myDBNotificationsContent?i("div",{staticClass:"notifications-list"},[t._l(t.getDashboardNotifications,(function(e,s){return i("div",{key:s},[t.loading||"add-patient"!==e.content[0].type?t._e():i("div",{staticClass:"notifications-item"},[i("p",{staticClass:"notification-label"},t._l(e.content,(function(e,s){return i("span",{key:s},["text"===e.type?i("span",[t._v("\n                                "+t._s(e.content)+"\n                            ")]):t._e(),t._v(" "),"user"===e.type?i("span",[t._v("\n                                "+t._s(e.content)+"\n                            ")]):t._e()])})),0),t._v(" "),i("div",{staticClass:"notification-actions",class:{disabled:t.actionInProgress}},[i("a",{staticClass:"action-link green",on:{click:function(i){return t.acceptDoctor(e.id)}}},[i("i",{staticClass:"kiv-accept icon-22"}),t._v(" "),i("span",[t._v("Accepter")])]),t._v(" "),i("a",{staticClass:"action-link red",on:{click:function(i){return t.declineDoctor(e.id)}}},[i("i",{staticClass:"kiv-decline icon-6"}),t._v(" "),i("span",[t._v("Refuser")])])])])])})),t._v(" "),t.loading||t.patient.isVerified?t._e():i("div",{staticClass:"notifications-item"},[i("p",{staticClass:"notification-label"},[t._v("\n                    Vérifier votre adresse email\n                ")]),t._v(" "),i("div",{staticClass:"notification-actions",class:{disabled:t.actionInProgress}},[i("a",{staticClass:"action-link verif-mail",on:{click:function(e){return t.resendVerifEmail()}}},[i("i",{staticClass:"fas fa-envelope"}),t._v(" "),i("span",[t._v("Renvoyer lien")])])])]),t._v(" "),t.loading||t.patient.birthdate&&t.patient.gender&&t.patient.firstname&&t.patient.lastname?t._e():i("div",{staticClass:"notifications-item"},[i("p",{staticClass:"notification-label"},[t._v("Compléter votre profil")]),t._v(" "),i("div",{staticClass:"notification-actions"},[i("a",{staticClass:"action-link",attrs:{href:"/parametres"}},[i("i",{staticClass:"kiv-pen icon-4"}),t._v(" "),i("span",[t._v("Compléter")])])])]),t._v(" "),t.loading?i("div",[i("div",{staticClass:"loading-block notifications-item"},[i("p",{staticClass:"loading w-60 notification-label"}),t._v(" "),i("div",{staticClass:"loading w-25 notification-actions"})]),t._v(" "),i("div",{staticClass:"loading-block notifications-item"},[i("p",{staticClass:"loading w-30 notification-label"}),t._v(" "),i("div",{staticClass:"loading w-30 notification-actions"})])]):t._e()],2):t._e()])],1)};W._withStripped=!0;i(561),i(9826);function P(t){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var V={data:function(){return{dashboardNotifications:[],actionInProgress:!1,loading:!1}},props:{patient:Object,csrfTokenAcceptDoctor:String,csrfTokenDeclineDoctor:String},computed:{getDashboardNotifications:function(){return this.dashboardNotifications}},methods:{getDBNotifications:function(){var t=this;this.loading=!0,this.axios.get("/patient/".concat(this.patient.id,"/get/patient-dashboard-notifications")).then((function(e){t.dashboardNotifications=e.data,t.loading=!1})).catch((function(t){var e="object"===P(t.response.data)?t.response.data.detail:t.response.data;console.error(e)}))},acceptDoctor:function(t){var e=this;this.actionInProgress=!0,this.axios.post("/patient/".concat(this.patient.id,"/accept/doctor"),{_token:this.csrfTokenAcceptDoctor,notificationId:t,doctorId:this.patient.doctor.id}).then((function(i){r.Z.openSuccessNotification("Demande d'ajout acceptée",i.data),e.patient.addRequestDoctor=!0,e.dashboardNotifications.splice(e.dashboardNotifications.indexOf(e.dashboardNotifications.find((function(e){return e.id===t}))),1),e.actionInProgress=!1})).catch((function(t){var i="object"===P(t.response.data)?t.response.data.detail:t.response.data;r.Z.openErrorNotification("Erreur",i),e.actionInProgress=!1}))},declineDoctor:function(t){var e=this;this.actionInProgress=!0,this.axios.post("/patient/".concat(this.patient.id,"/decline/doctor"),{_token:this.csrfTokenDeclineDoctor,notificationId:t,doctorId:this.patient.doctor.id}).then((function(i){r.Z.openSuccessNotification("Demande d'ajout refusée",i.data),e.dashboardNotifications.splice(e.dashboardNotifications.indexOf(e.dashboardNotifications.find((function(e){return e.id===t}))),1),e.actionInProgress=!1})).catch((function(t){var i="object"===P(t.response.data)?t.response.data.detail:t.response.data;r.Z.openErrorNotification("Erreur",i),e.actionInProgress=!1}))},resendVerifEmail:function(){var t=this;this.actionInProgress=!0,this.axios.get("/patient/".concat(this.patient.id,"/resend/verify-email")).then((function(e){r.Z.openSuccessNotification("E-mail de vérification envoyé",e.data),t.actionInProgress=!1})).catch((function(e){var i="object"===P(e.response.data)?e.response.data.detail:e.response.data;r.Z.openErrorNotification("Erreur",i),t.actionInProgress=!1}))}},created:function(){this.getDBNotifications()}},B=(0,p.Z)(V,W,[],!1,null,null,null);B.options.__file="assets/vue/patient/DashboardPage/MyDashboardNotifications.vue";var E=B.exports,U=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"kiv-block",class:{reduced:!t.$parent.myWorksheetsContent},attrs:{id:"my-worksheets"}},[i("button",{staticClass:"toggle-content",on:{click:function(e){t.$parent.myWorksheetsContent=!t.$parent.myWorksheetsContent}}},[i("i",{staticClass:"kiv-chevron-down icon-3"})]),t._v(" "),i("h2",[t.doctorView?t._e():i("span",[t._v("Mes")]),t.doctorView?i("span",[t._v("Ses")]):t._e(),t._v(" fiches\n    ")]),t._v(" "),i("transition",{attrs:{name:"height"}},[t.$parent.myWorksheetsContent?i("div",{staticClass:"worksheet-list"},[!t.loadingPatientWorksheets&&t.getPatientWorksheets.length?i("div",{staticClass:"wl-patient"},t._l(t.getPatientWorksheets,(function(e,s){return i("div",{key:s},[i("div",{staticClass:"worksheet-header"},[i("h3",{staticClass:"worksheet-title"},[t._v("\n                            "+t._s(e.title)+"\n                        ")]),t._v(" "),i("TagPartOfBody",{class:{completed:e.currentWorksheetSession&&e.currentWorksheetSession.isCompleted||!e.currentWorksheetSession&&e.exerciseStats.length>0},attrs:{partOfBody:e.partOfBody}})],1),t._v(" "),e.currentWorksheetSession&&!e.currentWorksheetSession.isCompleted&&e.currentWorksheetSession.isInProgress?i("div",{staticClass:"worksheet-progress-line"},[i("div",{staticClass:"progressbar-base"},[i("div",{staticClass:"progressbar-thumb",style:{width:e.worksheetProgression+"%"}}),t._v(" "),i("div",{staticClass:"progressbar-steps"},[i("div",[i("div",{staticClass:"point"}),t._v(" "),t.doctorView?t._e():i("span",[t._v("Vous avez fini la fiche !")]),t._v(" "),t.doctorView&&e.currentWorksheetSession?i("span",[t._v("En cours")]):t._e(),t._v(" "),t.doctorView&&!e.currentWorksheetSession&&0===e.exerciseStats.length?i("span",[t._v("Non démarrée")]):t._e()])])])]):t._e(),t._v(" "),e.currentWorksheetSession&&!e.currentWorksheetSession.isCompleted&&!e.currentWorksheetSession.isInProgress||!e.currentWorksheetSession&&0===e.exerciseStats.length?i("div",{staticClass:"worksheet-progress-line"},[i("div",{staticClass:"progressbar-base"},[i("div",{staticClass:"progressbar-thumb",style:{width:"0%"}}),t._v(" "),i("div",{staticClass:"progressbar-steps"},[i("div",[i("div",{staticClass:"point"}),t._v(" "),t.doctorView?t._e():i("span",[t._v("Vous avez fini la fiche !")]),t._v(" "),t.doctorView&&e.currentWorksheetSession?i("span",[t._v("En cours")]):t._e(),t._v(" "),t.doctorView&&!e.currentWorksheetSession&&0===e.exerciseStats.length?i("span",[t._v("Non démarrée")]):t._e()])])])]):t._e(),t._v(" "),e.currentWorksheetSession&&e.currentWorksheetSession.isCompleted||!e.currentWorksheetSession&&e.exerciseStats.length>0?i("div",{staticClass:"worksheet-content session-completed"},[e.currentWorksheetSession&&e.totalWorksheetSessions!=e.currentWorksheetSession.execOrder?i("p",[t.doctorView?t._e():i("span",[t._v("\n                                Bravo, vos exercices de cette session ont\n                                été faits avec succès ! "),i("br"),t._v(" "),i("transition",{attrs:{name:"fade"}},[e.timeLeftBeforeNextSession?i("span",[t._v("\n                                        Rendez-vous dans\n                                        "),i("strong",[t._v(t._s(e.timeLeftBeforeNextSession))]),t._v("\n                                        pour une nouvelle session.\n                                    ")]):t._e()])],1),t._v(" "),t.doctorView?i("span",[t._v("\n                                Exercices terminés pour cette session."),i("br"),t._v(" "),i("transition",{attrs:{name:"fade"}},[e.timeLeftBeforeNextSession?i("span",[t._v("\n                                        Prochaine session dans\n                                        "),i("strong",[t._v(t._s(e.timeLeftBeforeNextSession))]),t._v(".\n                                    ")]):t._e()])],1):t._e()]):t._e(),t._v(" "),!e.currentWorksheetSession&&e.exerciseStats.length>0||e.totalWorksheetSessions==e.currentWorksheetSession.execOrder?i("p",[t.doctorView?t._e():i("span",[t._v("Félicitations, votre traitement est terminé\n                                !")]),t._v(" "),t.doctorView?i("span",[t._v("Traitement terminé.")]):t._e(),t._v(" "),i("br")]):t._e(),t._v(" "),t.doctorView?t._e():i("vs-button",{staticClass:"btn-consult",attrs:{disabled:t.redirectInProgress===e.id},on:{click:function(i){return t.redirectToWorksheetPage(e.id)}}},[t._v("\n                            Consulter\n                        ")]),t._v(" "),t.doctorView?i("vs-button",{staticClass:"btn-consult",attrs:{disabled:t.redirectInProgress===e.id},on:{click:function(i){return t.redirectToDoctorView(e.id)}}},[t._v("\n                            Voir\n                        ")]):t._e()],1):i("div",{staticClass:"worksheet-content"},[i("div",{staticClass:"worksheet-details"},[i("div",{staticClass:"worksheet-exercises-count"},[i("i",{staticClass:"kiv-exercise icon-7"}),t._v(" "),i("span",{staticClass:"b"},[t._v(t._s(e.exercises.length))]),t._v("\n                                exercice"),e.exercises.length>1?i("span",[t._v("s")]):t._e()]),t._v(" "),i("div",{staticClass:"worksheet-timing"},[i("i",{staticClass:"kiv-calendar icon-10"}),t._v(" "),i("span",{staticClass:"b"},[t._v(t._s(e.perDay)+"x")]),t._v("\n                                par jour -\n                                "),i("span",{staticClass:"b"},[t._v(t._s(e.perWeek)+"x")]),t._v("\n                                par semaine\n                            ")]),t._v(" "),i("div",{staticClass:"worksheet-period"},[i("i",{staticClass:"kiv-clock icon-11"}),t._v("\n                                Période :\n                                "),i("span",{staticClass:"b"},[t._v(t._s(e.duration)+" semaine"),e.duration>1?i("span",[t._v("s")]):t._e()])])]),t._v(" "),i("div",{staticClass:"buttons"},[t.doctorView?t._e():i("vs-button",{staticClass:"btn-go",attrs:{disabled:t.redirectInProgress===e.id,circle:"",floating:""},on:{click:function(i){return t.redirectToWorksheetPage(e.id)}}},[t._v("\n                                Go !\n                            ")]),t._v(" "),t.doctorView?i("vs-button",{staticClass:"btn-go",attrs:{disabled:t.redirectInProgress===e.id||!e.currentWorksheetSession&&0===e.exerciseStats.length,circle:"",floating:""},on:{click:function(i){return t.redirectToDoctorView(e.id)}}},[t._v("\n                                Voir\n                            ")]):t._e()],1)])])})),0):t._e(),t._v(" "),t.loadingPatientWorksheets||t.getPatientWorksheets.length?t._e():i("div",{staticClass:"not-found"},[i("p",[i("i",{staticClass:"fas fa-folder-minus"}),t._v(" "),t.doctorView?t._e():i("span",[t._v("Vous n'avez pas de fiche")]),t._v(" "),t.doctorView?i("span",[t._v("Le patient n'a pas encore de fiche")]):t._e()])]),t._v(" "),t.loadingPatientWorksheets?i("div",[i("div",{staticClass:"loading loading-block"},[i("div",{staticClass:"worksheet-header"},[i("div",{staticClass:"loading worksheet-title w-25"}),t._v(" "),i("div",{staticClass:"loading part-of-body"})]),t._v(" "),i("div",{staticClass:"loading worksheet-progress-line"}),t._v(" "),i("div",{staticClass:"worksheet-content"},[i("div",{staticClass:"worksheet-details"},[i("div",{staticClass:"\n                                    loading\n                                    worksheet-exercises-count\n                                    w-35\n                                "}),t._v(" "),i("div",{staticClass:"loading worksheet-timing w-25"}),t._v(" "),i("div",{staticClass:"loading worksheet-period w-35"})]),t._v(" "),i("div",{staticClass:"buttons"},[i("div",{staticClass:"loading btn-go"})])])]),t._v(" "),i("div",{staticClass:"loading loading-block"},[i("div",{staticClass:"worksheet-header"},[i("div",{staticClass:"loading worksheet-title w-45"}),t._v(" "),i("div",{staticClass:"loading part-of-body"})]),t._v(" "),i("div",{staticClass:"loading worksheet-progress-line"}),t._v(" "),i("div",{staticClass:"worksheet-content"},[i("div",{staticClass:"worksheet-details"},[i("div",{staticClass:"\n                                    loading\n                                    worksheet-exercises-count\n                                    w-15\n                                "}),t._v(" "),i("div",{staticClass:"loading worksheet-timing w-35"}),t._v(" "),i("div",{staticClass:"loading worksheet-period w-25"})]),t._v(" "),i("div",{staticClass:"buttons"},[i("div",{staticClass:"loading btn-go"})])])])]):t._e()]):t._e()])],1)};U._withStripped=!0;var M=i(4117),N={props:{patient:Object,patientWorksheets:Array,loadingPatientWorksheets:Boolean,doctorView:Boolean,doctor:Object},components:{TagPartOfBody:M.Z},data:function(){return{redirectInProgress:null}},computed:{getPatientWorksheets:function(){return this.sortByCreatedAt(this.patientWorksheets)}},methods:{sortByCreatedAt:function(t){return t.sort((function(t,e){return new Date(e.createdAt)-new Date(t.createdAt)})),t},redirectToWorksheetPage:function(t){this.redirectInProgress=t,document.location.href="/patient/".concat(this.patient.id,"/fiche/").concat(t)},redirectToDoctorView:function(t){this.redirectInProgress=t,document.location.href="/doctor/".concat(this.doctor.id,"/voir/").concat(t,"/").concat(this.patient.id,"/?ref=dashp")}}},A=(0,p.Z)(N,U,[],!1,null,null,null);A.options.__file="assets/vue/patient/DashboardPage/MyWorksheets.vue";var I=A.exports,L=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"my-exercise-stats"}},[s("section",{staticClass:"kiv-block",attrs:{id:"sensitivity"}},[t._m(0),t._v(" "),t.getPatientWorksheets.length?s("div",{staticClass:"content"},[s("div",{staticClass:"buttons"},[s("vs-button-group",[s("vs-button",{attrs:{active:"day"===t.sensitivityUnitOfTime,flat:""},on:{click:function(e){return t.changeSensitivityUnitOfTime("day")}}},[t._v("\n                        Jour\n                    ")]),t._v(" "),s("vs-button",{attrs:{active:"week"===t.sensitivityUnitOfTime,flat:""},on:{click:function(e){return t.changeSensitivityUnitOfTime("week")}}},[t._v("\n                        Semaine\n                    ")]),t._v(" "),s("vs-button",{attrs:{active:"month"===t.sensitivityUnitOfTime,flat:""},on:{click:function(e){return t.changeSensitivityUnitOfTime("month")}}},[t._v("\n                        Mois\n                    ")]),t._v(" "),s("vs-button",{attrs:{active:"year"===t.sensitivityUnitOfTime,flat:""},on:{click:function(e){return t.changeSensitivityUnitOfTime("year")}}},[t._v("\n                        Année\n                    ")])],1)],1),t._v(" "),s("div",{staticClass:"kiv-select"},[s("vs-select",{attrs:{placeholder:"Select"},on:{change:function(e){return t.resetDisableWorksheets("sensitivity")}},model:{value:t.sensitivityUnitOfTime,callback:function(e){t.sensitivityUnitOfTime=e},expression:"sensitivityUnitOfTime"}},[s("vs-option",{attrs:{label:"Jour",value:"day"}},[t._v(" Jour ")]),t._v(" "),s("vs-option",{attrs:{label:"Semaine",value:"week"}},[t._v("\n                        Semaine\n                    ")]),t._v(" "),s("vs-option",{attrs:{label:"Mois",value:"month"}},[t._v(" Mois ")]),t._v(" "),s("vs-option",{attrs:{label:"Année",value:"year"}},[t._v("\n                        Année\n                    ")])],1)],1),t._v(" "),t.loadingPatientWorksheets?t._e():s("chartist",{class:{"hide-content":!t.sensitivityExerciseStats.series.length,labelsl:t.sensitivityExerciseStats.labels.length>=25,labelsm:t.sensitivityExerciseStats.labels.length>=12&&t.sensitivityExerciseStats.labels.length<25,labelss:t.sensitivityExerciseStats.labels.length>=5&&t.sensitivityExerciseStats.labels.length<12},attrs:{ratio:"ct-major-second",type:"Line",data:t.sensitivityExerciseStats,options:t.sensitivityChartOptions,"event-handlers":t.eventHandlers}},[s("div",{staticClass:"axisY-labels sensitivity"},[s("i",[s("img",{attrs:{src:i(1407),alt:"Smiley qui va très mal"}})]),t._v(" "),s("i",[s("img",{attrs:{src:i(70),alt:"Smiley qui va mal"}})]),t._v(" "),s("i",[s("img",{attrs:{src:i(889),alt:"Smiley qui va pas bien"}})]),t._v(" "),s("i",[s("img",{attrs:{src:i(5988),alt:"Smiley qui va bof"}})]),t._v(" "),s("i",[s("img",{attrs:{src:i(1867),alt:"Smiley perplexe"}})]),t._v(" "),s("i",[s("img",{attrs:{src:i(4857),alt:"Smiley qui va bien"}})]),t._v(" "),s("i",[s("img",{attrs:{src:i(1703),alt:"Smiley qui va très bien"}})]),t._v(" "),s("i",[s("img",{attrs:{src:i(6240),alt:"Smiley très content"}})]),t._v(" "),s("i",[s("img",{attrs:{src:i(2213),alt:"Smiley aux anges"}})])])]),t._v(" "),t.loadingPatientWorksheets?t._e():s("div",{staticClass:"btns-worksheets-stats sensitivity"},t._l(t.getPatientWorksheets,(function(e,i){return s("button",{key:i,staticClass:"btn-toggle-worksheet-stats",class:{disactive:t.disableWorksheets.sensitivity.includes(e.id)},on:{click:function(s){return t.toggleHiddenWorksheetLine("sensitivity",i,e.id)}}},[s("div",{staticClass:"line-color",style:{backgroundColor:t.colors[i],border:"5px solid "+t.colors[i]}}),t._v(" "),s("BtnChartWorksheetPartOfBody",{attrs:{worksheet:e}})],1)})),0)],1):t._e(),t._v(" "),t.loadingPatientWorksheets||t.getPatientWorksheets.length?t._e():s("div",{staticClass:"not-found"},[s("p",[s("i",{staticClass:"far fa-calendar-minus"}),t._v(" "),t.doctorView?t._e():s("span",[t._v("Vous n'avez pas encore de statistique")]),t._v(" "),t.doctorView?s("span",[t._v("Le patient n'a pas encore de statistique")]):t._e()])]),t._v(" "),t.loadingPatientWorksheets?s("div",{staticClass:"loading"}):t._e()]),t._v(" "),s("section",{staticClass:"kiv-block",attrs:{id:"technical"}},[t._m(1),t._v(" "),t.getPatientWorksheets.length?s("div",{staticClass:"content"},[s("div",{staticClass:"buttons"},[s("vs-button-group",[s("vs-button",{attrs:{active:"day"===t.technicalUnitOfTime,flat:""},on:{click:function(e){return t.changeTechnicalUnitOfTime("day")}}},[t._v("\n                        Jour\n                    ")]),t._v(" "),s("vs-button",{attrs:{active:"week"===t.technicalUnitOfTime,flat:""},on:{click:function(e){return t.changeTechnicalUnitOfTime("week")}}},[t._v("\n                        Semaine\n                    ")]),t._v(" "),s("vs-button",{attrs:{active:"month"===t.technicalUnitOfTime,flat:""},on:{click:function(e){return t.changeTechnicalUnitOfTime("month")}}},[t._v("\n                        Mois\n                    ")]),t._v(" "),s("vs-button",{attrs:{active:"year"===t.technicalUnitOfTime,flat:""},on:{click:function(e){return t.changeTechnicalUnitOfTime("year")}}},[t._v("\n                        Année\n                    ")])],1)],1),t._v(" "),s("div",{staticClass:"kiv-select"},[s("vs-select",{attrs:{placeholder:"Select"},on:{change:function(e){return t.resetDisableWorksheets("technical")}},model:{value:t.technicalUnitOfTime,callback:function(e){t.technicalUnitOfTime=e},expression:"technicalUnitOfTime"}},[s("vs-option",{attrs:{label:"Jour",value:"day"}},[t._v(" Jour ")]),t._v(" "),s("vs-option",{attrs:{label:"Semaine",value:"week"}},[t._v("\n                        Semaine\n                    ")]),t._v(" "),s("vs-option",{attrs:{label:"Mois",value:"month"}},[t._v(" Mois ")]),t._v(" "),s("vs-option",{attrs:{label:"Année",value:"year"}},[t._v("\n                        Année\n                    ")])],1)],1),t._v(" "),t.loadingPatientWorksheets?t._e():s("chartist",{class:{"hide-content":!t.technicalExerciseStats.series.length,labelsl:t.technicalExerciseStats.labels.length>=25,labelsm:t.technicalExerciseStats.labels.length>=12&&t.technicalExerciseStats.labels.length<25,labelss:t.technicalExerciseStats.labels.length>=5&&t.technicalExerciseStats.labels.length<12},attrs:{ratio:"ct-major-second",type:"Bar",data:t.technicalExerciseStats,options:t.technicalChartOptions,"event-handlers":t.eventHandlers}},[s("div",{staticClass:"axisY-labels technical"},[s("div",[s("p",[t._v("Excellente")])]),t._v(" "),s("div",[s("p",[t._v("Médiocre")])])])]),t._v(" "),t.loadingPatientWorksheets?t._e():s("div",{staticClass:"btns-worksheets-stats"},t._l(t.getPatientWorksheets,(function(e,i){return s("button",{key:i,staticClass:"btn-toggle-worksheet-stats",class:{disactive:t.disableWorksheets.technical.includes(e.id)},on:{click:function(s){return t.toggleHiddenWorksheetLine("technical",i,e.id)}}},[s("div",{staticClass:"line-color",style:{backgroundColor:t.colors[i],border:"5px solid "+t.colors[i]}}),t._v(" "),s("BtnChartWorksheetPartOfBody",{attrs:{worksheet:e}})],1)})),0)],1):t._e(),t._v(" "),t.loadingPatientWorksheets||t.getPatientWorksheets.length?t._e():s("div",{staticClass:"not-found"},[s("p",[s("i",{staticClass:"far fa-calendar-minus"}),t._v(" "),t.doctorView?t._e():s("span",[t._v("Vous n'avez pas encore de statistique")]),t._v(" "),t.doctorView?s("span",[t._v("Le patient n'a pas encore de statistique")]):t._e()])]),t._v(" "),t.loadingPatientWorksheets?s("div",{staticClass:"loading"}):t._e()]),t._v(" "),s("section",{staticClass:"kiv-block",attrs:{id:"difficulty"}},[t._m(2),t._v(" "),t.getPatientWorksheets.length?s("div",{staticClass:"content"},[s("div",{staticClass:"buttons"},[s("vs-button-group",[s("vs-button",{attrs:{active:"day"===t.difficultyUnitOfTime,flat:""},on:{click:function(e){return t.changeDifficultyUnitOfTime("day")}}},[t._v("\n                        Jour\n                    ")]),t._v(" "),s("vs-button",{attrs:{active:"week"===t.difficultyUnitOfTime,flat:""},on:{click:function(e){return t.changeDifficultyUnitOfTime("week")}}},[t._v("\n                        Semaine\n                    ")]),t._v(" "),s("vs-button",{attrs:{active:"month"===t.difficultyUnitOfTime,flat:""},on:{click:function(e){return t.changeDifficultyUnitOfTime("month")}}},[t._v("\n                        Mois\n                    ")]),t._v(" "),s("vs-button",{attrs:{active:"year"===t.difficultyUnitOfTime,flat:""},on:{click:function(e){return t.changeDifficultyUnitOfTime("year")}}},[t._v("\n                        Année\n                    ")])],1)],1),t._v(" "),s("div",{staticClass:"kiv-select"},[s("vs-select",{attrs:{placeholder:"Select"},on:{change:function(e){return t.resetDisableWorksheets("difficulty")}},model:{value:t.difficultyUnitOfTime,callback:function(e){t.difficultyUnitOfTime=e},expression:"difficultyUnitOfTime"}},[s("vs-option",{attrs:{label:"Jour",value:"day"}},[t._v(" Jour ")]),t._v(" "),s("vs-option",{attrs:{label:"Semaine",value:"week"}},[t._v("\n                        Semaine\n                    ")]),t._v(" "),s("vs-option",{attrs:{label:"Mois",value:"month"}},[t._v(" Mois ")]),t._v(" "),s("vs-option",{attrs:{label:"Année",value:"year"}},[t._v("\n                        Année\n                    ")])],1)],1),t._v(" "),t.loadingPatientWorksheets?t._e():s("chartist",{class:{"hide-content":!t.difficultyExerciseStats.series.length,labelsl:t.difficultyExerciseStats.labels.length>=25,labelsm:t.difficultyExerciseStats.labels.length>=9&&t.difficultyExerciseStats.labels.length<25,labelss:t.difficultyExerciseStats.labels.length>=5&&t.difficultyExerciseStats.labels.length<9},attrs:{ratio:"ct-major-second",type:"Line",data:t.difficultyExerciseStats,options:t.difficultyChartOptions,"event-handlers":t.eventHandlers}},[s("div",{staticClass:"axisY-labels difficulty"},[s("div",[s("p",[t._v("Vraiment trop difficile")])]),t._v(" "),s("div",[s("p",[t._v("Trop difficile")])]),t._v(" "),s("div",[s("p",[t._v("Ok")])]),t._v(" "),s("div",[s("p",[t._v("Trop facile")])]),t._v(" "),s("div",[s("p",[t._v("Beaucoup trop facile")])])])]),t._v(" "),t.loadingPatientWorksheets?t._e():s("div",{staticClass:"btns-worksheets-stats"},t._l(t.getPatientWorksheets,(function(e,i){return s("button",{key:i,staticClass:"btn-toggle-worksheet-stats",class:{disactive:t.disableWorksheets.difficulty.includes(e.id)},on:{click:function(s){return t.toggleHiddenWorksheetLine("difficulty",i,e.id)}}},[s("div",{staticClass:"line-color",style:{backgroundColor:t.colors[i],border:"5px solid "+t.colors[i]}}),t._v(" "),s("BtnChartWorksheetPartOfBody",{attrs:{worksheet:e}})],1)})),0)],1):t._e(),t._v(" "),t.loadingPatientWorksheets||t.getPatientWorksheets.length?t._e():s("div",{staticClass:"not-found"},[s("p",[s("i",{staticClass:"far fa-calendar-minus"}),t._v(" "),t.doctorView?t._e():s("span",[t._v("Vous n'avez pas encore de statistique")]),t._v(" "),t.doctorView?s("span",[t._v("Le patient n'a pas encore de statistique")]):t._e()])]),t._v(" "),t.loadingPatientWorksheets?s("div",{staticClass:"loading"}):t._e()])])};L._withStripped=!0;i(3123),i(6699),i(2023);var j=i(376);function Y(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function $(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Y(Object(i),!0).forEach((function(e){q(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Y(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function q(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var z={props:{patient:Object,patientWorksheets:Array,loadingPatientWorksheets:Boolean,doctorView:Boolean},components:{BtnChartWorksheetPartOfBody:j.Z},data:function(){var t=this;return{sensitivityUnitOfTime:"day",technicalUnitOfTime:"day",difficultyUnitOfTime:"day",chartOptions:{chartPadding:{right:6},high:10,low:0,axisY:{showLabel:!1,offset:78},plugins:[this.$chartist.plugins.tooltip({anchorToPoint:!0,appendToBody:!0,tooltipFnc:function(t,e){return t}})]},eventHandlers:[{event:"draw",fn:function(e){if("point"===e.type){var i=new t.$chartist.Svg("circle",{cx:[e.x],cy:[e.y],r:[8],"ct:meta":e.meta},"ct-point");e.element.replace(i).attr({transform:"translate("+e.axisX.stepLength/2+")"})}"line"===e.type&&e.element.attr({transform:"translate("+e.axisX.stepLength/2+")"}),"grid"===e.type&&0===e.index&&e.element.attr({class:e.element.attr(" class")+" border-grid"})}}],colors:["#ff6838","#ffa126","#5c91e1","#8f67d1","#57cdbf","#f17cd7","#93d2a5","#b24788","#c1b79d","#ff564b","#fb8b68","#ffcb46","#3dc863","#ff6838","#ffa126","#5c91e1","#8f67d1","#57cdbf","#f17cd7","#93d2a5","#b24788","#c1b79d","#ff564b","#fb8b68","#ffcb46","#3dc863"],iCoresspLine:{0:"a",1:"b",2:"c",3:"d",4:"e",5:"f",6:"g",7:"h",8:"i",9:"j",10:"k",11:"l",12:"m",13:"n",14:"o"},disableWorksheets:{sensitivity:[],technical:[],difficulty:[]}}},computed:{getPatientWorksheets:function(){return this.sortByCreatedAt(this.patientWorksheets.filter((function(t){return t.exerciseStats.length})))},sensitivityExerciseStats:function(){return this.generateExerciseStatsByCriterion("sensitivity")},sensitivityChartOptions:function(){return $($({},this.chartOptions),{},{axisY:{showLabel:!1,offset:45}})},technicalExerciseStats:function(){return this.generateExerciseStatsByCriterion("technical")},technicalChartOptions:function(){return $($({},this.chartOptions),{},{seriesBarDistance:13})},difficultyExerciseStats:function(){return this.generateExerciseStatsByCriterion("difficulty")},difficultyChartOptions:function(){return $({},this.chartOptions)}},methods:{sortByCreatedAt:function(t){return t.sort((function(t,e){return new Date(t.createdAt)-new Date(e.createdAt)})),t},generateExerciseStatsByCriterion:function(t){var e,i=this;"difficulty"===t&&(e=this.difficultyUnitOfTime),"sensitivity"===t&&(e=this.sensitivityUnitOfTime),"technical"===t&&(e=this.technicalUnitOfTime);var s=this.filterExerciseStatsByUnitOfTime(this.getPatientWorksheets,e),n=this.generateLabels(s),a=this.formatLabelsByUnitOfTime(n,e),o=this.getDataSlice(n.length,e);return{labels:a.filter((function(t,e){return e>=o})),series:s.map((function(s){var a=i.generateChartAverageDataPointsByCriterion(t,s.exerciseStats,n,e),r=s.title.length>20?s.title.substring(0,20)+"...":s.title;return{name:"".concat(r," - ").concat(s.partOfBody.name),data:a.filter((function(t,e){return e>=o}))}}))}},formatLabelsByUnitOfTime:function(t,e){if("day"===e)return t.map((function(t){return"".concat(t.split("-")[2],"/").concat(t.split("-")[1],"/").concat(t.split("-")[0])}));if("week"===e)return t.map((function(t){return"sem. ".concat(t.split("-")[2],"/").concat(t.split("-")[1],"/").concat(t.split("-")[0])}));var i={"01":"janv.","02":"févr.","03":"mars","04":"avril","05":"mai","06":"juin","07":"juill.","08":"août","09":"sept.",10:"oct.",11:"nov.",12:"déc."};return"month"===e?t.map((function(t){return"".concat(i[t.split("-")[1]]," ").concat(t.split("-")[0])})):t},generateLabels:function(t){var e=[];return t.forEach((function(t){Object.keys(t.exerciseStats).forEach((function(t){e.includes(t.split("|")[0])||e.push(t.split("|")[0])}))})),e.sort((function(t,e){return new Date(t)-new Date(e)}))},toggleHiddenWorksheetLine:function(t,e,i){document.querySelector("#".concat(t," .ct-series-").concat(this.iCoresspLine[e])).classList.toggle("hidden"),this.disableWorksheets[t].includes(i)?this.disableWorksheets[t].splice(this.disableWorksheets[t].indexOf(i),1):this.disableWorksheets[t].push(i)},changeSensitivityUnitOfTime:function(t){this.sensitivityUnitOfTime=t,this.resetDisableWorksheets("sensitivity")},changeTechnicalUnitOfTime:function(t){this.technicalUnitOfTime=t,this.resetDisableWorksheets("technical")},changeDifficultyUnitOfTime:function(t){this.difficultyUnitOfTime=t,this.resetDisableWorksheets("difficulty")},resetDisableWorksheets:function(t){this.disableWorksheets[t]=[]},generateChartAverageDataPointsByCriterion:function(t,e,i,s){var n=[];for(var a in i.forEach((function(t){n.push(null)})),e){var r=e[a].filter((function(e){return t===e.criterion})),c=Math.round(r.reduce((function(t,e){return t=parseInt(t+e.rating)}),[])/r.length*10)/10,l=a.split("|")[0],d=i.indexOf(l),v=new Date(l),u="";"month"===s&&(u=o()(v).format("MMM YYYY")),"year"===s&&(u=o()(v).format("YYYY")),"day"!==s&&"week"!==s||(u=o()(v).format("DD/MM/YYYY"),"week"===s&&(u="sem. ".concat(u))),n[d]={x:v,y:c,meta:u}}return n},groupStatsByDay:function(t){return t.map((function(t){return $($({},t),{},{exerciseStats:t.exerciseStats.reduce((function(t,e){return t[e.doneAt.substr(0,10)]?t[e.doneAt.substr(0,10)].push(e):t[e.doneAt.substr(0,10)]=[e],t}),{})})}))},groupStatsByWeek:function(t){return t.map((function(t){return $($({},t),{},{exerciseStats:t.exerciseStats.reduce((function(t,e,i){var s=new Date(e.doneAt),n=0===s.getDay()?7:s.getDay();if(!Object.keys(t).find((function(t){return t.includes(e.doneAt.substr(0,10))}))){var a=new Date(s.getFullYear(),s.getMonth()+1,0),o=new Date(s.getFullYear(),s.getMonth(),0),r="",c=s.getDate()-(n-1),l=s.getMonth()+1,d=s.getFullYear();c<1&&(c=o.getDate()-Math.abs(c),l>1?l-=1:(l=12,d-=1),a=o);for(var v=0;v<7;v++){var u=c,f=l,h=d;(u+=v)>a.getDate()&&(u-=a.getDate(),f<12?f+=1:(f=1,h+=1)),u=u>0&&u<10?"0".concat(u):"".concat(u),f=f>0&&f<10?"0".concat(f):"".concat(f),r+="".concat(h,"-").concat(f,"-").concat(u),6!=v&&(r+="|")}t[r]||(t[r]=[])}return t[Object.keys(t).find((function(t){return t.includes(e.doneAt.substr(0,10))}))].push(e),t}),{})})}))},groupStatsByMonth:function(t){return t.map((function(t){return $($({},t),{},{exerciseStats:t.exerciseStats.reduce((function(t,e,i){return t[e.doneAt.substr(0,7)]?t[e.doneAt.substr(0,7)].push(e):t[e.doneAt.substr(0,7)]=[e],t}),{})})}))},groupStatsByYear:function(t){return t.map((function(t){return $($({},t),{},{exerciseStats:t.exerciseStats.reduce((function(t,e,i){return t[e.doneAt.substr(0,4)]?t[e.doneAt.substr(0,4)].push(e):t[e.doneAt.substr(0,4)]=[e],t}),{})})}))},sortByDoneDate:function(t){return t.sort((function(t,e){return new Date(t.doneAt)-new Date(e.doneAt)})),t},getDataSlice:function(t,e){var i=0;return"day"===e&&(i=t-31),"week"===e&&(i=t-12),i},filterExerciseStatsByUnitOfTime:function(t,e){var i=[];return"day"===e&&(i=this.groupStatsByDay(t)),"week"===e&&(i=this.groupStatsByWeek(t)),"month"===e&&(i=this.groupStatsByMonth(t)),"year"===e&&(i=this.groupStatsByYear(t)),i},sensitivityFormatDateByUnitOfTime:function(t){return"day"===this.sensitivityUnitOfTime||"week"===this.sensitivityUnitOfTime?o()(t).format("DD/MM/YYYY"):"month"===this.sensitivityUnitOfTime?o()(t).format("MMM YYYY"):"year"===this.sensitivityUnitOfTime?o()(t).format("YYYY"):void 0},technicalFormatDateByUnitOfTime:function(t){return"day"===this.technicalUnitOfTime||"week"===this.technicalUnitOfTime?o()(t).format("DD/MM/YYYY"):"month"===this.technicalUnitOfTime?o()(t).format("MMM YYYY"):"year"===this.technicalUnitOfTime?o()(t).format("YYYY"):void 0},difficultyFormatDateByUnitOfTime:function(t){return"day"===this.difficultyUnitOfTime||"week"===this.difficultyUnitOfTime?o()(t).format("DD/MM/YYYY"):"month"===this.difficultyUnitOfTime?o()(t).format("MMM YYYY"):"year"===this.difficultyUnitOfTime?o()(t).format("YYYY"):void 0}}},Z=(0,p.Z)(z,L,[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("h2",[i("span",[t._v("Sensibilité")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("h2",[i("span",[t._v("Technique")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("h2",[i("span",[t._v("Difficultées perçues")])])}],!1,null,"80c26604",null);function R(t){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function F(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function J(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?F(Object(i),!0).forEach((function(e){H(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):F(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function H(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}Z.options.__file="assets/vue/patient/DashboardPage/MyExerciseStats.vue";var X={components:{DoctorChoice:g,MyScores:O,MyDashboardNotifications:E,MyWorksheets:I,MyExerciseStats:Z.exports},data:function(){return{patient:null,currentUser:null,doctorView:null,csrfTokenSelectDoctor:null,csrfTokenAcceptDoctor:null,csrfTokenDeclineDoctor:null,csrfTokenContact:null,myDBNotificationsContent:!0,myScoresContent:!0,myDoctorContent:!0,myWorksheetsContent:!0,loadingDoctor:!1,loadingPatientWorksheets:!1,patientWorksheets:[]}},methods:{getTimeLeftBeforeNextSession:function(t){var e=r.Z.getTimeLeftBeforeNextSession(t);return e.days>=1?1===Math.round(e.days)?"".concat(Math.round(e.days)," jour"):"".concat(Math.round(e.days)," jours"):e.hours>=1?1===e.hours?"".concat(Math.round(e.hours)," heure"):"".concat(Math.round(e.hours)," heures"):e.minutes>=1?1===e.minutes?"".concat(Math.round(e.minutes)," minute"):"".concat(Math.round(e.minutes)," minutes"):e.seconds>=1?1===e.seconds?"".concat(Math.round(e.seconds)," seconde"):"".concat(Math.round(e.seconds)," secondes"):null},calculWorksheetProgression:function(t){var e=0;t.exercises.length&&(e=100/t.exercises.length*t.exercises.filter((function(t){return t.isCompleted})).length);return e},getUserName:function(t){return r.Z.getUserName(t)},onResize:function(){window.innerWidth>576&&(this.myScoresContent=!0,this.myDBNotificationsContent=!0,this.myDoctorContent=!0,this.myWorksheetsContent=!0)},getAge:function(t){return r.Z.generateAgeFromDateOfBirth(t)},rederictToDashboard:function(){document.location.href="/doctor/".concat(this.currentUser.id,"/dashboard")}},created:function(){var t=this;s.default.prototype.$vs=this.$vs,document.body.classList.add("fuzzy-balls"),window.addEventListener("resize",this.onResize),o().locale("fr-FR");var e=JSON.parse(document.getElementById("vueData").innerHTML);this.patient=e.patient,this.currentUser=e.currentUser,this.doctorView=e.doctorView,this.csrfTokenAcceptDoctor=e.csrfTokenAcceptDoctor,this.csrfTokenDeclineDoctor=e.csrfTokenDeclineDoctor,this.csrfTokenSelectDoctor=e.csrfTokenSelectDoctor,this.csrfTokenContact=e.csrfTokenContact,this.loadingPatientWorksheets=!0,this.axios.get("/patient/".concat(this.patient.id,"/get/worksheets")).then((function(e){t.patientWorksheets=e.data.map((function(e){return J(J({},e),{},{worksheetProgression:t.calculWorksheetProgression(e),timeLeftBeforeNextSession:null,totalWorksheetSessions:null,currentWorksheetSession:{}})})),t.patientWorksheets.length?t.patientWorksheets.forEach((function(e){t.doctorView?t.axios.get("/patient/".concat(t.patient.id,"/get/current-worksheet-session/").concat(e.id,"/doctorview")).then((function(i){e.currentWorksheetSession=i.data.currentWorksheetSession,e.currentWorksheetSession&&(e.timeLeftBeforeNextSession=t.getTimeLeftBeforeNextSession(i.data.currentWorksheetSession.endAt)),t.axios.get("/patient/".concat(t.patient.id,"/get/total-worksheet-sessions/").concat(e.id)).then((function(i){e.totalWorksheetSessions=i.data,t.loadingPatientWorksheets=!1})).catch((function(t){var e="object"===R(t.response.data)?t.response.data.detail:t.response.data;console.error(e)}))})).catch((function(t){var e="object"===R(t.response.data)?t.response.data.detail:t.response.data;console.error(e)})):t.axios.get("/patient/".concat(t.patient.id,"/get/current-worksheet-session/").concat(e.id,"/time-left-before-next")).then((function(i){if(e.currentWorksheetSession=i.data.currentWorksheetSession,i.data.currentWorksheetSession&&(e.timeLeftBeforeNextSession=t.getTimeLeftBeforeNextSession(i.data.currentWorksheetSession.endAt)),i.data.notifTimeLeft){var s=document.getElementById("user-notif-list");document.getElementById("notif-bell").classList.add("has-notifications");var n=document.createElement("li");n.classList.add("prio"),n.classList.add("active"),n.addEventListener("mouseover",(function(){n.classList.remove("active")}),!1);var a=document.createElement("div");a.classList.add("notif-icon");var o=document.createElement("img");o.src="/img/icons/colored/clock.svg",o.alt="Icone d'une montre / horloge",o.classList.add("icon-clock");var r=document.createElement("p"),c=document.createElement("span");c.innerText="Plus que quelques ".concat(i.data.notifTimeLeft.time,' pour réaliser vos exercices de "').concat(i.data.notifTimeLeft.worksheet,"\", je m'y met maintenant !"),r.appendChild(c),a.appendChild(o),n.appendChild(a),n.appendChild(r),s.appendChild(n)}t.axios.get("/patient/".concat(t.patient.id,"/get/total-worksheet-sessions/").concat(e.id)).then((function(i){e.totalWorksheetSessions=i.data,t.loadingPatientWorksheets=!1})).catch((function(t){var e="object"===R(t.response.data)?t.response.data.detail:t.response.data;console.error(e)}))})).catch((function(t){console.error(t)}))})):t.loadingPatientWorksheets=!1})).catch((function(t){var e="object"===R(t.response.data)?t.response.data.detail:t.response.data;console.error(e)}))},beforeDestroy:function(){window.removeEventListener("resize",this.onResize)}},G=(0,p.Z)(X,n,[],!1,null,"2bc8e05c",null);G.options.__file="assets/vue/patient/DashboardPage.vue";var K=G.exports,Q=i(9669),tt=i.n(Q),et=i(2346),it=(i(1370),i(463)),st=i.n(it);i(5171);s.default.use(et.Z,tt()),s.default.use(st()),s.default.use(i(872),{messageNoData:"Aucune donnée",classNoData:"empty"}),new s.default({render:function(t){return t(K)}}).$mount("#vue")},376:function(t,e,i){i.d(e,{Z:function(){return o}});var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("vs-button",{staticClass:"btn-chart part-of-body",attrs:{size:"mini"}},["pied"===t.worksheet.partOfBody.icon?s("img",{staticClass:"icon-pied",attrs:{src:i(1351),alt:"Icone Pied"}}):t._e(),t._v(" "),"jambe"===t.worksheet.partOfBody.icon?s("img",{staticClass:"icon-jambe",attrs:{src:i(8189),alt:"Icone Jambe"}}):t._e(),t._v(" "),"bras"===t.worksheet.partOfBody.icon?s("img",{staticClass:"icon-bras",attrs:{src:i(7932),alt:"Icone Bras"}}):t._e(),t._v(" "),"main"===t.worksheet.partOfBody.icon?s("img",{staticClass:"icon-main",attrs:{src:i(6098),alt:"Icone Main"}}):t._e(),t._v(" "),"epaule"===t.worksheet.partOfBody.icon?s("img",{staticClass:"icon-epaule",attrs:{src:i(2890),alt:"Icone Épaule"}}):t._e(),t._v(" "),"dos"===t.worksheet.partOfBody.icon?s("img",{staticClass:"icon-dos",attrs:{src:i(6910),alt:"Icone Dos"}}):t._e(),t._v(" "),"cervicales"===t.worksheet.partOfBody.icon?s("img",{staticClass:"icon-cervicales",attrs:{src:i(1135),alt:"Icone Cervicales"}}):t._e(),t._v(" "),"lombaires"===t.worksheet.partOfBody.icon?s("img",{staticClass:"icon-lombaires",attrs:{src:i(2894),alt:"Icone Lombaires"}}):t._e(),t._v(" "),"thoracique"===t.worksheet.partOfBody.icon?s("img",{staticClass:"icon-thoracique",attrs:{src:i(4114),alt:"Icone Thoracique"}}):t._e(),t._v("\n    "+t._s(t.worksheet.title.length>20?t.worksheet.title.substring(0,20)+"...":t.worksheet.title)+"\n")])};s._withStripped=!0;var n={props:{worksheet:Object}},a=(0,i(1900).Z)(n,s,[],!1,null,null,null);a.options.__file="assets/vue/components/BtnChartWorksheetPartOfBody.vue";var o=a.exports},8737:function(t,e,i){t.exports=i.p+"images/bras.0ec10e9f.svg"},9402:function(t,e,i){t.exports=i.p+"images/hand.5b877b0c.svg"},8513:function(t,e,i){t.exports=i.p+"images/reward.a2c9e50a.svg"},1407:function(t,e,i){t.exports=i.p+"images/46.0399c65a.svg"},70:function(t,e,i){t.exports=i.p+"images/47.b41f86d5.svg"},889:function(t,e,i){t.exports=i.p+"images/48.fdbe8352.svg"},5988:function(t,e,i){t.exports=i.p+"images/49.d0512f3a.svg"},1867:function(t,e,i){t.exports=i.p+"images/50.dc6f934c.svg"},4857:function(t,e,i){t.exports=i.p+"images/51.8b05a017.svg"},1703:function(t,e,i){t.exports=i.p+"images/52.c28f7a8b.svg"},6240:function(t,e,i){t.exports=i.p+"images/53.324059de.svg"},2213:function(t,e,i){t.exports=i.p+"images/54.096a1702.svg"},9552:function(t,e,i){t.exports=i.p+"images/60.9d802eef.svg"},5057:function(t,e,i){t.exports=i.p+"images/61.a30efa8e.svg"}},function(t){t.O(0,[429,725,900],(function(){return e=8699,t(t.s=e);var e}));t.O()}]);